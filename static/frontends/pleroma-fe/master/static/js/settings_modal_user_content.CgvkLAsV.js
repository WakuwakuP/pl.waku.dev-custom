import{f as ge,K as Lt,i as Gt,_ as J,B as L,c as w,o as f,a as o,v as H,y as T,t as d,D as $,x as u,L as wn,e as $e,I as K,J as ne,N as tl,O as sl,Q as nl,R as li,g as $n,S as ol,U as ee,V as ue,W as Ke,X as ri,w as v,Y as Kt,Z as al,z as rn,A as Y,$ as il,a0 as ll,a1 as rl,a2 as dl,a3 as di,G as Xt,a4 as ul,a5 as kn,a6 as et,l as le,a7 as cl,h as pl,a8 as ui,a9 as hl,aa as Cn,ab as Tn,ac as ml,ad as fl,ae as Pt,af as gl,ag as ci,ah as Vn,ai as pi,aj as bl,ak as vl,al as yl,am as wl,an as $l,ao as kl,ap as Cl,aq as Tl,ar as Vl,as as hi,at as Sl,au as mi,av as Ll,aw as fi,ax as Pl,u as x,ay as _o,az as Zt,aA as gi,aB as Mt,aC as xt,aD as rt,aE as Il,aF as El,aG as bi,aH as zt,F as Xe,aI as _l,aJ as Al,aK as Ol,aL as Ul,aM as Ml,aN as Bl,P as Sn,aO as vi,aP as Rl,aQ as Dl,b as Nl,aR as Fl,aS as yi,aT as Ct,aU as Ln,aV as Ht,aW as wi,aX as mt,aY as Q,aZ as Bt,a_ as Pn,a$ as jl,b0 as ql,b1 as Ze,b2 as Ao,b3 as zl,b4 as dn,p as Hl,b5 as Wl,b6 as Yl,b7 as Gl,b8 as Kl,b9 as Xl,ba as Be,bb as Jl,bc as Rt,bd as Ql,be as Zl,bf as xl,bg as er,bh as tr,bi as sr,bj as nr,bk as or,bl as Oo,bm as ar,E as $i,bn as es,bo as he,bp as dt,bq as ir,br as Uo,bs as Dt,bt as lr,bu as rr,bv as dr,bw as ur,bx as cr,by as pr,bz as hr,bA as mr,bB as fr,bC as gr,bD as br,bE as vr,bF as yr,bG as wr,bH as $r,bI as kr,bJ as Cr,bK as Tr,bL as Vr,bM as Sr,bN as Lr,bO as Pr,bP as Ir,bQ as Er,bR as _r,bS as Ar,bT as Or,bU as Ur,bV as Mr,bW as Br,bX as Rr,bY as Dr,bZ as Nr,b_ as Fr,b$ as jr,c0 as qr,c1 as zr,c2 as Hr,c3 as Wr,c4 as Yr,c5 as Gr,c6 as Kr,c7 as Xr,c8 as Jr,c9 as Qr,ca as Zr,cb as xr,cc as ed,cd as td}from"./main.C8E1fd6V.js";import{S as It,B as Et,a as ze,I as In,C as En,N as sd,P as ki,b as nd}from"./string_setting.COMbwp54.js";import{n as Jt,a as _n}from"./settings_modal.CCHQg23r.js";ge.add(Lt,Gt);const od={props:{submitHandler:{type:Function,required:!0},submitButtonLabel:{type:String},successMessage:{type:String},errorMessage:{type:String}},data(){return{file:null,error:!1,success:!1,submitting:!1}},methods:{change(){this.file=this.$refs.input.files[0]},submit(){this.dismiss(),this.submitting=!0,this.submitHandler(this.file).then(()=>{this.success=!0}).catch(()=>{this.error=!0}).finally(()=>{this.submitting=!1})},dismiss(){this.success=!1,this.error=!1}}},ad={class:"importer"},id={key:2},ld={key:3};function rd(e,t,s,n,i,a){const l=L("FAIcon");return f(),w("div",ad,[o("form",null,[o("input",{ref:"input",class:"input",type:"file",onChange:t[0]||(t[0]=(...r)=>e.change&&e.change(...r))},null,544)]),e.submitting?(f(),H(l,{key:0,class:"importer-uploading",spin:"",icon:"circle-notch"})):(f(),w("button",{key:1,class:"btn button-default",onClick:t[1]||(t[1]=(...r)=>e.submit&&e.submit(...r))},d(e.submitButtonLabel||e.$t("importer.submit")),1)),e.success?(f(),w("div",id,[o("button",{class:"button-unstyled",onClick:t[2]||(t[2]=(...r)=>e.dismiss&&e.dismiss(...r))},[u(l,{icon:"times"})]),t[4]||(t[4]=$(" "+d(" ")+" ")),o("span",null,d(e.successMessage||e.$t("importer.success")),1)])):e.error?(f(),w("div",ld,[o("button",{class:"button-unstyled",onClick:t[3]||(t[3]=(...r)=>e.dismiss&&e.dismiss(...r))},[u(l,{icon:"times"})]),t[5]||(t[5]=$(" "+d(" ")+" ")),o("span",null,d(e.errorMessage||e.$t("importer.error")),1)])):T("",!0)])}const dd=J(od,[["render",rd]]);ge.add(Lt);const ud={props:{getContent:{type:Function,required:!0},filename:{type:String,default:"export.csv"},exportButtonLabel:{type:String},processingMessage:{type:String}},data(){return{processing:!1}},methods:{process(){this.processing=!0,this.getContent().then(e=>{const t=document.createElement("a");t.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(e)),t.setAttribute("download",this.filename),t.style.display="none",document.body.appendChild(t),t.click(),document.body.removeChild(t),setTimeout(()=>{this.processing=!1},2e3)})}}},cd={class:"exporter"},pd={key:0};function hd(e,t,s,n,i,a){const l=L("FAIcon");return f(),w("div",cd,[e.processing?(f(),w("div",pd,[u(l,{icon:"circle-notch",size:"lg",spin:""}),o("span",null,d(e.processingMessage||e.$t("exporter.processing")),1)])):(f(),w("button",{key:1,class:"btn button-default",onClick:t[0]||(t[0]=(...r)=>e.process&&e.process(...r))},d(e.exportButtonLabel||e.$t("exporter.export")),1))])}const md=J(ud,[["render",hd]]),fd={data(){return{activeTab:"profile",newDomainToMute:"",listBackupsError:!1,addBackupError:!1,addedBackup:!1,backups:[]}},created(){this.$store.dispatch("fetchTokens"),this.fetchBackups()},components:{Importer:dd,Exporter:md,Checkbox:$e},computed:{...wn({backendInteractor:e=>e.api.backendInteractor,user:e=>e.users.currentUser})},methods:{getFollowsContent(){return this.backendInteractor.exportFriends({id:this.user.id}).then(this.generateExportableUsersContent)},getBlocksContent(){return this.backendInteractor.fetchBlocks().then(this.generateExportableUsersContent)},getMutesContent(){return this.backendInteractor.fetchMutes().then(this.generateExportableUsersContent)},importFollows(e){return this.backendInteractor.importFollows({file:e}).then(t=>{if(!t)throw new Error("failed")})},importBlocks(e){return this.backendInteractor.importBlocks({file:e}).then(t=>{if(!t)throw new Error("failed")})},importMutes(e){return this.backendInteractor.importMutes({file:e}).then(t=>{if(!t)throw new Error("failed")})},generateExportableUsersContent(e){return e.map(t=>t&&t.is_local?t.screen_name+"@"+location.hostname:t.screen_name).join(`
`)},addBackup(){this.$store.state.api.backendInteractor.addBackup().then(()=>{this.addedBackup=!0,this.addBackupError=!1}).catch(e=>{this.addedBackup=!1,this.addBackupError=e}).then(()=>this.fetchBackups())},fetchBackups(){this.$store.state.api.backendInteractor.listBackups().then(e=>{this.backups=e,this.listBackupsError=!1}).catch(e=>{this.listBackupsError=e.error})}}},gd=["label"],bd={class:"setting-item"},vd={class:"setting-item"},yd={class:"setting-item"},wd={class:"setting-item"},$d={class:"setting-item"},kd={class:"setting-item"},Cd={class:"setting-item"},Td={class:"actions"},Vd=["href"],Sd={key:1},Ld={key:2},Pd={key:3},Id={key:0,class:"alert error"},Ed=["title"],_d={key:1},Ad={key:2};function Od(e,t,s,n,i,a){const l=L("Importer"),r=L("Exporter"),p=L("FAIcon");return f(),w("div",{label:e.$t("settings.data_import_export_tab")},[o("div",bd,[o("h2",null,d(e.$t("settings.follow_import")),1),o("p",null,d(e.$t("settings.import_followers_from_a_csv_file")),1),u(l,{"submit-handler":e.importFollows,"success-message":e.$t("settings.follows_imported"),"error-message":e.$t("settings.follow_import_error")},null,8,["submit-handler","success-message","error-message"])]),o("div",vd,[o("h2",null,d(e.$t("settings.follow_export")),1),u(r,{"get-content":e.getFollowsContent,filename:"friends.csv","export-button-label":e.$t("settings.follow_export_button")},null,8,["get-content","export-button-label"])]),o("div",yd,[o("h2",null,d(e.$t("settings.block_import")),1),o("p",null,d(e.$t("settings.import_blocks_from_a_csv_file")),1),u(l,{"submit-handler":e.importBlocks,"success-message":e.$t("settings.blocks_imported"),"error-message":e.$t("settings.block_import_error")},null,8,["submit-handler","success-message","error-message"])]),o("div",wd,[o("h2",null,d(e.$t("settings.block_export")),1),u(r,{"get-content":e.getBlocksContent,filename:"blocks.csv","export-button-label":e.$t("settings.block_export_button")},null,8,["get-content","export-button-label"])]),o("div",$d,[o("h2",null,d(e.$t("settings.mute_import")),1),o("p",null,d(e.$t("settings.import_mutes_from_a_csv_file")),1),u(l,{"submit-handler":e.importMutes,"success-message":e.$t("settings.mutes_imported"),"error-message":e.$t("settings.mute_import_error")},null,8,["submit-handler","success-message","error-message"])]),o("div",kd,[o("h2",null,d(e.$t("settings.mute_export")),1),u(r,{"get-content":e.getMutesContent,filename:"mutes.csv","export-button-label":e.$t("settings.mute_export_button")},null,8,["get-content","export-button-label"])]),o("div",Cd,[o("h2",null,d(e.$t("settings.account_backup")),1),o("p",null,d(e.$t("settings.account_backup_description")),1),o("table",null,[o("thead",null,[o("tr",null,[o("th",null,d(e.$t("settings.account_backup_table_head")),1),t[2]||(t[2]=o("th",null,null,-1))])]),o("tbody",null,[(f(!0),w(K,null,ne(e.backups,c=>(f(),w("tr",{key:c.id},[o("td",null,d(c.inserted_at),1),o("td",Td,[c.processed?(f(),w("a",{key:0,target:"_blank",href:c.url},d(e.$t("settings.download_backup")),9,Vd)):c.state==="running"?(f(),w("span",Sd,d(e.$t("settings.backup_running",{number:c.processed_number},c.processed_number)),1)):c.state==="failed"?(f(),w("span",Ld,d(e.$t("settings.backup_failed")),1)):(f(),w("span",Pd,d(e.$t("settings.backup_not_ready")),1))])]))),128))])]),e.listBackupsError?(f(),w("div",Id,[$(d(e.$t("settings.list_backups_error",{error:e.error}))+" ",1),o("button",{title:e.$t("settings.hide_list_backups_error_action"),onClick:t[0]||(t[0]=c=>e.listBackupsError=!1)},[u(p,{class:"fa-scale-110 fa-old-padding",icon:"times"})],8,Ed)])):T("",!0),o("button",{class:"btn button-default",onClick:t[1]||(t[1]=(...c)=>e.addBackup&&e.addBackup(...c))},d(e.$t("settings.add_backup")),1),e.addedBackup?(f(),w("p",_d,d(e.$t("settings.added_backup")),1)):T("",!0),e.addBackupError!==!1?(f(),w("p",Ad,d(e.$t("settings.add_backup_error",{error:e.addBackupError})),1)):T("",!0)])],8,gd)}const Ud=J(fd,[["render",Od]]);var ts,Mo;function Md(){if(Mo)return ts;Mo=1;var e="Expected a function";function t(s){if(typeof s!="function")throw new TypeError(e);return function(){var n=arguments;switch(n.length){case 0:return!s.call(this);case 1:return!s.call(this,n[0]);case 2:return!s.call(this,n[0],n[1]);case 3:return!s.call(this,n[0],n[1],n[2])}return!s.apply(this,n)}}return ts=t,ts}var ss,Bo;function Bd(){if(Bo)return ss;Bo=1;var e=tl(),t=sl(),s=nl(),n=li(),i=Md();function a(l,r){var p=n(l)?e:t;return p(l,i(s(r,3)))}return ss=a,ss}var Rd=Bd();const Ro=$n(Rd),Dd=500,Nd={props:{query:{type:Function,required:!0},filter:{type:Function},placeholder:{type:String,default:"Search..."}},data(){return{term:"",timeout:null,results:[],resultsVisible:!1}},computed:{filtered(){return this.filter?this.filter(this.results):this.results}},watch:{term(e){this.fetchResults(e)}},methods:{fetchResults(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>{this.results=[],e&&this.query(e).then(t=>{this.results=t})},Dd)},onInputClick(){this.resultsVisible=!0},onClickOutside(){this.resultsVisible=!1}}},Fd={class:"autosuggest"},jd=["placeholder"],qd={key:0,class:"panel autosuggest-results"};function zd(e,t,s,n,i,a){const l=ol("click-outside");return ee((f(),w("div",Fd,[ee(o("input",{"onUpdate:modelValue":t[0]||(t[0]=r=>e.term=r),placeholder:e.placeholder,class:"input autosuggest-input",onClick:t[1]||(t[1]=(...r)=>e.onInputClick&&e.onInputClick(...r))},null,8,jd),[[ue,e.term]]),e.resultsVisible&&e.filtered.length>0?(f(),w("div",qd,[(f(!0),w(K,null,ne(e.filtered,r=>Ke(e.$slots,"default",{item:r})),256))])):T("",!0)])),[[l,e.onClickOutside]])}const Ci=J(Nd,[["render",zd]]),Hd={props:["userId"],data(){return{progress:!1}},computed:{user(){return this.$store.getters.findUser(this.userId)},relationship(){return this.$store.getters.relationship(this.userId)},blocked(){return this.relationship.blocking}},components:{BasicUserCard:ri},methods:{unblockUser(){this.progress=!0,this.$store.dispatch("unblockUser",this.user.id).then(()=>{this.progress=!1})},blockUser(){this.progress=!0,this.$store.dispatch("blockUser",this.user.id).then(()=>{this.progress=!1})}}},Wd={class:"block-card-content-container"},Yd=["disabled"],Gd=["disabled"];function Kd(e,t,s,n,i,a){const l=L("basic-user-card");return f(),H(l,{user:e.user},{default:v(()=>[o("div",Wd,[e.blocked?(f(),w("button",{key:0,class:"btn button-default",disabled:e.progress,onClick:t[0]||(t[0]=(...r)=>e.unblockUser&&e.unblockUser(...r))},[e.progress?(f(),w(K,{key:0},[$(d(e.$t("user_card.unblock_progress")),1)],64)):(f(),w(K,{key:1},[$(d(e.$t("user_card.unblock")),1)],64))],8,Yd)):(f(),w("button",{key:1,class:"btn button-default",disabled:e.progress,onClick:t[1]||(t[1]=(...r)=>e.blockUser&&e.blockUser(...r))},[e.progress?(f(),w(K,{key:0},[$(d(e.$t("user_card.block_progress")),1)],64)):(f(),w(K,{key:1},[$(d(e.$t("user_card.block")),1)],64))],8,Gd))])]),_:1},8,["user"])}const Xd=J(Hd,[["render",Kd]]),Jd={props:["userId"],data(){return{progress:!1}},computed:{user(){return this.$store.getters.findUser(this.userId)},relationship(){return this.$store.getters.relationship(this.userId)},muted(){return this.relationship.muting}},components:{BasicUserCard:ri},methods:{unmuteUser(){this.progress=!0,this.$store.dispatch("unmuteUser",this.userId).then(()=>{this.progress=!1})},muteUser(){this.progress=!0,this.$store.dispatch("muteUser",this.userId).then(()=>{this.progress=!1})}}},Qd={class:"mute-card-content-container"},Zd=["disabled"],xd=["disabled"];function eu(e,t,s,n,i,a){const l=L("basic-user-card");return f(),H(l,{user:e.user},{default:v(()=>[o("div",Qd,[e.muted?(f(),w("button",{key:0,class:"btn button-default",disabled:e.progress,onClick:t[0]||(t[0]=(...r)=>e.unmuteUser&&e.unmuteUser(...r))},[e.progress?(f(),w(K,{key:0},[$(d(e.$t("user_card.unmute_progress")),1)],64)):(f(),w(K,{key:1},[$(d(e.$t("user_card.unmute")),1)],64))],8,Zd)):(f(),w("button",{key:1,class:"btn button-default",disabled:e.progress,onClick:t[1]||(t[1]=(...r)=>e.muteUser&&e.muteUser(...r))},[e.progress?(f(),w(K,{key:0},[$(d(e.$t("user_card.mute_progress")),1)],64)):(f(),w(K,{key:1},[$(d(e.$t("user_card.mute")),1)],64))],8,xd))])]),_:1},8,["user"])}const tu=J(Jd,[["render",eu]]),su={props:["domain"],components:{ProgressButton:Kt},computed:{user(){return this.$store.state.users.currentUser},muted(){return this.user.domainMutes.includes(this.domain)}},methods:{unmuteDomain(){return this.$store.dispatch("unmuteDomain",this.domain)},muteDomain(){return this.$store.dispatch("muteDomain",this.domain)}}},nu={class:"domain-mute-card"},ou={class:"domain-mute-card-domain"};function au(e,t,s,n,i,a){const l=L("ProgressButton");return f(),w("div",nu,[o("div",ou,d(e.domain),1),e.muted?(f(),H(l,{key:0,click:e.unmuteDomain,class:"btn button-default"},{progress:v(()=>[$(d(e.$t("domain_mute_card.unmute_progress")),1)]),default:v(()=>[$(d(e.$t("domain_mute_card.unmute"))+" ",1)]),_:1},8,["click"])):(f(),H(l,{key:1,click:e.muteDomain,class:"btn button-default"},{progress:v(()=>[$(d(e.$t("domain_mute_card.mute_progress")),1)]),default:v(()=>[$(d(e.$t("domain_mute_card.mute"))+" ",1)]),_:1},8,["click"]))])}const iu=J(su,[["render",au]]),lu={components:{List:al,Checkbox:$e},props:{items:{type:Array,default:()=>[]},getKey:{type:Function,default:e=>e.id}},data(){return{selected:[]}},computed:{allKeys(){return this.items.map(this.getKey)},filteredSelected(){return this.allKeys.filter(e=>this.selected.indexOf(e)!==-1)},allSelected(){return this.filteredSelected.length===this.items.length},noneSelected(){return this.filteredSelected.length===0},someSelected(){return!this.allSelected&&!this.noneSelected}},methods:{isSelected(e){return this.filteredSelected.indexOf(this.getKey(e))!==-1},toggle(e,t){const s=this.getKey(t),n=this.isSelected(s);e!==n&&(e?this.selected.push(s):this.selected.splice(this.selected.indexOf(s),1))},toggleAll(e){e?this.selected=this.allKeys.slice(0):this.selected=[]}}},ru={class:"selectable-list"},du={key:0,class:"selectable-list-header"},uu={class:"selectable-list-checkbox-wrapper"},cu={class:"selectable-list-header-actions"},pu=["onClick"],hu={class:"selectable-list-checkbox-wrapper"};function mu(e,t,s,n,i,a){const l=L("Checkbox"),r=L("List");return f(),w("div",ru,[e.items.length>0?(f(),w("div",du,[o("div",uu,[u(l,{"model-value":e.allSelected,indeterminate:e.someSelected,"onUpdate:modelValue":e.toggleAll},{default:v(()=>[$(d(e.$t("selectable_list.select_all")),1)]),_:1},8,["model-value","indeterminate","onUpdate:modelValue"])]),o("div",cu,[Ke(e.$slots,"header",{selected:e.filteredSelected})])])):T("",!0),u(r,{items:e.items,"get-key":e.getKey,"get-class":p=>e.isSelected(p)?"-active":""},{item:v(({item:p})=>[o("div",{class:Y(["selectable-list-item-inner",{"selectable-list-item-selected-inner":e.isSelected(p)}]),onClick:rn(c=>e.toggle(!e.isSelected(p),p),["stop"])},[o("div",hu,[u(l,{"model-value":e.isSelected(p),"onUpdate:modelValue":c=>e.toggle(c,p),onClick:t[0]||(t[0]=rn(()=>{},["stop"]))},null,8,["model-value","onUpdate:modelValue"])]),Ke(e.$slots,"item",{item:p})],10,pu)]),empty:v(()=>[Ke(e.$slots,"empty")]),_:3},8,["items","get-key","get-class"])])}const An=J(lu,[["render",mu]]);function fu(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!dl(e)}ge.add(Lt);const gu=({fetch:e,select:t,childPropName:s="content",additionalPropNames:n=[]})=>i=>({props:[...Object.keys(il(i)).filter(r=>r!==s).concat(n),"refresh"],data(){return{loading:!1,error:!1}},computed:{fetchedData(){return t(this.$props,this.$store)}},created(){(this.refresh||rl(this.fetchedData))&&this.fetchData()},methods:{fetchData(){this.loading||(this.loading=!0,this.error=!1,e(this.$props,this.$store).then(()=>{this.loading=!1}).catch(()=>{this.error=!0,this.loading=!1}))}},render(){if(!this.error&&!this.loading){const r={...this.$props,[s]:this.fetchedData},p=this.$slots;return u("div",{class:"with-subscription"},[u(i,r,fu(p)?p:{default:()=>[p]})])}else return u("div",{class:"with-subscription-loading"},[this.error?u("a",{onClick:this.fetchData,class:"alert error"},[this.$t("general.generic_error")]):u(ll,{spin:!0,icon:"circle-notch"},null)])}}),bu=di({fetch:(e,t)=>t.dispatch("fetchBlocks"),select:(e,t)=>kn(t.state.users.currentUser,"blockIds",[]),childPropName:"items"})(An),vu=di({fetch:(e,t)=>t.dispatch("fetchMutes"),select:(e,t)=>kn(t.state.users.currentUser,"muteIds",[]),childPropName:"items"})(An),yu=gu({fetch:(e,t)=>t.dispatch("fetchDomainMutes"),select:(e,t)=>kn(t.state.users.currentUser,"domainMutes",[]),childPropName:"items"})(An),wu={data(){return{activeTab:"profile"}},created(){this.$store.dispatch("fetchTokens"),this.$store.dispatch("getKnownDomains")},components:{TabSwitcher:Xt,BlockList:bu,MuteList:vu,DomainMuteList:yu,BlockCard:Xd,MuteCard:tu,DomainMuteCard:iu,ProgressButton:Kt,Autosuggest:Ci,Checkbox:$e},computed:{knownDomains(){return this.$store.state.instance.knownDomains},user(){return this.$store.state.users.currentUser}},methods:{importFollows(e){return this.$store.state.api.backendInteractor.importFollows({file:e}).then(t=>{if(!t)throw new Error("failed")})},importBlocks(e){return this.$store.state.api.backendInteractor.importBlocks({file:e}).then(t=>{if(!t)throw new Error("failed")})},generateExportableUsersContent(e){return e.map(t=>t&&t.is_local?t.screen_name+"@"+location.hostname:t.screen_name).join(`
`)},activateTab(e){this.activeTab=e},filterUnblockedUsers(e){return Ro(e,t=>this.$store.getters.relationship(this.userId).blocking||t===this.user.id)},filterUnMutedUsers(e){return Ro(e,t=>this.$store.getters.relationship(this.userId).muting||t===this.user.id)},queryUserIds(e){return this.$store.dispatch("searchUsers",{query:e}).then(t=>ul(t,"id"))},blockUsers(e){return this.$store.dispatch("blockUsers",e)},unblockUsers(e){return this.$store.dispatch("unblockUsers",e)},muteUsers(e){return this.$store.dispatch("muteUsers",e)},unmuteUsers(e){return this.$store.dispatch("unmuteUsers",e)},filterUnMutedDomains(e){return e.filter(t=>!this.user.domainMutes.includes(t))},queryKnownDomains(e){return new Promise(t=>{t(this.knownDomains.filter(s=>s.toLowerCase().includes(e)))})},unmuteDomains(e){return this.$store.dispatch("unmuteDomains",e)}}},$u=["label"],ku={class:"usersearch-wrapper"},Cu={class:"bulk-actions"},Tu=["label"],Vu=["label"],Su={class:"usersearch-wrapper"},Lu={class:"bulk-actions"},Pu=["label"],Iu={class:"domain-mute-form"},Eu={class:"bulk-actions"};function _u(e,t,s,n,i,a){const l=L("BlockCard"),r=L("Autosuggest"),p=L("ProgressButton"),c=L("BlockList"),h=L("MuteCard"),m=L("MuteList"),g=L("DomainMuteCard"),k=L("DomainMuteList"),V=L("tab-switcher");return f(),H(V,{"scrollable-tabs":!0,class:"mutes-and-blocks-tab"},{default:v(()=>[o("div",{label:e.$t("settings.blocks_tab")},[o("div",ku,[u(r,{filter:e.filterUnblockedUsers,query:e.queryUserIds,placeholder:e.$t("settings.search_user_to_block")},{default:v(S=>[u(l,{"user-id":S.item},null,8,["user-id"])]),_:1},8,["filter","query","placeholder"])]),u(c,{refresh:!0,"get-key":S=>S},{header:v(({selected:S})=>[o("div",Cu,[S.length>0?(f(),H(p,{key:0,class:"btn button-default bulk-action-button",click:()=>e.blockUsers(S)},{progress:v(()=>[$(d(e.$t("user_card.block_progress")),1)]),default:v(()=>[$(d(e.$t("user_card.block"))+" ",1)]),_:2},1032,["click"])):T("",!0),S.length>0?(f(),H(p,{key:1,class:"btn button-default",click:()=>e.unblockUsers(S)},{progress:v(()=>[$(d(e.$t("user_card.unblock_progress")),1)]),default:v(()=>[$(d(e.$t("user_card.unblock"))+" ",1)]),_:2},1032,["click"])):T("",!0)])]),item:v(({item:S})=>[u(l,{"user-id":S},null,8,["user-id"])]),empty:v(()=>[$(d(e.$t("settings.no_blocks")),1)]),_:1},8,["get-key"])],8,$u),o("div",{label:e.$t("settings.mutes_tab")},[u(V,null,{default:v(()=>[o("div",{label:e.$t("settings.user_mutes")},[o("div",Su,[u(r,{filter:e.filterUnMutedUsers,query:e.queryUserIds,placeholder:e.$t("settings.search_user_to_mute")},{default:v(S=>[u(h,{"user-id":S.item},null,8,["user-id"])]),_:1},8,["filter","query","placeholder"])]),u(m,{refresh:!0,"get-key":S=>S},{header:v(({selected:S})=>[o("div",Lu,[S.length>0?(f(),H(p,{key:0,class:"btn button-default",click:()=>e.muteUsers(S)},{progress:v(()=>[$(d(e.$t("user_card.mute_progress")),1)]),default:v(()=>[$(d(e.$t("user_card.mute"))+" ",1)]),_:2},1032,["click"])):T("",!0),S.length>0?(f(),H(p,{key:1,class:"btn button-default",click:()=>e.unmuteUsers(S)},{progress:v(()=>[$(d(e.$t("user_card.unmute_progress")),1)]),default:v(()=>[$(d(e.$t("user_card.unmute"))+" ",1)]),_:2},1032,["click"])):T("",!0)])]),item:v(({item:S})=>[u(h,{"user-id":S},null,8,["user-id"])]),empty:v(()=>[$(d(e.$t("settings.no_mutes")),1)]),_:1},8,["get-key"])],8,Vu),o("div",{label:e.$t("settings.domain_mutes")},[o("div",Iu,[u(r,{filter:e.filterUnMutedDomains,query:e.queryKnownDomains,placeholder:e.$t("settings.type_domains_to_mute")},{default:v(S=>[u(g,{domain:S.item},null,8,["domain"])]),_:1},8,["filter","query","placeholder"])]),u(k,{refresh:!0,"get-key":S=>S},{header:v(({selected:S})=>[o("div",Eu,[S.length>0?(f(),H(p,{key:0,class:"btn button-default",click:()=>e.unmuteDomains(S)},{progress:v(()=>[$(d(e.$t("domain_mute_card.unmute_progress")),1)]),default:v(()=>[$(d(e.$t("domain_mute_card.unmute"))+" ",1)]),_:2},1032,["click"])):T("",!0)])]),item:v(({item:S})=>[u(g,{domain:S},null,8,["domain"])]),empty:v(()=>[$(d(e.$t("settings.no_mutes")),1)]),_:1},8,["get-key"])],8,Pu)]),_:1})],8,Tu)]),_:1})}const Au=J(wu,[["render",_u]]),Ou={data(){return{activeTab:"profile",notificationSettings:this.$store.state.users.currentUser.notification_settings,newDomainToMute:""}},components:{BooleanSetting:Et},computed:{user(){return this.$store.state.users.currentUser},canReceiveReports(){return this.user?this.user.privileges.includes("reports_manage_reports"):!1},...It()},methods:{updateNotificationSettings(){this.$store.state.api.backendInteractor.updateNotificationSettings({settings:this.notificationSettings})}}},Uu=["label"],Mu={class:"setting-item"},Bu={class:"setting-list"},Ru={class:"setting-item"},Du={class:"setting-list"},Nu={key:0},Fu={class:"setting-list two-column"},ju={class:"setting-list"},qu={class:"setting-list"},zu={class:"setting-list"},Hu={class:"setting-list"},Wu={class:"setting-list"},Yu={class:"setting-list"},Gu={class:"setting-list"},Ku={class:"setting-list"},Xu={class:"setting-list"},Ju={key:0},Qu={class:"setting-list"},Zu={class:"setting-list suboptions"},xu={key:0,class:"setting-item"},ec={class:"setting-list"},tc={class:"setting-list suboptions"},sc={class:"setting-item"};function nc(e,t,s,n,i,a){const l=L("BooleanSetting");return f(),w("div",{label:e.$t("settings.notifications")},[o("div",Mu,[o("h2",null,d(e.$t("settings.notification_setting_annoyance")),1),o("ul",Bu,[o("li",null,[u(l,{path:"closingDrawerMarksAsSeen"},{default:v(()=>[$(d(e.$t("settings.notification_setting_drawer_marks_as_seen")),1)]),_:1})]),o("li",null,[u(l,{path:"ignoreInactionableSeen"},{default:v(()=>[$(d(e.$t("settings.notification_setting_ignore_inactionable_seen")),1)]),_:1}),o("div",null,[o("small",null,d(e.$t("settings.notification_setting_ignore_inactionable_seen_tip")),1)])]),o("li",null,[u(l,{path:"unseenAtTop",expert:"1"},{default:v(()=>[$(d(e.$t("settings.notification_setting_unseen_at_top")),1)]),_:1})])])]),o("div",Ru,[o("h2",null,d(e.$t("settings.notification_setting_filters")),1),o("ul",Du,[o("li",null,[u(l,{source:"profile",path:"blockNotificationsFromStrangers"},{default:v(()=>[$(d(e.$t("settings.notification_setting_block_from_strangers")),1)]),_:1})]),o("li",null,[o("h3",null,d(e.$t("settings.notification_visibility")),1),e.expertLevel>0?(f(),w("p",Nu,d(e.$t("settings.notification_setting_filters_chrome_push")),1)):T("",!0),o("ul",Fu,[o("li",null,[o("h4",null,d(e.$t("settings.notification_visibility_mentions")),1),o("ul",ju,[o("li",null,[u(l,{path:"notificationVisibility.mentions"},{default:v(()=>[$(d(e.$t("settings.notification_visibility_in_column")),1)]),_:1})]),o("li",null,[u(l,{path:"notificationNative.mentions"},{default:v(()=>[$(d(e.$t("settings.notification_visibility_native_notifications")),1)]),_:1})])])]),o("li",null,[o("h4",null,d(e.$t("settings.notification_visibility_statuses")),1),o("ul",qu,[o("li",null,[u(l,{path:"notificationVisibility.statuses"},{default:v(()=>[$(d(e.$t("settings.notification_visibility_in_column")),1)]),_:1})]),o("li",null,[u(l,{path:"notificationNative.statuses"},{default:v(()=>[$(d(e.$t("settings.notification_visibility_native_notifications")),1)]),_:1})])])]),o("li",null,[o("h4",null,d(e.$t("settings.notification_visibility_likes")),1),o("ul",zu,[o("li",null,[u(l,{path:"notificationVisibility.likes"},{default:v(()=>[$(d(e.$t("settings.notification_visibility_in_column")),1)]),_:1})]),o("li",null,[u(l,{path:"notificationNative.likes"},{default:v(()=>[$(d(e.$t("settings.notification_visibility_native_notifications")),1)]),_:1})])])]),o("li",null,[o("h4",null,d(e.$t("settings.notification_visibility_repeats")),1),o("ul",Hu,[o("li",null,[u(l,{path:"notificationVisibility.repeats"},{default:v(()=>[$(d(e.$t("settings.notification_visibility_in_column")),1)]),_:1})]),o("li",null,[u(l,{path:"notificationNative.repeats"},{default:v(()=>[$(d(e.$t("settings.notification_visibility_native_notifications")),1)]),_:1})])])]),o("li",null,[o("h4",null,d(e.$t("settings.notification_visibility_emoji_reactions")),1),o("ul",Wu,[o("li",null,[u(l,{path:"notificationVisibility.emojiReactions"},{default:v(()=>[$(d(e.$t("settings.notification_visibility_in_column")),1)]),_:1})]),o("li",null,[u(l,{path:"notificationNative.emojiReactions"},{default:v(()=>[$(d(e.$t("settings.notification_visibility_native_notifications")),1)]),_:1})])])]),o("li",null,[o("h4",null,d(e.$t("settings.notification_visibility_follows")),1),o("ul",Yu,[o("li",null,[u(l,{path:"notificationVisibility.follows"},{default:v(()=>[$(d(e.$t("settings.notification_visibility_in_column")),1)]),_:1})]),o("li",null,[u(l,{path:"notificationNative.follows"},{default:v(()=>[$(d(e.$t("settings.notification_visibility_native_notifications")),1)]),_:1})])])]),o("li",null,[o("h4",null,d(e.$t("settings.notification_visibility_follow_requests")),1),o("ul",Gu,[o("li",null,[u(l,{path:"notificationVisibility.followRequest"},{default:v(()=>[$(d(e.$t("settings.notification_visibility_in_column")),1)]),_:1})]),o("li",null,[u(l,{path:"notificationNative.followRequest"},{default:v(()=>[$(d(e.$t("settings.notification_visibility_native_notifications")),1)]),_:1})])])]),o("li",null,[o("h4",null,d(e.$t("settings.notification_visibility_moves")),1),o("ul",Ku,[o("li",null,[u(l,{path:"notificationVisibility.moves"},{default:v(()=>[$(d(e.$t("settings.notification_visibility_in_column")),1)]),_:1})]),o("li",null,[u(l,{path:"notificationNative.moves"},{default:v(()=>[$(d(e.$t("settings.notification_visibility_native_notifications")),1)]),_:1})])])]),o("li",null,[o("h4",null,d(e.$t("settings.notification_visibility_polls")),1),o("ul",Xu,[o("li",null,[u(l,{path:"notificationVisibility.polls"},{default:v(()=>[$(d(e.$t("settings.notification_visibility_in_column")),1)]),_:1})]),o("li",null,[u(l,{path:"notificationNative.polls"},{default:v(()=>[$(d(e.$t("settings.notification_visibility_native_notifications")),1)]),_:1})])])]),e.canReceiveReports?(f(),w("li",Ju,[o("h4",null,d(e.$t("settings.notification_visibility_reports")),1),o("ul",Qu,[o("li",null,[u(l,{path:"notificationVisibility.reports"},{default:v(()=>[$(d(e.$t("settings.notification_visibility_in_column")),1)]),_:1})]),o("li",null,[u(l,{path:"notificationNative.reports"},{default:v(()=>[$(d(e.$t("settings.notification_visibility_native_notifications")),1)]),_:1})])])])):T("",!0)])]),o("li",null,[u(l,{path:"showExtraNotifications"},{default:v(()=>[$(d(e.$t("settings.notification_show_extra")),1)]),_:1})]),o("li",null,[o("ul",Zu,[o("li",null,[u(l,{path:"showChatsInExtraNotifications",disabled:!e.mergedConfig.showExtraNotifications},{default:v(()=>[$(d(e.$t("settings.notification_extra_chats")),1)]),_:1},8,["disabled"])]),o("li",null,[u(l,{path:"showAnnouncementsInExtraNotifications",disabled:!e.mergedConfig.showExtraNotifications},{default:v(()=>[$(d(e.$t("settings.notification_extra_announcements")),1)]),_:1},8,["disabled"])]),o("li",null,[u(l,{path:"showFollowRequestsInExtraNotifications",disabled:!e.mergedConfig.showExtraNotifications},{default:v(()=>[$(d(e.$t("settings.notification_extra_follow_requests")),1)]),_:1},8,["disabled"])]),o("li",null,[u(l,{path:"showExtraNotificationsTip",disabled:!e.mergedConfig.showExtraNotifications},{default:v(()=>[$(d(e.$t("settings.notification_extra_tip")),1)]),_:1},8,["disabled"])])])])])]),e.expertLevel>0?(f(),w("div",xu,[o("h2",null,d(e.$t("settings.notification_setting_privacy")),1),o("ul",ec,[o("li",null,[u(l,{path:"webPushNotifications",expert:"1"},{default:v(()=>[$(d(e.$t("settings.enable_web_push_notifications")),1)]),_:1}),o("ul",tc,[o("li",null,[u(l,{path:"webPushAlwaysShowNotifications",disabled:!e.mergedConfig.webPushNotifications},{default:v(()=>[$(d(e.$t("settings.enable_web_push_always_show")),1)]),_:1},8,["disabled"]),o("div",{class:Y({faint:!e.mergedConfig.webPushNotifications})},[o("small",null,d(e.$t("settings.enable_web_push_always_show_tip")),1)],2)])])]),o("li",null,[u(l,{source:"profile",path:"webPushHideContents",expert:"1"},{default:v(()=>[$(d(e.$t("settings.notification_setting_hide_notification_contents")),1)]),_:1})])])])):T("",!0),o("div",sc,[o("p",null,d(e.$t("settings.notification_mutes")),1),o("p",null,d(e.$t("settings.notification_blocks")),1)])],8,Uu)}const oc=J(Ou,[["render",nc]]),ac=["cm","mm","in","px","pt","pc","em","ex","ch","rem","vw","vh","vmin","vmax","%"],ic={...ze,components:{...ze.components,Select:et},props:{...ze.props,min:Number,units:{type:Array,default:()=>ac},unitSet:{type:String,default:"none"},step:{type:Number,default:1},resetDefault:{type:Object,default:null}},computed:{...ze.computed,stateUnit(){return typeof this.state=="string"?this.state.replace(/[0-9,.]+/,""):""},stateValue(){return typeof this.state=="string"?this.state.replace(/[^0-9,.]+/,""):""}},methods:{...ze.methods,getUnitString(e){return this.unitSet==="none"?e:this.$t(["settings","units",this.unitSet,e].join("."))},updateValue(e){this.configSink(this.path,parseFloat(e.target.value)+this.stateUnit)},updateUnit(e){let t=this.stateValue;const s=e.target.value;if(this.resetDefault){const n=this.resetDefault[s];n!=null&&(t=n)}this.configSink(this.path,t+s)}}},lc={key:0,class:"UnitSetting"},rc=["for"],dc={class:"no-break"},uc=["id","step","disabled","min","value"],cc=["value"];function pc(e,t,s,n,i,a){const l=L("Select"),r=L("ModifiedIndicator");return e.matchesExpertLevel?(f(),w("span",lc,[o("label",{for:e.path,class:"size-label"},[Ke(e.$slots,"default")],8,rc),t[1]||(t[1]=$(" "+d(" ")+" ")),o("span",dc,[o("input",{id:e.path,class:"input number-input",type:"number",step:e.step,disabled:e.disabled,min:e.min||0,value:e.stateValue,onChange:t[0]||(t[0]=(...p)=>e.updateValue&&e.updateValue(...p))},null,40,uc),u(l,{id:e.path,"model-value":e.stateUnit,disabled:e.disabled,class:"unit-input unstyled",onChange:e.updateUnit},{default:v(()=>[(f(!0),w(K,null,ne(e.units,p=>(f(),w("option",{key:p,value:p},d(e.getUnitString(p)),9,cc))),128))]),_:1},8,["id","model-value","disabled","onChange"])]),t[2]||(t[2]=$(" "+d(" ")+" ")),u(r,{changed:e.isChanged,onclick:e.reset},null,8,["changed","onclick"])])):T("",!0)}const On=J(ic,[["render",pc]]),hc={data(){return{muteWordsStringLocal:this.$store.getters.mergedConfig.muteWords.join(`
`),replyVisibilityOptions:["all","following","self"].map(e=>({key:e,value:e,label:this.$t(`settings.reply_visibility_${e}`)}))}},components:{BooleanSetting:Et,ChoiceSetting:En,UnitSetting:On,IntegerSetting:In},computed:{...It(),muteWordsString:{get(){return this.muteWordsStringLocal},set(e){this.muteWordsStringLocal=e,this.debouncedSetMuteWords(e)}},debouncedSetMuteWords(){return le.debounce(e=>{this.$store.dispatch("setOption",{name:"muteWords",value:le.filter(e.split(`
`),t=>le.trim(t).length>0)})},1e3)}},watch:{replyVisibility(){this.$store.dispatch("queueFlushAll")}}},mc=["label"],fc={class:"setting-item"},gc={class:"setting-list"},bc={class:"setting-list suboptions"},vc={key:0,class:"setting-item"},yc={class:"setting-list"};function wc(e,t,s,n,i,a){const l=L("BooleanSetting"),r=L("ChoiceSetting"),p=L("IntegerSetting"),c=L("UnitSetting");return f(),w("div",{label:e.$t("settings.filtering")},[o("div",fc,[o("h2",null,d(e.$t("settings.posts")),1),o("ul",gc,[o("li",null,[u(l,{path:"hideFilteredStatuses"},{default:v(()=>[$(d(e.$t("settings.hide_filtered_statuses")),1)]),_:1}),o("ul",bc,[o("li",null,[u(l,{"parent-path":"hideFilteredStatuses","parent-invert":!0,path:"hideWordFilteredPosts"},{default:v(()=>[$(d(e.$t("settings.hide_wordfiltered_statuses")),1)]),_:1})]),o("li",null,[e.user?(f(),H(l,{key:0,"parent-path":"hideFilteredStatuses","parent-invert":!0,path:"hideMutedThreads"},{default:v(()=>[$(d(e.$t("settings.hide_muted_threads")),1)]),_:1})):T("",!0)]),o("li",null,[e.user?(f(),H(l,{key:0,"parent-path":"hideFilteredStatuses","parent-invert":!0,path:"hideMutedPosts"},{default:v(()=>[$(d(e.$t("settings.hide_muted_posts")),1)]),_:1})):T("",!0)])])]),o("li",null,[u(l,{path:"muteBotStatuses"},{default:v(()=>[$(d(e.$t("settings.mute_bot_posts")),1)]),_:1})]),o("li",null,[u(l,{path:"muteSensitiveStatuses"},{default:v(()=>[$(d(e.$t("settings.mute_sensitive_posts")),1)]),_:1})]),o("li",null,[u(l,{path:"hidePostStats"},{default:v(()=>[$(d(e.$t("settings.hide_post_stats")),1)]),_:1})]),o("li",null,[u(l,{path:"hideBotIndication"},{default:v(()=>[$(d(e.$t("settings.hide_actor_type_indication")),1)]),_:1})]),e.user?(f(),H(r,{key:0,id:"replyVisibility",path:"replyVisibility",options:e.replyVisibilityOptions},{default:v(()=>[$(d(e.$t("settings.replies_in_timeline")),1)]),_:1},8,["options"])):T("",!0),o("li",null,[o("h3",null,d(e.$t("settings.wordfilter")),1),ee(o("textarea",{id:"muteWords","onUpdate:modelValue":t[0]||(t[0]=h=>e.muteWordsString=h),class:"input resize-height"},null,512),[[ue,e.muteWordsString]]),o("div",null,d(e.$t("settings.filtering_explanation")),1)]),o("h3",null,d(e.$t("settings.attachments")),1),o("li",null,[u(p,{path:"maxThumbnails",expert:"1",min:0},{default:v(()=>[$(d(e.$t("settings.max_thumbnails")),1)]),_:1})]),o("li",null,[u(l,{path:"hideAttachments"},{default:v(()=>[$(d(e.$t("settings.hide_attachments_in_tl")),1)]),_:1})]),o("li",null,[u(l,{path:"hideAttachmentsInConv"},{default:v(()=>[$(d(e.$t("settings.hide_attachments_in_convo")),1)]),_:1})]),o("li",null,[u(l,{path:"hideScrobbles"},{default:v(()=>[$(d(e.$t("settings.hide_scrobbles")),1)]),_:1})]),o("li",null,[u(c,{key:"hideScrobblesAfter",path:"hideScrobblesAfter",units:["m","h","d"],"unit-set":"time",expert:"1"},{default:v(()=>[$(d(e.$t("settings.hide_scrobbles_after")),1)]),_:1})])])]),e.expertLevel>0?(f(),w("div",vc,[o("h2",null,d(e.$t("settings.user_profiles")),1),o("ul",yc,[o("li",null,[u(l,{path:"hideUserStats"},{default:v(()=>[$(d(e.$t("settings.hide_user_stats")),1)]),_:1})])])])):T("",!0)],8,mc)}const $c=J(hc,[["render",wc]]),kc={props:{backupCodes:{type:Object,default:()=>({inProgress:!1,codes:[]})}},data:()=>({}),computed:{inProgress(){return this.backupCodes.inProgress},ready(){return this.backupCodes.codes.length>0},displayTitle(){return this.inProgress||this.ready}}},Cc={class:"mfa-backup-codes"},Tc={key:0},Vc={key:1},Sc={class:"alert warning"},Lc={class:"backup-codes"};function Pc(e,t,s,n,i,a){return f(),w("div",Cc,[e.displayTitle?(f(),w("h4",Tc,d(e.$t("settings.mfa.recovery_codes")),1)):T("",!0),e.inProgress?(f(),w("i",Vc,d(e.$t("settings.mfa.waiting_a_recovery_codes")),1)):T("",!0),e.ready?(f(),w(K,{key:2},[o("p",Sc,d(e.$t("settings.mfa.recovery_codes_warning")),1),o("ul",Lc,[(f(!0),w(K,null,ne(e.backupCodes.codes,l=>(f(),w("li",{key:l},d(l),1))),128))])],64)):T("",!0)])}const Ic=J(kc,[["render",Pc]]),Ec={props:["disabled"],data:()=>({}),methods:{confirm(){this.$emit("confirm")},cancel(){this.$emit("cancel")}}},_c=["disabled"],Ac=["disabled"];function Oc(e,t,s,n,i,a){return f(),w("div",null,[Ke(e.$slots,"default"),o("button",{class:"btn button-default",disabled:e.disabled,onClick:t[0]||(t[0]=(...l)=>e.confirm&&e.confirm(...l))},d(e.$t("general.confirm")),9,_c),o("button",{class:"btn button-default",disabled:e.disabled,onClick:t[1]||(t[1]=(...l)=>e.cancel&&e.cancel(...l))},d(e.$t("general.cancel")),9,Ac)])}const Ti=J(Ec,[["render",Oc]]),Uc={props:["settings"],data:()=>({error:!1,currentPassword:"",deactivate:!1,inProgress:!1}),components:{confirm:Ti},computed:{isActivated(){return this.settings.totp},...wn({backendInteractor:e=>e.api.backendInteractor})},methods:{doActivate(){this.$emit("activate")},cancelDeactivate(){this.deactivate=!1},doDeactivate(){this.error=null,this.deactivate=!0},confirmDeactivate(){this.error=null,this.inProgress=!0,this.backendInteractor.mfaDisableOTP({password:this.currentPassword}).then(e=>{if(this.inProgress=!1,e.error){this.error=e.error;return}this.deactivate=!1,this.$emit("deactivate")})}}},Mc={class:"method-item"},Bc=["disabled"],Rc={key:1,class:"alert error"};function Dc(e,t,s,n,i,a){const l=L("confirm");return f(),w("div",null,[o("div",Mc,[o("strong",null,d(e.$t("settings.mfa.otp")),1),e.isActivated?T("",!0):(f(),w("button",{key:0,class:"btn button-default",onClick:t[0]||(t[0]=(...r)=>e.doActivate&&e.doActivate(...r))},d(e.$t("general.enable")),1)),e.isActivated?(f(),w("button",{key:1,class:"btn button-default",disabled:e.deactivate,onClick:t[1]||(t[1]=(...r)=>e.doDeactivate&&e.doDeactivate(...r))},d(e.$t("general.disable")),9,Bc)):T("",!0)]),e.deactivate?(f(),H(l,{key:0,disabled:e.inProgress,onConfirm:e.confirmDeactivate,onCancel:e.cancelDeactivate},{default:v(()=>[$(d(e.$t("settings.enter_current_password_to_confirm"))+": ",1),ee(o("input",{"onUpdate:modelValue":t[2]||(t[2]=r=>e.currentPassword=r),type:"password",class:"input"},null,512),[[ue,e.currentPassword]])]),_:1},8,["disabled","onConfirm","onCancel"])):T("",!0),e.error?(f(),w("div",Rc,d(e.error),1)):T("",!0)])}const Nc=J(Uc,[["render",Dc]]);var it={},ns,Do;function Fc(){return Do||(Do=1,ns=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then}),ns}var os={},He={},No;function tt(){if(No)return He;No=1;let e;const t=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];return He.getSymbolSize=function(n){if(!n)throw new Error('"version" cannot be null or undefined');if(n<1||n>40)throw new Error('"version" should be in range from 1 to 40');return n*4+17},He.getSymbolTotalCodewords=function(n){return t[n]},He.getBCHDigit=function(s){let n=0;for(;s!==0;)n++,s>>>=1;return n},He.setToSJISFunction=function(n){if(typeof n!="function")throw new Error('"toSJISFunc" is not a valid function.');e=n},He.isKanjiModeEnabled=function(){return typeof e<"u"},He.toSJIS=function(n){return e(n)},He}var as={},Fo;function Un(){return Fo||(Fo=1,function(e){e.L={bit:1},e.M={bit:0},e.Q={bit:3},e.H={bit:2};function t(s){if(typeof s!="string")throw new Error("Param is not a string");switch(s.toLowerCase()){case"l":case"low":return e.L;case"m":case"medium":return e.M;case"q":case"quartile":return e.Q;case"h":case"high":return e.H;default:throw new Error("Unknown EC Level: "+s)}}e.isValid=function(n){return n&&typeof n.bit<"u"&&n.bit>=0&&n.bit<4},e.from=function(n,i){if(e.isValid(n))return n;try{return t(n)}catch{return i}}}(as)),as}var is,jo;function jc(){if(jo)return is;jo=1;function e(){this.buffer=[],this.length=0}return e.prototype={get:function(t){const s=Math.floor(t/8);return(this.buffer[s]>>>7-t%8&1)===1},put:function(t,s){for(let n=0;n<s;n++)this.putBit((t>>>s-n-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(t){const s=Math.floor(this.length/8);this.buffer.length<=s&&this.buffer.push(0),t&&(this.buffer[s]|=128>>>this.length%8),this.length++}},is=e,is}var ls,qo;function qc(){if(qo)return ls;qo=1;function e(t){if(!t||t<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=t,this.data=new Uint8Array(t*t),this.reservedBit=new Uint8Array(t*t)}return e.prototype.set=function(t,s,n,i){const a=t*this.size+s;this.data[a]=n,i&&(this.reservedBit[a]=!0)},e.prototype.get=function(t,s){return this.data[t*this.size+s]},e.prototype.xor=function(t,s,n){this.data[t*this.size+s]^=n},e.prototype.isReserved=function(t,s){return this.reservedBit[t*this.size+s]},ls=e,ls}var rs={},zo;function zc(){return zo||(zo=1,function(e){const t=tt().getSymbolSize;e.getRowColCoords=function(n){if(n===1)return[];const i=Math.floor(n/7)+2,a=t(n),l=a===145?26:Math.ceil((a-13)/(2*i-2))*2,r=[a-7];for(let p=1;p<i-1;p++)r[p]=r[p-1]-l;return r.push(6),r.reverse()},e.getPositions=function(n){const i=[],a=e.getRowColCoords(n),l=a.length;for(let r=0;r<l;r++)for(let p=0;p<l;p++)r===0&&p===0||r===0&&p===l-1||r===l-1&&p===0||i.push([a[r],a[p]]);return i}}(rs)),rs}var ds={},Ho;function Hc(){if(Ho)return ds;Ho=1;const e=tt().getSymbolSize,t=7;return ds.getPositions=function(n){const i=e(n);return[[0,0],[i-t,0],[0,i-t]]},ds}var us={},Wo;function Wc(){return Wo||(Wo=1,function(e){e.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const t={N1:3,N2:3,N3:40,N4:10};e.isValid=function(i){return i!=null&&i!==""&&!isNaN(i)&&i>=0&&i<=7},e.from=function(i){return e.isValid(i)?parseInt(i,10):void 0},e.getPenaltyN1=function(i){const a=i.size;let l=0,r=0,p=0,c=null,h=null;for(let m=0;m<a;m++){r=p=0,c=h=null;for(let g=0;g<a;g++){let k=i.get(m,g);k===c?r++:(r>=5&&(l+=t.N1+(r-5)),c=k,r=1),k=i.get(g,m),k===h?p++:(p>=5&&(l+=t.N1+(p-5)),h=k,p=1)}r>=5&&(l+=t.N1+(r-5)),p>=5&&(l+=t.N1+(p-5))}return l},e.getPenaltyN2=function(i){const a=i.size;let l=0;for(let r=0;r<a-1;r++)for(let p=0;p<a-1;p++){const c=i.get(r,p)+i.get(r,p+1)+i.get(r+1,p)+i.get(r+1,p+1);(c===4||c===0)&&l++}return l*t.N2},e.getPenaltyN3=function(i){const a=i.size;let l=0,r=0,p=0;for(let c=0;c<a;c++){r=p=0;for(let h=0;h<a;h++)r=r<<1&2047|i.get(c,h),h>=10&&(r===1488||r===93)&&l++,p=p<<1&2047|i.get(h,c),h>=10&&(p===1488||p===93)&&l++}return l*t.N3},e.getPenaltyN4=function(i){let a=0;const l=i.data.length;for(let p=0;p<l;p++)a+=i.data[p];return Math.abs(Math.ceil(a*100/l/5)-10)*t.N4};function s(n,i,a){switch(n){case e.Patterns.PATTERN000:return(i+a)%2===0;case e.Patterns.PATTERN001:return i%2===0;case e.Patterns.PATTERN010:return a%3===0;case e.Patterns.PATTERN011:return(i+a)%3===0;case e.Patterns.PATTERN100:return(Math.floor(i/2)+Math.floor(a/3))%2===0;case e.Patterns.PATTERN101:return i*a%2+i*a%3===0;case e.Patterns.PATTERN110:return(i*a%2+i*a%3)%2===0;case e.Patterns.PATTERN111:return(i*a%3+(i+a)%2)%2===0;default:throw new Error("bad maskPattern:"+n)}}e.applyMask=function(i,a){const l=a.size;for(let r=0;r<l;r++)for(let p=0;p<l;p++)a.isReserved(p,r)||a.xor(p,r,s(i,p,r))},e.getBestMask=function(i,a){const l=Object.keys(e.Patterns).length;let r=0,p=1/0;for(let c=0;c<l;c++){a(c),e.applyMask(c,i);const h=e.getPenaltyN1(i)+e.getPenaltyN2(i)+e.getPenaltyN3(i)+e.getPenaltyN4(i);e.applyMask(c,i),h<p&&(p=h,r=c)}return r}}(us)),us}var Nt={},Yo;function Vi(){if(Yo)return Nt;Yo=1;const e=Un(),t=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],s=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];return Nt.getBlocksCount=function(i,a){switch(a){case e.L:return t[(i-1)*4+0];case e.M:return t[(i-1)*4+1];case e.Q:return t[(i-1)*4+2];case e.H:return t[(i-1)*4+3];default:return}},Nt.getTotalCodewordsCount=function(i,a){switch(a){case e.L:return s[(i-1)*4+0];case e.M:return s[(i-1)*4+1];case e.Q:return s[(i-1)*4+2];case e.H:return s[(i-1)*4+3];default:return}},Nt}var cs={},bt={},Go;function Yc(){if(Go)return bt;Go=1;const e=new Uint8Array(512),t=new Uint8Array(256);return function(){let n=1;for(let i=0;i<255;i++)e[i]=n,t[n]=i,n<<=1,n&256&&(n^=285);for(let i=255;i<512;i++)e[i]=e[i-255]}(),bt.log=function(n){if(n<1)throw new Error("log("+n+")");return t[n]},bt.exp=function(n){return e[n]},bt.mul=function(n,i){return n===0||i===0?0:e[t[n]+t[i]]},bt}var Ko;function Gc(){return Ko||(Ko=1,function(e){const t=Yc();e.mul=function(n,i){const a=new Uint8Array(n.length+i.length-1);for(let l=0;l<n.length;l++)for(let r=0;r<i.length;r++)a[l+r]^=t.mul(n[l],i[r]);return a},e.mod=function(n,i){let a=new Uint8Array(n);for(;a.length-i.length>=0;){const l=a[0];for(let p=0;p<i.length;p++)a[p]^=t.mul(i[p],l);let r=0;for(;r<a.length&&a[r]===0;)r++;a=a.slice(r)}return a},e.generateECPolynomial=function(n){let i=new Uint8Array([1]);for(let a=0;a<n;a++)i=e.mul(i,new Uint8Array([1,t.exp(a)]));return i}}(cs)),cs}var ps,Xo;function Kc(){if(Xo)return ps;Xo=1;const e=Gc();function t(s){this.genPoly=void 0,this.degree=s,this.degree&&this.initialize(this.degree)}return t.prototype.initialize=function(n){this.degree=n,this.genPoly=e.generateECPolynomial(this.degree)},t.prototype.encode=function(n){if(!this.genPoly)throw new Error("Encoder not initialized");const i=new Uint8Array(n.length+this.degree);i.set(n);const a=e.mod(i,this.genPoly),l=this.degree-a.length;if(l>0){const r=new Uint8Array(this.degree);return r.set(a,l),r}return a},ps=t,ps}var hs={},ms={},fs={},Jo;function Si(){return Jo||(Jo=1,fs.isValid=function(t){return!isNaN(t)&&t>=1&&t<=40}),fs}var Re={},Qo;function Li(){if(Qo)return Re;Qo=1;const e="[0-9]+",t="[A-Z $%*+\\-./:]+";let s="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";s=s.replace(/u/g,"\\u");const n="(?:(?![A-Z0-9 $%*+\\-./:]|"+s+`)(?:.|[\r
]))+`;Re.KANJI=new RegExp(s,"g"),Re.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),Re.BYTE=new RegExp(n,"g"),Re.NUMERIC=new RegExp(e,"g"),Re.ALPHANUMERIC=new RegExp(t,"g");const i=new RegExp("^"+s+"$"),a=new RegExp("^"+e+"$"),l=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");return Re.testKanji=function(p){return i.test(p)},Re.testNumeric=function(p){return a.test(p)},Re.testAlphanumeric=function(p){return l.test(p)},Re}var Zo;function st(){return Zo||(Zo=1,function(e){const t=Si(),s=Li();e.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},e.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},e.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},e.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},e.MIXED={bit:-1},e.getCharCountIndicator=function(a,l){if(!a.ccBits)throw new Error("Invalid mode: "+a);if(!t.isValid(l))throw new Error("Invalid version: "+l);return l>=1&&l<10?a.ccBits[0]:l<27?a.ccBits[1]:a.ccBits[2]},e.getBestModeForData=function(a){return s.testNumeric(a)?e.NUMERIC:s.testAlphanumeric(a)?e.ALPHANUMERIC:s.testKanji(a)?e.KANJI:e.BYTE},e.toString=function(a){if(a&&a.id)return a.id;throw new Error("Invalid mode")},e.isValid=function(a){return a&&a.bit&&a.ccBits};function n(i){if(typeof i!="string")throw new Error("Param is not a string");switch(i.toLowerCase()){case"numeric":return e.NUMERIC;case"alphanumeric":return e.ALPHANUMERIC;case"kanji":return e.KANJI;case"byte":return e.BYTE;default:throw new Error("Unknown mode: "+i)}}e.from=function(a,l){if(e.isValid(a))return a;try{return n(a)}catch{return l}}}(ms)),ms}var xo;function Xc(){return xo||(xo=1,function(e){const t=tt(),s=Vi(),n=Un(),i=st(),a=Si(),l=7973,r=t.getBCHDigit(l);function p(g,k,V){for(let S=1;S<=40;S++)if(k<=e.getCapacity(S,V,g))return S}function c(g,k){return i.getCharCountIndicator(g,k)+4}function h(g,k){let V=0;return g.forEach(function(S){const C=c(S.mode,k);V+=C+S.getBitsLength()}),V}function m(g,k){for(let V=1;V<=40;V++)if(h(g,V)<=e.getCapacity(V,k,i.MIXED))return V}e.from=function(k,V){return a.isValid(k)?parseInt(k,10):V},e.getCapacity=function(k,V,S){if(!a.isValid(k))throw new Error("Invalid QR Code version");typeof S>"u"&&(S=i.BYTE);const C=t.getSymbolTotalCodewords(k),E=s.getTotalCodewordsCount(k,V),B=(C-E)*8;if(S===i.MIXED)return B;const M=B-c(S,k);switch(S){case i.NUMERIC:return Math.floor(M/10*3);case i.ALPHANUMERIC:return Math.floor(M/11*2);case i.KANJI:return Math.floor(M/13);case i.BYTE:default:return Math.floor(M/8)}},e.getBestVersionForData=function(k,V){let S;const C=n.from(V,n.M);if(Array.isArray(k)){if(k.length>1)return m(k,C);if(k.length===0)return 1;S=k[0]}else S=k;return p(S.mode,S.getLength(),C)},e.getEncodedBits=function(k){if(!a.isValid(k)||k<7)throw new Error("Invalid QR Code version");let V=k<<12;for(;t.getBCHDigit(V)-r>=0;)V^=l<<t.getBCHDigit(V)-r;return k<<12|V}}(hs)),hs}var gs={},ea;function Jc(){if(ea)return gs;ea=1;const e=tt(),t=1335,s=21522,n=e.getBCHDigit(t);return gs.getEncodedBits=function(a,l){const r=a.bit<<3|l;let p=r<<10;for(;e.getBCHDigit(p)-n>=0;)p^=t<<e.getBCHDigit(p)-n;return(r<<10|p)^s},gs}var bs={},vs,ta;function Qc(){if(ta)return vs;ta=1;const e=st();function t(s){this.mode=e.NUMERIC,this.data=s.toString()}return t.getBitsLength=function(n){return 10*Math.floor(n/3)+(n%3?n%3*3+1:0)},t.prototype.getLength=function(){return this.data.length},t.prototype.getBitsLength=function(){return t.getBitsLength(this.data.length)},t.prototype.write=function(n){let i,a,l;for(i=0;i+3<=this.data.length;i+=3)a=this.data.substr(i,3),l=parseInt(a,10),n.put(l,10);const r=this.data.length-i;r>0&&(a=this.data.substr(i),l=parseInt(a,10),n.put(l,r*3+1))},vs=t,vs}var ys,sa;function Zc(){if(sa)return ys;sa=1;const e=st(),t=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function s(n){this.mode=e.ALPHANUMERIC,this.data=n}return s.getBitsLength=function(i){return 11*Math.floor(i/2)+6*(i%2)},s.prototype.getLength=function(){return this.data.length},s.prototype.getBitsLength=function(){return s.getBitsLength(this.data.length)},s.prototype.write=function(i){let a;for(a=0;a+2<=this.data.length;a+=2){let l=t.indexOf(this.data[a])*45;l+=t.indexOf(this.data[a+1]),i.put(l,11)}this.data.length%2&&i.put(t.indexOf(this.data[a]),6)},ys=s,ys}var ws,na;function xc(){if(na)return ws;na=1;const e=st();function t(s){this.mode=e.BYTE,typeof s=="string"?this.data=new TextEncoder().encode(s):this.data=new Uint8Array(s)}return t.getBitsLength=function(n){return n*8},t.prototype.getLength=function(){return this.data.length},t.prototype.getBitsLength=function(){return t.getBitsLength(this.data.length)},t.prototype.write=function(s){for(let n=0,i=this.data.length;n<i;n++)s.put(this.data[n],8)},ws=t,ws}var $s,oa;function ep(){if(oa)return $s;oa=1;const e=st(),t=tt();function s(n){this.mode=e.KANJI,this.data=n}return s.getBitsLength=function(i){return i*13},s.prototype.getLength=function(){return this.data.length},s.prototype.getBitsLength=function(){return s.getBitsLength(this.data.length)},s.prototype.write=function(n){let i;for(i=0;i<this.data.length;i++){let a=t.toSJIS(this.data[i]);if(a>=33088&&a<=40956)a-=33088;else if(a>=57408&&a<=60351)a-=49472;else throw new Error("Invalid SJIS character: "+this.data[i]+`
Make sure your charset is UTF-8`);a=(a>>>8&255)*192+(a&255),n.put(a,13)}},$s=s,$s}var ks={exports:{}},aa;function tp(){return aa||(aa=1,function(e){var t={single_source_shortest_paths:function(s,n,i){var a={},l={};l[n]=0;var r=t.PriorityQueue.make();r.push(n,0);for(var p,c,h,m,g,k,V,S,C;!r.empty();){p=r.pop(),c=p.value,m=p.cost,g=s[c]||{};for(h in g)g.hasOwnProperty(h)&&(k=g[h],V=m+k,S=l[h],C=typeof l[h]>"u",(C||S>V)&&(l[h]=V,r.push(h,V),a[h]=c))}if(typeof i<"u"&&typeof l[i]>"u"){var E=["Could not find a path from ",n," to ",i,"."].join("");throw new Error(E)}return a},extract_shortest_path_from_predecessor_list:function(s,n){for(var i=[],a=n;a;)i.push(a),s[a],a=s[a];return i.reverse(),i},find_path:function(s,n,i){var a=t.single_source_shortest_paths(s,n,i);return t.extract_shortest_path_from_predecessor_list(a,i)},PriorityQueue:{make:function(s){var n=t.PriorityQueue,i={},a;s=s||{};for(a in n)n.hasOwnProperty(a)&&(i[a]=n[a]);return i.queue=[],i.sorter=s.sorter||n.default_sorter,i},default_sorter:function(s,n){return s.cost-n.cost},push:function(s,n){var i={value:s,cost:n};this.queue.push(i),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};e.exports=t}(ks)),ks.exports}var ia;function sp(){return ia||(ia=1,function(e){const t=st(),s=Qc(),n=Zc(),i=xc(),a=ep(),l=Li(),r=tt(),p=tp();function c(E){return unescape(encodeURIComponent(E)).length}function h(E,B,M){const R=[];let G;for(;(G=E.exec(M))!==null;)R.push({data:G[0],index:G.index,mode:B,length:G[0].length});return R}function m(E){const B=h(l.NUMERIC,t.NUMERIC,E),M=h(l.ALPHANUMERIC,t.ALPHANUMERIC,E);let R,G;return r.isKanjiModeEnabled()?(R=h(l.BYTE,t.BYTE,E),G=h(l.KANJI,t.KANJI,E)):(R=h(l.BYTE_KANJI,t.BYTE,E),G=[]),B.concat(M,R,G).sort(function(I,A){return I.index-A.index}).map(function(I){return{data:I.data,mode:I.mode,length:I.length}})}function g(E,B){switch(B){case t.NUMERIC:return s.getBitsLength(E);case t.ALPHANUMERIC:return n.getBitsLength(E);case t.KANJI:return a.getBitsLength(E);case t.BYTE:return i.getBitsLength(E)}}function k(E){return E.reduce(function(B,M){const R=B.length-1>=0?B[B.length-1]:null;return R&&R.mode===M.mode?(B[B.length-1].data+=M.data,B):(B.push(M),B)},[])}function V(E){const B=[];for(let M=0;M<E.length;M++){const R=E[M];switch(R.mode){case t.NUMERIC:B.push([R,{data:R.data,mode:t.ALPHANUMERIC,length:R.length},{data:R.data,mode:t.BYTE,length:R.length}]);break;case t.ALPHANUMERIC:B.push([R,{data:R.data,mode:t.BYTE,length:R.length}]);break;case t.KANJI:B.push([R,{data:R.data,mode:t.BYTE,length:c(R.data)}]);break;case t.BYTE:B.push([{data:R.data,mode:t.BYTE,length:c(R.data)}])}}return B}function S(E,B){const M={},R={start:{}};let G=["start"];for(let b=0;b<E.length;b++){const I=E[b],A=[];for(let O=0;O<I.length;O++){const U=I[O],F=""+b+O;A.push(F),M[F]={node:U,lastCount:0},R[F]={};for(let j=0;j<G.length;j++){const _=G[j];M[_]&&M[_].node.mode===U.mode?(R[_][F]=g(M[_].lastCount+U.length,U.mode)-g(M[_].lastCount,U.mode),M[_].lastCount+=U.length):(M[_]&&(M[_].lastCount=U.length),R[_][F]=g(U.length,U.mode)+4+t.getCharCountIndicator(U.mode,B))}}G=A}for(let b=0;b<G.length;b++)R[G[b]].end=0;return{map:R,table:M}}function C(E,B){let M;const R=t.getBestModeForData(E);if(M=t.from(B,R),M!==t.BYTE&&M.bit<R.bit)throw new Error('"'+E+'" cannot be encoded with mode '+t.toString(M)+`.
 Suggested mode is: `+t.toString(R));switch(M===t.KANJI&&!r.isKanjiModeEnabled()&&(M=t.BYTE),M){case t.NUMERIC:return new s(E);case t.ALPHANUMERIC:return new n(E);case t.KANJI:return new a(E);case t.BYTE:return new i(E)}}e.fromArray=function(B){return B.reduce(function(M,R){return typeof R=="string"?M.push(C(R,null)):R.data&&M.push(C(R.data,R.mode)),M},[])},e.fromString=function(B,M){const R=m(B,r.isKanjiModeEnabled()),G=V(R),b=S(G,M),I=p.find_path(b.map,"start","end"),A=[];for(let O=1;O<I.length-1;O++)A.push(b.table[I[O]].node);return e.fromArray(k(A))},e.rawSplit=function(B){return e.fromArray(m(B,r.isKanjiModeEnabled()))}}(bs)),bs}var la;function np(){if(la)return os;la=1;const e=tt(),t=Un(),s=jc(),n=qc(),i=zc(),a=Hc(),l=Wc(),r=Vi(),p=Kc(),c=Xc(),h=Jc(),m=st(),g=sp();function k(b,I){const A=b.size,O=a.getPositions(I);for(let U=0;U<O.length;U++){const F=O[U][0],j=O[U][1];for(let _=-1;_<=7;_++)if(!(F+_<=-1||A<=F+_))for(let N=-1;N<=7;N++)j+N<=-1||A<=j+N||(_>=0&&_<=6&&(N===0||N===6)||N>=0&&N<=6&&(_===0||_===6)||_>=2&&_<=4&&N>=2&&N<=4?b.set(F+_,j+N,!0,!0):b.set(F+_,j+N,!1,!0))}}function V(b){const I=b.size;for(let A=8;A<I-8;A++){const O=A%2===0;b.set(A,6,O,!0),b.set(6,A,O,!0)}}function S(b,I){const A=i.getPositions(I);for(let O=0;O<A.length;O++){const U=A[O][0],F=A[O][1];for(let j=-2;j<=2;j++)for(let _=-2;_<=2;_++)j===-2||j===2||_===-2||_===2||j===0&&_===0?b.set(U+j,F+_,!0,!0):b.set(U+j,F+_,!1,!0)}}function C(b,I){const A=b.size,O=c.getEncodedBits(I);let U,F,j;for(let _=0;_<18;_++)U=Math.floor(_/3),F=_%3+A-8-3,j=(O>>_&1)===1,b.set(U,F,j,!0),b.set(F,U,j,!0)}function E(b,I,A){const O=b.size,U=h.getEncodedBits(I,A);let F,j;for(F=0;F<15;F++)j=(U>>F&1)===1,F<6?b.set(F,8,j,!0):F<8?b.set(F+1,8,j,!0):b.set(O-15+F,8,j,!0),F<8?b.set(8,O-F-1,j,!0):F<9?b.set(8,15-F-1+1,j,!0):b.set(8,15-F-1,j,!0);b.set(O-8,8,1,!0)}function B(b,I){const A=b.size;let O=-1,U=A-1,F=7,j=0;for(let _=A-1;_>0;_-=2)for(_===6&&_--;;){for(let N=0;N<2;N++)if(!b.isReserved(U,_-N)){let Z=!1;j<I.length&&(Z=(I[j]>>>F&1)===1),b.set(U,_-N,Z),F--,F===-1&&(j++,F=7)}if(U+=O,U<0||A<=U){U-=O,O=-O;break}}}function M(b,I,A){const O=new s;A.forEach(function(N){O.put(N.mode.bit,4),O.put(N.getLength(),m.getCharCountIndicator(N.mode,b)),N.write(O)});const U=e.getSymbolTotalCodewords(b),F=r.getTotalCodewordsCount(b,I),j=(U-F)*8;for(O.getLengthInBits()+4<=j&&O.put(0,4);O.getLengthInBits()%8!==0;)O.putBit(0);const _=(j-O.getLengthInBits())/8;for(let N=0;N<_;N++)O.put(N%2?17:236,8);return R(O,b,I)}function R(b,I,A){const O=e.getSymbolTotalCodewords(I),U=r.getTotalCodewordsCount(I,A),F=O-U,j=r.getBlocksCount(I,A),_=O%j,N=j-_,Z=Math.floor(O/j),de=Math.floor(F/j),Le=de+1,me=Z-de,Oe=new p(me);let Pe=0;const ke=new Array(j),Ce=new Array(j);let Ie=0;const Fe=new Uint8Array(b.buffer);for(let Te=0;Te<j;Te++){const be=Te<N?de:Le;ke[Te]=Fe.slice(Pe,Pe+be),Ce[Te]=Oe.encode(ke[Te]),Pe+=be,Ie=Math.max(Ie,be)}const Ue=new Uint8Array(O);let Ee=0,fe,pe;for(fe=0;fe<Ie;fe++)for(pe=0;pe<j;pe++)fe<ke[pe].length&&(Ue[Ee++]=ke[pe][fe]);for(fe=0;fe<me;fe++)for(pe=0;pe<j;pe++)Ue[Ee++]=Ce[pe][fe];return Ue}function G(b,I,A,O){let U;if(Array.isArray(b))U=g.fromArray(b);else if(typeof b=="string"){let Z=I;if(!Z){const de=g.rawSplit(b);Z=c.getBestVersionForData(de,A)}U=g.fromString(b,Z||40)}else throw new Error("Invalid data");const F=c.getBestVersionForData(U,A);if(!F)throw new Error("The amount of data is too big to be stored in a QR Code");if(!I)I=F;else if(I<F)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+F+`.
`);const j=M(I,A,U),_=e.getSymbolSize(I),N=new n(_);return k(N,I),V(N),S(N,I),E(N,A,0),I>=7&&C(N,I),B(N,j),isNaN(O)&&(O=l.getBestMask(N,E.bind(null,N,A))),l.applyMask(O,N),E(N,A,O),{modules:N,version:I,errorCorrectionLevel:A,maskPattern:O,segments:U}}return os.create=function(I,A){if(typeof I>"u"||I==="")throw new Error("No input text");let O=t.M,U,F;return typeof A<"u"&&(O=t.from(A.errorCorrectionLevel,t.M),U=c.from(A.version),F=l.from(A.maskPattern),A.toSJISFunc&&e.setToSJISFunction(A.toSJISFunc)),G(I,U,O,F)},os}var Cs={},Ts={},ra;function Pi(){return ra||(ra=1,function(e){function t(s){if(typeof s=="number"&&(s=s.toString()),typeof s!="string")throw new Error("Color should be defined as hex string");let n=s.slice().replace("#","").split("");if(n.length<3||n.length===5||n.length>8)throw new Error("Invalid hex color: "+s);(n.length===3||n.length===4)&&(n=Array.prototype.concat.apply([],n.map(function(a){return[a,a]}))),n.length===6&&n.push("F","F");const i=parseInt(n.join(""),16);return{r:i>>24&255,g:i>>16&255,b:i>>8&255,a:i&255,hex:"#"+n.slice(0,6).join("")}}e.getOptions=function(n){n||(n={}),n.color||(n.color={});const i=typeof n.margin>"u"||n.margin===null||n.margin<0?4:n.margin,a=n.width&&n.width>=21?n.width:void 0,l=n.scale||4;return{width:a,scale:a?4:l,margin:i,color:{dark:t(n.color.dark||"#000000ff"),light:t(n.color.light||"#ffffffff")},type:n.type,rendererOpts:n.rendererOpts||{}}},e.getScale=function(n,i){return i.width&&i.width>=n+i.margin*2?i.width/(n+i.margin*2):i.scale},e.getImageWidth=function(n,i){const a=e.getScale(n,i);return Math.floor((n+i.margin*2)*a)},e.qrToImageData=function(n,i,a){const l=i.modules.size,r=i.modules.data,p=e.getScale(l,a),c=Math.floor((l+a.margin*2)*p),h=a.margin*p,m=[a.color.light,a.color.dark];for(let g=0;g<c;g++)for(let k=0;k<c;k++){let V=(g*c+k)*4,S=a.color.light;if(g>=h&&k>=h&&g<c-h&&k<c-h){const C=Math.floor((g-h)/p),E=Math.floor((k-h)/p);S=m[r[C*l+E]?1:0]}n[V++]=S.r,n[V++]=S.g,n[V++]=S.b,n[V]=S.a}}}(Ts)),Ts}var da;function op(){return da||(da=1,function(e){const t=Pi();function s(i,a,l){i.clearRect(0,0,a.width,a.height),a.style||(a.style={}),a.height=l,a.width=l,a.style.height=l+"px",a.style.width=l+"px"}function n(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}e.render=function(a,l,r){let p=r,c=l;typeof p>"u"&&(!l||!l.getContext)&&(p=l,l=void 0),l||(c=n()),p=t.getOptions(p);const h=t.getImageWidth(a.modules.size,p),m=c.getContext("2d"),g=m.createImageData(h,h);return t.qrToImageData(g.data,a,p),s(m,c,h),m.putImageData(g,0,0),c},e.renderToDataURL=function(a,l,r){let p=r;typeof p>"u"&&(!l||!l.getContext)&&(p=l,l=void 0),p||(p={});const c=e.render(a,l,p),h=p.type||"image/png",m=p.rendererOpts||{};return c.toDataURL(h,m.quality)}}(Cs)),Cs}var Vs={},ua;function ap(){if(ua)return Vs;ua=1;const e=Pi();function t(i,a){const l=i.a/255,r=a+'="'+i.hex+'"';return l<1?r+" "+a+'-opacity="'+l.toFixed(2).slice(1)+'"':r}function s(i,a,l){let r=i+a;return typeof l<"u"&&(r+=" "+l),r}function n(i,a,l){let r="",p=0,c=!1,h=0;for(let m=0;m<i.length;m++){const g=Math.floor(m%a),k=Math.floor(m/a);!g&&!c&&(c=!0),i[m]?(h++,m>0&&g>0&&i[m-1]||(r+=c?s("M",g+l,.5+k+l):s("m",p,0),p=0,c=!1),g+1<a&&i[m+1]||(r+=s("h",h),h=0)):p++}return r}return Vs.render=function(a,l,r){const p=e.getOptions(l),c=a.modules.size,h=a.modules.data,m=c+p.margin*2,g=p.color.light.a?"<path "+t(p.color.light,"fill")+' d="M0 0h'+m+"v"+m+'H0z"/>':"",k="<path "+t(p.color.dark,"stroke")+' d="'+n(h,c,p.margin)+'"/>',V='viewBox="0 0 '+m+" "+m+'"',C='<svg xmlns="http://www.w3.org/2000/svg" '+(p.width?'width="'+p.width+'" height="'+p.width+'" ':"")+V+' shape-rendering="crispEdges">'+g+k+`</svg>
`;return typeof r=="function"&&r(null,C),C},Vs}var ca;function ip(){if(ca)return it;ca=1;const e=Fc(),t=np(),s=op(),n=ap();function i(a,l,r,p,c){const h=[].slice.call(arguments,1),m=h.length,g=typeof h[m-1]=="function";if(!g&&!e())throw new Error("Callback required as last argument");if(g){if(m<2)throw new Error("Too few arguments provided");m===2?(c=r,r=l,l=p=void 0):m===3&&(l.getContext&&typeof c>"u"?(c=p,p=void 0):(c=p,p=r,r=l,l=void 0))}else{if(m<1)throw new Error("Too few arguments provided");return m===1?(r=l,l=p=void 0):m===2&&!l.getContext&&(p=r,r=l,l=void 0),new Promise(function(k,V){try{const S=t.create(r,p);k(a(S,l,p))}catch(S){V(S)}})}try{const k=t.create(r,p);c(null,a(k,l,p))}catch(k){c(k)}}return it.create=t.create,it.toCanvas=i.bind(null,s.render),it.toDataURL=i.bind(null,s.renderToDataURL),it.toString=i.bind(null,function(a,l,r){return n.render(a,r)}),it}var Ss=ip();/*! vue-qrcode v2.0.0 | (c) 2018-present Chen Fengyuan | MIT */const pa="ready";var lp=cl({name:"VueQrcode",props:{value:{type:String,default:void 0},options:{type:Object,default:void 0},tag:{type:String,default:"canvas"}},emits:[pa],watch:{$props:{deep:!0,immediate:!0,handler(){this.$el&&this.generate()}}},mounted(){this.generate()},methods:{generate(){const e=this.options||{},t=String(this.value),s=()=>{this.$emit(pa,this.$el)};switch(this.tag){case"canvas":Ss.toCanvas(this.$el,t,e,n=>{if(n)throw n;s()});break;case"img":Ss.toDataURL(t,e,(n,i)=>{if(n)throw n;this.$el.src=i,this.$el.onload=s});break;case"svg":Ss.toString(t,e,(n,i)=>{if(n)throw n;const a=document.createElement("div");a.innerHTML=i;const l=a.querySelector("svg");if(l){const{attributes:r,childNodes:p}=l;Object.keys(r).forEach(c=>{const h=r[Number(c)];this.$el.setAttribute(h.name,h.value)}),Object.keys(p).forEach(c=>{const h=p[Number(c)];this.$el.appendChild(h.cloneNode(!0))}),s()}});break}}},render(){return pl(this.tag,this.$slots.default)}});const rp={data:()=>({settings:{available:!1,enabled:!1,totp:!1},setupState:{state:"",setupOTPState:""},backupCodes:{getNewCodes:!1,inProgress:!1,codes:[]},otpSettings:{provisioning_uri:"",key:""},currentPassword:null,otpConfirmToken:null,error:null,readyInit:!1}),components:{"recovery-codes":Ic,"totp-item":Nc,qrcode:lp,confirm:Ti},computed:{canSetupOTP(){return(this.setupInProgress&&this.backupCodesPrepared||this.settings.enabled)&&!this.settings.totp&&!this.setupOTPInProgress},setupInProgress(){return this.setupState.state!==""&&this.setupState.state!=="complete"},setupOTPInProgress(){return this.setupState.state==="setupOTP"&&!this.completedOTP},prepareOTP(){return this.setupState.setupOTPState==="prepare"},confirmOTP(){return this.setupState.setupOTPState==="confirm"},completedOTP(){return this.setupState.setupOTPState==="completed"},backupCodesPrepared(){return!this.backupCodes.inProgress&&this.backupCodes.codes.length>0},confirmNewBackupCodes(){return this.backupCodes.getNewCodes},...wn({backendInteractor:e=>e.api.backendInteractor})},methods:{activateOTP(){this.settings.enabled||(this.setupState.state="getBackupcodes",this.fetchBackupCodes())},fetchBackupCodes(){return this.backupCodes.inProgress=!0,this.backupCodes.codes=[],this.backendInteractor.generateMfaBackupCodes().then(e=>{this.backupCodes.codes=e.codes,this.backupCodes.inProgress=!1})},getBackupCodes(){this.backupCodes.getNewCodes=!0},confirmBackupCodes(){this.fetchBackupCodes().then(()=>{this.backupCodes.getNewCodes=!1})},cancelBackupCodes(){this.backupCodes.getNewCodes=!1},setupOTP(){this.setupState.state="setupOTP",this.setupState.setupOTPState="prepare",this.backendInteractor.mfaSetupOTP().then(e=>{this.otpSettings=e,this.setupState.setupOTPState="confirm"})},doConfirmOTP(){this.error=null,this.backendInteractor.mfaConfirmOTP({token:this.otpConfirmToken,password:this.currentPassword}).then(e=>{if(e.error){this.error=e.error;return}this.completeSetup()})},completeSetup(){this.setupState.setupOTPState="complete",this.setupState.state="complete",this.currentPassword=null,this.error=null,this.fetchSettings()},cancelSetup(){this.setupState.setupOTPState="",this.setupState.state="",this.currentPassword=null,this.error=null},async fetchSettings(){const e=await this.backendInteractor.settingsMFA();if(!e.error)return this.settings=e.settings,this.settings.available=!0,e}},mounted(){this.fetchSettings().then(()=>{this.readyInit=!0})}},dp={key:0,class:"setting-item mfa-settings"},up={class:"mfa-heading"},cp={key:0,class:"setting-item"},pp={key:0},hp={key:2},mp={class:"warning"},fp={key:1},gp={key:0},bp={key:1},vp={class:"setup-otp"},yp={class:"qr-code"},wp={class:"verify"},$p={class:"confirm-otp-actions"},kp={key:0,class:"alert error"};function Cp(e,t,s,n,i,a){const l=L("totp-item"),r=L("recovery-codes"),p=L("confirm"),c=L("qrcode");return e.readyInit&&e.settings.available?(f(),w("div",dp,[o("div",up,[o("h2",null,d(e.$t("settings.mfa.title")),1)]),o("div",null,[e.setupInProgress?T("",!0):(f(),w("div",cp,[o("h3",null,d(e.$t("settings.mfa.authentication_methods")),1),u(l,{settings:e.settings,onDeactivate:e.fetchSettings,onActivate:e.activateOTP},null,8,["settings","onDeactivate","onActivate"]),t[7]||(t[7]=o("br",null,null,-1)),e.settings.enabled?(f(),w("div",pp,[e.confirmNewBackupCodes?T("",!0):(f(),H(r,{key:0,"backup-codes":e.backupCodes},null,8,["backup-codes"])),e.confirmNewBackupCodes?T("",!0):(f(),w("button",{key:1,class:"btn button-default",onClick:t[0]||(t[0]=(...h)=>e.getBackupCodes&&e.getBackupCodes(...h))},d(e.$t("settings.mfa.generate_new_recovery_codes")),1)),e.confirmNewBackupCodes?(f(),w("div",hp,[u(p,{disabled:e.backupCodes.inProgress,onConfirm:e.confirmBackupCodes,onCancel:e.cancelBackupCodes},{default:v(()=>[o("p",mp,d(e.$t("settings.mfa.warning_of_generate_new_codes")),1)]),_:1},8,["disabled","onConfirm","onCancel"])])):T("",!0)])):T("",!0)])),e.setupInProgress?(f(),w("div",fp,[o("h3",null,d(e.$t("settings.mfa.setup_otp")),1),e.setupOTPInProgress?T("",!0):(f(),H(r,{key:0,"backup-codes":e.backupCodes},null,8,["backup-codes"])),e.canSetupOTP?(f(),w("button",{key:1,class:"btn button-default",onClick:t[1]||(t[1]=(...h)=>e.cancelSetup&&e.cancelSetup(...h))},d(e.$t("general.cancel")),1)):T("",!0),e.canSetupOTP?(f(),w("button",{key:2,class:"btn button-default",onClick:t[2]||(t[2]=(...h)=>e.setupOTP&&e.setupOTP(...h))},d(e.$t("settings.mfa.setup_otp")),1)):T("",!0),e.setupOTPInProgress?(f(),w(K,{key:3},[e.prepareOTP?(f(),w("i",gp,d(e.$t("settings.mfa.wait_pre_setup_otp")),1)):T("",!0),e.confirmOTP?(f(),w("div",bp,[o("div",vp,[o("div",yp,[o("h4",null,d(e.$t("settings.mfa.scan.title")),1),o("p",null,d(e.$t("settings.mfa.scan.desc")),1),u(c,{value:e.otpSettings.provisioning_uri,options:{width:200}},null,8,["value"]),o("p",null,d(e.$t("settings.mfa.scan.secret_code"))+": "+d(e.otpSettings.key),1)]),o("div",wp,[o("h4",null,d(e.$t("general.verify")),1),o("p",null,d(e.$t("settings.mfa.verify.desc")),1),ee(o("input",{"onUpdate:modelValue":t[3]||(t[3]=h=>e.otpConfirmToken=h),type:"text",class:"input"},null,512),[[ue,e.otpConfirmToken]]),o("p",null,d(e.$t("settings.enter_current_password_to_confirm"))+":",1),ee(o("input",{"onUpdate:modelValue":t[4]||(t[4]=h=>e.currentPassword=h),type:"password",class:"input"},null,512),[[ue,e.currentPassword]]),o("div",$p,[o("button",{class:"btn button-default",onClick:t[5]||(t[5]=(...h)=>e.doConfirmOTP&&e.doConfirmOTP(...h))},d(e.$t("settings.mfa.confirm_and_enable")),1),o("button",{class:"btn button-default",onClick:t[6]||(t[6]=(...h)=>e.cancelSetup&&e.cancelSetup(...h))},d(e.$t("general.cancel")),1)]),e.error?(f(),w("div",kp,d(e.error),1)):T("",!0)])])])):T("",!0)],64)):T("",!0)])):T("",!0)])])):T("",!0)}const Tp=J(rp,[["render",Cp]]),Vp={data(){return{newEmail:"",changeEmailError:!1,changeEmailPassword:"",changedEmail:!1,deletingAccount:!1,deleteAccountConfirmPasswordInput:"",deleteAccountError:!1,changePasswordInputs:["","",""],changedPassword:!1,changePasswordError:!1,moveAccountTarget:"",moveAccountPassword:"",movedAccount:!1,moveAccountError:!1,aliases:[],listAliasesError:!1,addAliasTarget:"",addedAlias:!1,addAliasError:!1}},created(){this.$store.dispatch("fetchTokens"),this.fetchAliases()},components:{ProgressButton:Kt,Mfa:Tp,Checkbox:$e},computed:{user(){return this.$store.state.users.currentUser},pleromaBackend(){return this.$store.state.instance.pleromaBackend},oauthTokens(){return this.$store.state.oauthTokens.tokens.map(e=>({id:e.id,appName:e.app_name,validUntil:new Date(e.valid_until).toLocaleDateString(ui.internalToBrowserLocale(this.$i18n.locale))}))}},methods:{confirmDelete(){this.deletingAccount=!0},deleteAccount(){this.$store.state.api.backendInteractor.deleteAccount({password:this.deleteAccountConfirmPasswordInput}).then(e=>{e.status==="success"?(this.$store.dispatch("logout"),this.$router.push({name:"root"})):this.deleteAccountError=e.error})},changePassword(){const e={password:this.changePasswordInputs[0],newPassword:this.changePasswordInputs[1],newPasswordConfirmation:this.changePasswordInputs[2]};this.$store.state.api.backendInteractor.changePassword(e).then(t=>{t.status==="success"?(this.changedPassword=!0,this.changePasswordError=!1,this.logout()):(this.changedPassword=!1,this.changePasswordError=t.error)})},changeEmail(){const e={email:this.newEmail,password:this.changeEmailPassword};this.$store.state.api.backendInteractor.changeEmail(e).then(t=>{t.status==="success"?(this.changedEmail=!0,this.changeEmailError=!1):(this.changedEmail=!1,this.changeEmailError=t.error)})},moveAccount(){const e={targetAccount:this.moveAccountTarget,password:this.moveAccountPassword};this.$store.state.api.backendInteractor.moveAccount(e).then(t=>{t.status==="success"?(this.movedAccount=!0,this.moveAccountError=!1):(this.movedAccount=!1,this.moveAccountError=t.error)})},removeAlias(e){this.$store.state.api.backendInteractor.deleteAlias({alias:e}).then(()=>this.fetchAliases())},addAlias(){this.$store.state.api.backendInteractor.addAlias({alias:this.addAliasTarget}).then(()=>{this.addedAlias=!0,this.addAliasError=!1,this.addAliasTarget=""}).catch(e=>{this.addedAlias=!1,this.addAliasError=e}).then(()=>this.fetchAliases())},fetchAliases(){this.$store.state.api.backendInteractor.listAliases().then(e=>{this.aliases=e.aliases,this.listAliasesError=!1}).catch(e=>{this.listAliasesError=e.error})},logout(){this.$store.dispatch("logout"),this.$router.replace("/")},revokeToken(e){window.confirm(`${this.$i18n.t("settings.revoke_token")}?`)&&this.$store.dispatch("revokeToken",e)}}},Sp=["label"],Lp={class:"setting-item"},Pp={key:0},Ip={class:"setting-item"},Ep={key:0},_p={key:1},Ap={key:2},Op={class:"setting-item"},Up={class:"oauth-tokens"},Mp={class:"actions"},Bp=["onClick"],Rp={class:"setting-item"},Dp={class:"actions"},Np=["onClick"],Fp={key:0,class:"alert error"},jp={key:1},qp={key:2},zp={class:"setting-item"},Hp={key:0},Wp={key:1},Yp={class:"setting-item"},Gp={key:0},Kp={key:1},Xp={key:2},Jp={key:3};function Qp(e,t,s,n,i,a){const l=L("mfa"),r=L("FAIcon"),p=L("i18n-t");return f(),w("div",{label:e.$t("settings.security_tab")},[o("div",Lp,[o("h2",null,d(e.$t("settings.change_email")),1),o("div",null,[o("p",null,d(e.$t("settings.new_email")),1),ee(o("input",{"onUpdate:modelValue":t[0]||(t[0]=c=>e.newEmail=c),type:"email",autocomplete:"email",class:"input"},null,512),[[ue,e.newEmail]])]),o("div",null,[o("p",null,d(e.$t("settings.current_password")),1),ee(o("input",{"onUpdate:modelValue":t[1]||(t[1]=c=>e.changeEmailPassword=c),type:"password",autocomplete:"current-password",class:"input"},null,512),[[ue,e.changeEmailPassword]])]),o("button",{class:"btn button-default",onClick:t[2]||(t[2]=(...c)=>e.changeEmail&&e.changeEmail(...c))},d(e.$t("settings.save")),1),e.changedEmail?(f(),w("p",Pp,d(e.$t("settings.changed_email")),1)):T("",!0),e.changeEmailError!==!1?(f(),w(K,{key:1},[o("p",null,d(e.$t("settings.change_email_error")),1),o("p",null,d(e.changeEmailError),1)],64)):T("",!0)]),o("div",Ip,[o("h2",null,d(e.$t("settings.change_password")),1),o("div",null,[o("p",null,d(e.$t("settings.current_password")),1),ee(o("input",{"onUpdate:modelValue":t[3]||(t[3]=c=>e.changePasswordInputs[0]=c),type:"password",class:"input"},null,512),[[ue,e.changePasswordInputs[0]]])]),o("div",null,[o("p",null,d(e.$t("settings.new_password")),1),ee(o("input",{"onUpdate:modelValue":t[4]||(t[4]=c=>e.changePasswordInputs[1]=c),type:"password",class:"input"},null,512),[[ue,e.changePasswordInputs[1]]])]),o("div",null,[o("p",null,d(e.$t("settings.confirm_new_password")),1),ee(o("input",{"onUpdate:modelValue":t[5]||(t[5]=c=>e.changePasswordInputs[2]=c),type:"password",class:"input"},null,512),[[ue,e.changePasswordInputs[2]]])]),o("button",{class:"btn button-default",onClick:t[6]||(t[6]=(...c)=>e.changePassword&&e.changePassword(...c))},d(e.$t("settings.save")),1),e.changedPassword?(f(),w("p",Ep,d(e.$t("settings.changed_password")),1)):e.changePasswordError!==!1?(f(),w("p",_p,d(e.$t("settings.change_password_error")),1)):T("",!0),e.changePasswordError?(f(),w("p",Ap,d(e.changePasswordError),1)):T("",!0)]),o("div",Op,[o("h2",null,d(e.$t("settings.oauth_tokens")),1),o("table",Up,[o("thead",null,[o("tr",null,[o("th",null,d(e.$t("settings.app_name")),1),o("th",null,d(e.$t("settings.valid_until")),1),t[16]||(t[16]=o("th",null,null,-1))])]),o("tbody",null,[(f(!0),w(K,null,ne(e.oauthTokens,c=>(f(),w("tr",{key:c.id},[o("td",null,d(c.appName),1),o("td",null,d(c.validUntil),1),o("td",Mp,[o("button",{class:"btn button-default",onClick:h=>e.revokeToken(c.id)},d(e.$t("settings.revoke_token")),9,Bp)])]))),128))])])]),u(l),o("div",Rp,[o("h2",null,d(e.$t("settings.account_alias")),1),o("table",null,[o("thead",null,[o("tr",null,[o("th",null,d(e.$t("settings.account_alias_table_head")),1),t[17]||(t[17]=o("th",null,null,-1))])]),o("tbody",null,[(f(!0),w(K,null,ne(e.aliases,c=>(f(),w("tr",{key:c},[o("td",null,d(c),1),o("td",Dp,[o("button",{class:"btn button-default",onClick:h=>e.removeAlias(c)},d(e.$t("settings.remove_alias")),9,Np)])]))),128))])]),e.listAliasesError?(f(),w("div",Fp,[$(d(e.$t("settings.list_aliases_error",{error:e.error}))+" ",1),u(r,{class:"fa-scale-110 fa-old-padding",icon:"times",title:e.$t("settings.hide_list_aliases_error_action"),onClick:t[7]||(t[7]=c=>e.listAliasesError=!1)},null,8,["title"])])):T("",!0),o("div",null,[u(p,{scope:"global",keypath:"settings.new_alias_target",tag:"p"},{default:v(()=>t[18]||(t[18]=[o("code",{place:"example"}," foo@example.org ",-1)])),_:1}),ee(o("input",{"onUpdate:modelValue":t[8]||(t[8]=c=>e.addAliasTarget=c),class:"input"},null,512),[[ue,e.addAliasTarget]])]),o("button",{class:"btn button-default",onClick:t[9]||(t[9]=(...c)=>e.addAlias&&e.addAlias(...c))},d(e.$t("settings.save")),1),e.addedAlias?(f(),w("p",jp,d(e.$t("settings.added_alias")),1)):T("",!0),e.addAliasError!==!1?(f(),w("p",qp,d(e.$t("settings.add_alias_error",{error:e.addAliasError})),1)):T("",!0)]),o("div",zp,[o("h2",null,d(e.$t("settings.move_account")),1),o("p",null,d(e.$t("settings.move_account_notes")),1),o("div",null,[u(p,{keypath:"settings.move_account_target",tag:"p",scope:"global"},{example:v(()=>t[19]||(t[19]=[o("code",null," foo@example.org ",-1)])),_:1}),ee(o("input",{"onUpdate:modelValue":t[10]||(t[10]=c=>e.moveAccountTarget=c),class:"input"},null,512),[[ue,e.moveAccountTarget]])]),o("div",null,[o("p",null,d(e.$t("settings.current_password")),1),ee(o("input",{"onUpdate:modelValue":t[11]||(t[11]=c=>e.moveAccountPassword=c),type:"password",autocomplete:"current-password",class:"input"},null,512),[[ue,e.moveAccountPassword]])]),o("button",{class:"btn button-default",onClick:t[12]||(t[12]=(...c)=>e.moveAccount&&e.moveAccount(...c))},d(e.$t("settings.save")),1),e.movedAccount?(f(),w("p",Hp,d(e.$t("settings.moved_account")),1)):T("",!0),e.moveAccountError!==!1?(f(),w("p",Wp,d(e.$t("settings.move_account_error",{error:e.moveAccountError})),1)):T("",!0)]),o("div",Yp,[o("h2",null,d(e.$t("settings.delete_account")),1),e.deletingAccount?T("",!0):(f(),w("p",Gp,d(e.$t("settings.delete_account_description")),1)),e.deletingAccount?(f(),w("div",Kp,[o("p",null,d(e.$t("settings.delete_account_instructions")),1),o("p",null,d(e.$t("login.password")),1),ee(o("input",{"onUpdate:modelValue":t[13]||(t[13]=c=>e.deleteAccountConfirmPasswordInput=c),type:"password",class:"input"},null,512),[[ue,e.deleteAccountConfirmPasswordInput]]),o("button",{class:"btn button-default",onClick:t[14]||(t[14]=(...c)=>e.deleteAccount&&e.deleteAccount(...c))},d(e.$t("settings.delete_account")),1)])):T("",!0),e.deleteAccountError!==!1?(f(),w("p",Xp,d(e.$t("settings.delete_account_error")),1)):T("",!0),e.deleteAccountError?(f(),w("p",Jp,d(e.deleteAccountError),1)):T("",!0),e.deletingAccount?T("",!0):(f(),w("button",{key:4,class:"btn button-default",onClick:t[15]||(t[15]=(...c)=>e.confirmDelete&&e.confirmDelete(...c))},d(e.$t("settings.delete_account")),1))])],8,Sp)}const Zp=J(Vp,[["render",Qp]]);var Ls,ha;function xp(){if(ha)return Ls;ha=1;function e(t){return function(s){return t==null?void 0:t[s]}}return Ls=e,Ls}var Ps,ma;function eh(){if(ma)return Ps;ma=1;var e=xp(),t={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},s=e(t);return Ps=s,Ps}var Is,fa;function th(){if(fa)return Is;fa=1;var e=hl(),t=eh(),s=/&(?:amp|lt|gt|quot|#39);/g,n=RegExp(s.source);function i(a){return a=e(a),a&&n.test(a)?a.replace(s,t):a}return Is=i,Is}var sh=th();const nh=$n(sh);var Es,ga;function Ii(){if(ga)return Es;ga=1;var e=Cn(),t=Tn();function s(n,i,a){(a!==void 0&&!t(n[i],a)||a===void 0&&!(i in n))&&e(n,i,a)}return Es=s,Es}var kt={exports:{}};kt.exports;var ba;function oh(){return ba||(ba=1,function(e,t){var s=ml(),n=t&&!t.nodeType&&t,i=n&&!0&&e&&!e.nodeType&&e,a=i&&i.exports===n,l=a?s.Buffer:void 0,r=l?l.allocUnsafe:void 0;function p(c,h){if(h)return c.slice();var m=c.length,g=r?r(m):new c.constructor(m);return c.copy(g),g}e.exports=p}(kt,kt.exports)),kt.exports}var _s,va;function ah(){if(va)return _s;va=1;var e=fl();function t(s){var n=new s.constructor(s.byteLength);return new e(n).set(new e(s)),n}return _s=t,_s}var As,ya;function ih(){if(ya)return As;ya=1;var e=ah();function t(s,n){var i=n?e(s.buffer):s.buffer;return new s.constructor(i,s.byteOffset,s.length)}return As=t,As}var Os,wa;function lh(){if(wa)return Os;wa=1;function e(t,s){var n=-1,i=t.length;for(s||(s=Array(i));++n<i;)s[n]=t[n];return s}return Os=e,Os}var Us,$a;function rh(){if($a)return Us;$a=1;var e=Pt(),t=Object.create,s=function(){function n(){}return function(i){if(!e(i))return{};if(t)return t(i);n.prototype=i;var a=new n;return n.prototype=void 0,a}}();return Us=s,Us}var Ms,ka;function Ei(){if(ka)return Ms;ka=1;var e=gl(),t=e(Object.getPrototypeOf,Object);return Ms=t,Ms}var Bs,Ca;function dh(){if(Ca)return Bs;Ca=1;var e=rh(),t=Ei(),s=ci();function n(i){return typeof i.constructor=="function"&&!s(i)?e(t(i)):{}}return Bs=n,Bs}var Rs,Ta;function uh(){if(Ta)return Rs;Ta=1;var e=Vn(),t=pi();function s(n){return t(n)&&e(n)}return Rs=s,Rs}var Ds,Va;function ch(){if(Va)return Ds;Va=1;var e=bl(),t=Ei(),s=pi(),n="[object Object]",i=Function.prototype,a=Object.prototype,l=i.toString,r=a.hasOwnProperty,p=l.call(Object);function c(h){if(!s(h)||e(h)!=n)return!1;var m=t(h);if(m===null)return!0;var g=r.call(m,"constructor")&&m.constructor;return typeof g=="function"&&g instanceof g&&l.call(g)==p}return Ds=c,Ds}var Ns,Sa;function _i(){if(Sa)return Ns;Sa=1;function e(t,s){if(!(s==="constructor"&&typeof t[s]=="function")&&s!="__proto__")return t[s]}return Ns=e,Ns}var Fs,La;function ph(){if(La)return Fs;La=1;var e=Cn(),t=Tn(),s=Object.prototype,n=s.hasOwnProperty;function i(a,l,r){var p=a[l];(!(n.call(a,l)&&t(p,r))||r===void 0&&!(l in a))&&e(a,l,r)}return Fs=i,Fs}var js,Pa;function hh(){if(Pa)return js;Pa=1;var e=ph(),t=Cn();function s(n,i,a,l){var r=!a;a||(a={});for(var p=-1,c=i.length;++p<c;){var h=i[p],m=l?l(a[h],n[h],h,a,n):void 0;m===void 0&&(m=n[h]),r?t(a,h,m):e(a,h,m)}return a}return js=s,js}var qs,Ia;function mh(){if(Ia)return qs;Ia=1;function e(t){var s=[];if(t!=null)for(var n in Object(t))s.push(n);return s}return qs=e,qs}var zs,Ea;function fh(){if(Ea)return zs;Ea=1;var e=Pt(),t=ci(),s=mh(),n=Object.prototype,i=n.hasOwnProperty;function a(l){if(!e(l))return s(l);var r=t(l),p=[];for(var c in l)c=="constructor"&&(r||!i.call(l,c))||p.push(c);return p}return zs=a,zs}var Hs,_a;function Ai(){if(_a)return Hs;_a=1;var e=vl(),t=fh(),s=Vn();function n(i){return s(i)?e(i,!0):t(i)}return Hs=n,Hs}var Ws,Aa;function gh(){if(Aa)return Ws;Aa=1;var e=hh(),t=Ai();function s(n){return e(n,t(n))}return Ws=s,Ws}var Ys,Oa;function bh(){if(Oa)return Ys;Oa=1;var e=Ii(),t=oh(),s=ih(),n=lh(),i=dh(),a=yl(),l=li(),r=uh(),p=wl(),c=$l(),h=Pt(),m=ch(),g=kl(),k=_i(),V=gh();function S(C,E,B,M,R,G,b){var I=k(C,B),A=k(E,B),O=b.get(A);if(O){e(C,B,O);return}var U=G?G(I,A,B+"",C,E,b):void 0,F=U===void 0;if(F){var j=l(A),_=!j&&p(A),N=!j&&!_&&g(A);U=A,j||_||N?l(I)?U=I:r(I)?U=n(I):_?(F=!1,U=t(A,!0)):N?(F=!1,U=s(A,!0)):U=[]:m(A)||a(A)?(U=I,a(I)?U=V(I):(!h(I)||c(I))&&(U=i(A))):F=!1}F&&(b.set(A,U),R(U,A,M,G,b),b.delete(A)),e(C,B,U)}return Ys=S,Ys}var Gs,Ua;function vh(){if(Ua)return Gs;Ua=1;var e=Cl(),t=Ii(),s=Tl(),n=bh(),i=Pt(),a=Ai(),l=_i();function r(p,c,h,m,g){p!==c&&s(c,function(k,V){if(g||(g=new e),i(k))n(p,c,V,h,r,m,g);else{var S=m?m(l(p,V),k,V+"",p,c,g):void 0;S===void 0&&(S=k),t(p,V,S)}},a)}return Gs=r,Gs}var Ks,Ma;function yh(){if(Ma)return Ks;Ma=1;function e(t,s,n){switch(n.length){case 0:return t.call(s);case 1:return t.call(s,n[0]);case 2:return t.call(s,n[0],n[1]);case 3:return t.call(s,n[0],n[1],n[2])}return t.apply(s,n)}return Ks=e,Ks}var Xs,Ba;function wh(){if(Ba)return Xs;Ba=1;var e=yh(),t=Math.max;function s(n,i,a){return i=t(i===void 0?n.length-1:i,0),function(){for(var l=arguments,r=-1,p=t(l.length-i,0),c=Array(p);++r<p;)c[r]=l[i+r];r=-1;for(var h=Array(i+1);++r<i;)h[r]=l[r];return h[i]=a(c),e(n,this,h)}}return Xs=s,Xs}var Js,Ra;function $h(){if(Ra)return Js;Ra=1;function e(t){return function(){return t}}return Js=e,Js}var Qs,Da;function kh(){if(Da)return Qs;Da=1;var e=$h(),t=Vl(),s=hi(),n=t?function(i,a){return t(i,"toString",{configurable:!0,enumerable:!1,value:e(a),writable:!0})}:s;return Qs=n,Qs}var Zs,Na;function Ch(){if(Na)return Zs;Na=1;var e=800,t=16,s=Date.now;function n(i){var a=0,l=0;return function(){var r=s(),p=t-(r-l);if(l=r,p>0){if(++a>=e)return arguments[0]}else a=0;return i.apply(void 0,arguments)}}return Zs=n,Zs}var xs,Fa;function Th(){if(Fa)return xs;Fa=1;var e=kh(),t=Ch(),s=t(e);return xs=s,xs}var en,ja;function Vh(){if(ja)return en;ja=1;var e=hi(),t=wh(),s=Th();function n(i,a){return s(t(i,a,e),i+"")}return en=n,en}var tn,qa;function Sh(){if(qa)return tn;qa=1;var e=Tn(),t=Vn(),s=Sl(),n=Pt();function i(a,l,r){if(!n(r))return!1;var p=typeof l;return(p=="number"?t(r)&&s(l,r.length):p=="string"&&l in r)?e(r[l],a):!1}return tn=i,tn}var sn,za;function Lh(){if(za)return sn;za=1;var e=Vh(),t=Sh();function s(n){return e(function(i,a){var l=-1,r=a.length,p=r>1?a[r-1]:void 0,c=r>2?a[2]:void 0;for(p=n.length>3&&typeof p=="function"?(r--,p):void 0,c&&t(a[0],a[1],c)&&(p=r<3?void 0:p,r=1),i=Object(i);++l<r;){var h=a[l];h&&n(i,h,l,p)}return i})}return sn=s,sn}var nn,Ha;function Ph(){if(Ha)return nn;Ha=1;var e=vh(),t=Lh(),s=t(function(n,i,a){e(n,i,a)});return nn=s,nn}var Ih=Ph();const Eh=$n(Ih);/*!
 * Cropper.js v1.6.2
 * https://fengyuanchen.github.io/cropperjs
 *
 * Copyright 2015-present Chen Fengyuan
 * Released under the MIT license
 *
 * Date: 2024-04-21T07:43:05.335Z
 */function Wa(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),s.push.apply(s,n)}return s}function Oi(e){for(var t=1;t<arguments.length;t++){var s=arguments[t]!=null?arguments[t]:{};t%2?Wa(Object(s),!0).forEach(function(n){Uh(e,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Wa(Object(s)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(s,n))})}return e}function _h(e,t){if(typeof e!="object"||!e)return e;var s=e[Symbol.toPrimitive];if(s!==void 0){var n=s.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function Ui(e){var t=_h(e,"string");return typeof t=="symbol"?t:t+""}function un(e){"@babel/helpers - typeof";return un=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},un(e)}function Ah(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ya(e,t){for(var s=0;s<t.length;s++){var n=t[s];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Ui(n.key),n)}}function Oh(e,t,s){return t&&Ya(e.prototype,t),s&&Ya(e,s),Object.defineProperty(e,"prototype",{writable:!1}),e}function Uh(e,t,s){return t=Ui(t),t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function Mi(e){return Mh(e)||Bh(e)||Rh(e)||Dh()}function Mh(e){if(Array.isArray(e))return cn(e)}function Bh(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Rh(e,t){if(e){if(typeof e=="string")return cn(e,t);var s=Object.prototype.toString.call(e).slice(8,-1);if(s==="Object"&&e.constructor&&(s=e.constructor.name),s==="Map"||s==="Set")return Array.from(e);if(s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return cn(e,t)}}function cn(e,t){(t==null||t>e.length)&&(t=e.length);for(var s=0,n=new Array(t);s<t;s++)n[s]=e[s];return n}function Dh(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Qt=typeof window<"u"&&typeof window.document<"u",Ne=Qt?window:{},Mn=Qt&&Ne.document.documentElement?"ontouchstart"in Ne.document.documentElement:!1,Bn=Qt?"PointerEvent"in Ne:!1,oe="cropper",Rn="all",Bi="crop",Ri="move",Di="zoom",Je="e",Qe="w",lt="s",We="n",vt="ne",yt="nw",wt="se",$t="sw",pn="".concat(oe,"-crop"),Ga="".concat(oe,"-disabled"),we="".concat(oe,"-hidden"),Ka="".concat(oe,"-hide"),Nh="".concat(oe,"-invisible"),Wt="".concat(oe,"-modal"),hn="".concat(oe,"-move"),Vt="".concat(oe,"Action"),Ft="".concat(oe,"Preview"),Dn="crop",Ni="move",Fi="none",mn="crop",fn="cropend",gn="cropmove",bn="cropstart",Xa="dblclick",Fh=Mn?"touchstart":"mousedown",jh=Mn?"touchmove":"mousemove",qh=Mn?"touchend touchcancel":"mouseup",Ja=Bn?"pointerdown":Fh,Qa=Bn?"pointermove":jh,Za=Bn?"pointerup pointercancel":qh,xa="ready",ei="resize",ti="wheel",vn="zoom",si="image/jpeg",zh=/^e|w|s|n|se|sw|ne|nw|all|crop|move|zoom$/,Hh=/^data:/,Wh=/^data:image\/jpeg;base64,/,Yh=/^img|canvas$/i,ji=200,qi=100,ni={viewMode:0,dragMode:Dn,initialAspectRatio:NaN,aspectRatio:NaN,data:null,preview:"",responsive:!0,restore:!0,checkCrossOrigin:!0,checkOrientation:!0,modal:!0,guides:!0,center:!0,highlight:!0,background:!0,autoCrop:!0,autoCropArea:.8,movable:!0,rotatable:!0,scalable:!0,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,wheelZoomRatio:.1,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!0,minCanvasWidth:0,minCanvasHeight:0,minCropBoxWidth:0,minCropBoxHeight:0,minContainerWidth:ji,minContainerHeight:qi,ready:null,cropstart:null,cropmove:null,cropend:null,crop:null,zoom:null},Gh='<div class="cropper-container" touch-action="none"><div class="cropper-wrap-box"><div class="cropper-canvas"></div></div><div class="cropper-drag-box"></div><div class="cropper-crop-box"><span class="cropper-view-box"></span><span class="cropper-dashed dashed-h"></span><span class="cropper-dashed dashed-v"></span><span class="cropper-center"></span><span class="cropper-face"></span><span class="cropper-line line-e" data-cropper-action="e"></span><span class="cropper-line line-n" data-cropper-action="n"></span><span class="cropper-line line-w" data-cropper-action="w"></span><span class="cropper-line line-s" data-cropper-action="s"></span><span class="cropper-point point-e" data-cropper-action="e"></span><span class="cropper-point point-n" data-cropper-action="n"></span><span class="cropper-point point-w" data-cropper-action="w"></span><span class="cropper-point point-s" data-cropper-action="s"></span><span class="cropper-point point-ne" data-cropper-action="ne"></span><span class="cropper-point point-nw" data-cropper-action="nw"></span><span class="cropper-point point-sw" data-cropper-action="sw"></span><span class="cropper-point point-se" data-cropper-action="se"></span></div></div>',Kh=Number.isNaN||Ne.isNaN;function X(e){return typeof e=="number"&&!Kh(e)}var oi=function(t){return t>0&&t<1/0};function on(e){return typeof e>"u"}function xe(e){return un(e)==="object"&&e!==null}var Xh=Object.prototype.hasOwnProperty;function ut(e){if(!xe(e))return!1;try{var t=e.constructor,s=t.prototype;return t&&s&&Xh.call(s,"isPrototypeOf")}catch{return!1}}function ye(e){return typeof e=="function"}var Jh=Array.prototype.slice;function zi(e){return Array.from?Array.from(e):Jh.call(e)}function re(e,t){return e&&ye(t)&&(Array.isArray(e)||X(e.length)?zi(e).forEach(function(s,n){t.call(e,s,n,e)}):xe(e)&&Object.keys(e).forEach(function(s){t.call(e,e[s],s,e)})),e}var ae=Object.assign||function(t){for(var s=arguments.length,n=new Array(s>1?s-1:0),i=1;i<s;i++)n[i-1]=arguments[i];return xe(t)&&n.length>0&&n.forEach(function(a){xe(a)&&Object.keys(a).forEach(function(l){t[l]=a[l]})}),t},Qh=/\.\d*(?:0|9){12}\d*$/;function pt(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e11;return Qh.test(e)?Math.round(e*t)/t:e}var Zh=/^width|height|left|top|marginLeft|marginTop$/;function Ye(e,t){var s=e.style;re(t,function(n,i){Zh.test(i)&&X(n)&&(n="".concat(n,"px")),s[i]=n})}function xh(e,t){return e.classList?e.classList.contains(t):e.className.indexOf(t)>-1}function ce(e,t){if(t){if(X(e.length)){re(e,function(n){ce(n,t)});return}if(e.classList){e.classList.add(t);return}var s=e.className.trim();s?s.indexOf(t)<0&&(e.className="".concat(s," ").concat(t)):e.className=t}}function De(e,t){if(t){if(X(e.length)){re(e,function(s){De(s,t)});return}if(e.classList){e.classList.remove(t);return}e.className.indexOf(t)>=0&&(e.className=e.className.replace(t,""))}}function ct(e,t,s){if(t){if(X(e.length)){re(e,function(n){ct(n,t,s)});return}s?ce(e,t):De(e,t)}}var em=/([a-z\d])([A-Z])/g;function Nn(e){return e.replace(em,"$1-$2").toLowerCase()}function yn(e,t){return xe(e[t])?e[t]:e.dataset?e.dataset[t]:e.getAttribute("data-".concat(Nn(t)))}function St(e,t,s){xe(s)?e[t]=s:e.dataset?e.dataset[t]=s:e.setAttribute("data-".concat(Nn(t)),s)}function tm(e,t){if(xe(e[t]))try{delete e[t]}catch{e[t]=void 0}else if(e.dataset)try{delete e.dataset[t]}catch{e.dataset[t]=void 0}else e.removeAttribute("data-".concat(Nn(t)))}var Hi=/\s\s*/,Wi=function(){var e=!1;if(Qt){var t=!1,s=function(){},n=Object.defineProperty({},"once",{get:function(){return e=!0,t},set:function(a){t=a}});Ne.addEventListener("test",s,n),Ne.removeEventListener("test",s,n)}return e}();function Ae(e,t,s){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},i=s;t.trim().split(Hi).forEach(function(a){if(!Wi){var l=e.listeners;l&&l[a]&&l[a][s]&&(i=l[a][s],delete l[a][s],Object.keys(l[a]).length===0&&delete l[a],Object.keys(l).length===0&&delete e.listeners)}e.removeEventListener(a,i,n)})}function Se(e,t,s){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},i=s;t.trim().split(Hi).forEach(function(a){if(n.once&&!Wi){var l=e.listeners,r=l===void 0?{}:l;i=function(){delete r[a][s],e.removeEventListener(a,i,n);for(var c=arguments.length,h=new Array(c),m=0;m<c;m++)h[m]=arguments[m];s.apply(e,h)},r[a]||(r[a]={}),r[a][s]&&e.removeEventListener(a,r[a][s],n),r[a][s]=i,e.listeners=r}e.addEventListener(a,i,n)})}function ht(e,t,s){var n;return ye(Event)&&ye(CustomEvent)?n=new CustomEvent(t,{detail:s,bubbles:!0,cancelable:!0}):(n=document.createEvent("CustomEvent"),n.initCustomEvent(t,!0,!0,s)),e.dispatchEvent(n)}function Yi(e){var t=e.getBoundingClientRect();return{left:t.left+(window.pageXOffset-document.documentElement.clientLeft),top:t.top+(window.pageYOffset-document.documentElement.clientTop)}}var an=Ne.location,sm=/^(\w+:)\/\/([^:/?#]*):?(\d*)/i;function ai(e){var t=e.match(sm);return t!==null&&(t[1]!==an.protocol||t[2]!==an.hostname||t[3]!==an.port)}function ii(e){var t="timestamp=".concat(new Date().getTime());return e+(e.indexOf("?")===-1?"?":"&")+t}function Tt(e){var t=e.rotate,s=e.scaleX,n=e.scaleY,i=e.translateX,a=e.translateY,l=[];X(i)&&i!==0&&l.push("translateX(".concat(i,"px)")),X(a)&&a!==0&&l.push("translateY(".concat(a,"px)")),X(t)&&t!==0&&l.push("rotate(".concat(t,"deg)")),X(s)&&s!==1&&l.push("scaleX(".concat(s,")")),X(n)&&n!==1&&l.push("scaleY(".concat(n,")"));var r=l.length?l.join(" "):"none";return{WebkitTransform:r,msTransform:r,transform:r}}function nm(e){var t=Oi({},e),s=0;return re(e,function(n,i){delete t[i],re(t,function(a){var l=Math.abs(n.startX-a.startX),r=Math.abs(n.startY-a.startY),p=Math.abs(n.endX-a.endX),c=Math.abs(n.endY-a.endY),h=Math.sqrt(l*l+r*r),m=Math.sqrt(p*p+c*c),g=(m-h)/h;Math.abs(g)>Math.abs(s)&&(s=g)})}),s}function jt(e,t){var s=e.pageX,n=e.pageY,i={endX:s,endY:n};return t?i:Oi({startX:s,startY:n},i)}function om(e){var t=0,s=0,n=0;return re(e,function(i){var a=i.startX,l=i.startY;t+=a,s+=l,n+=1}),t/=n,s/=n,{pageX:t,pageY:s}}function Ge(e){var t=e.aspectRatio,s=e.height,n=e.width,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"contain",a=oi(n),l=oi(s);if(a&&l){var r=s*t;i==="contain"&&r>n||i==="cover"&&r<n?s=n/t:n=s*t}else a?s=n/t:l&&(n=s*t);return{width:n,height:s}}function am(e){var t=e.width,s=e.height,n=e.degree;if(n=Math.abs(n)%180,n===90)return{width:s,height:t};var i=n%90*Math.PI/180,a=Math.sin(i),l=Math.cos(i),r=t*l+s*a,p=t*a+s*l;return n>90?{width:p,height:r}:{width:r,height:p}}function im(e,t,s,n){var i=t.aspectRatio,a=t.naturalWidth,l=t.naturalHeight,r=t.rotate,p=r===void 0?0:r,c=t.scaleX,h=c===void 0?1:c,m=t.scaleY,g=m===void 0?1:m,k=s.aspectRatio,V=s.naturalWidth,S=s.naturalHeight,C=n.fillColor,E=C===void 0?"transparent":C,B=n.imageSmoothingEnabled,M=B===void 0?!0:B,R=n.imageSmoothingQuality,G=R===void 0?"low":R,b=n.maxWidth,I=b===void 0?1/0:b,A=n.maxHeight,O=A===void 0?1/0:A,U=n.minWidth,F=U===void 0?0:U,j=n.minHeight,_=j===void 0?0:j,N=document.createElement("canvas"),Z=N.getContext("2d"),de=Ge({aspectRatio:k,width:I,height:O}),Le=Ge({aspectRatio:k,width:F,height:_},"cover"),me=Math.min(de.width,Math.max(Le.width,V)),Oe=Math.min(de.height,Math.max(Le.height,S)),Pe=Ge({aspectRatio:i,width:I,height:O}),ke=Ge({aspectRatio:i,width:F,height:_},"cover"),Ce=Math.min(Pe.width,Math.max(ke.width,a)),Ie=Math.min(Pe.height,Math.max(ke.height,l)),Fe=[-Ce/2,-Ie/2,Ce,Ie];return N.width=pt(me),N.height=pt(Oe),Z.fillStyle=E,Z.fillRect(0,0,me,Oe),Z.save(),Z.translate(me/2,Oe/2),Z.rotate(p*Math.PI/180),Z.scale(h,g),Z.imageSmoothingEnabled=M,Z.imageSmoothingQuality=G,Z.drawImage.apply(Z,[e].concat(Mi(Fe.map(function(Ue){return Math.floor(pt(Ue))})))),Z.restore(),N}var Gi=String.fromCharCode;function lm(e,t,s){var n="";s+=t;for(var i=t;i<s;i+=1)n+=Gi(e.getUint8(i));return n}var rm=/^data:.*,/;function dm(e){var t=e.replace(rm,""),s=atob(t),n=new ArrayBuffer(s.length),i=new Uint8Array(n);return re(i,function(a,l){i[l]=s.charCodeAt(l)}),n}function um(e,t){for(var s=[],n=8192,i=new Uint8Array(e);i.length>0;)s.push(Gi.apply(null,zi(i.subarray(0,n)))),i=i.subarray(n);return"data:".concat(t,";base64,").concat(btoa(s.join("")))}function cm(e){var t=new DataView(e),s;try{var n,i,a;if(t.getUint8(0)===255&&t.getUint8(1)===216)for(var l=t.byteLength,r=2;r+1<l;){if(t.getUint8(r)===255&&t.getUint8(r+1)===225){i=r;break}r+=1}if(i){var p=i+4,c=i+10;if(lm(t,p,4)==="Exif"){var h=t.getUint16(c);if(n=h===18761,(n||h===19789)&&t.getUint16(c+2,n)===42){var m=t.getUint32(c+4,n);m>=8&&(a=c+m)}}}if(a){var g=t.getUint16(a,n),k,V;for(V=0;V<g;V+=1)if(k=a+V*12+2,t.getUint16(k,n)===274){k+=8,s=t.getUint16(k,n),t.setUint16(k,1,n);break}}}catch{s=1}return s}function pm(e){var t=0,s=1,n=1;switch(e){case 2:s=-1;break;case 3:t=-180;break;case 4:n=-1;break;case 5:t=90,n=-1;break;case 6:t=90;break;case 7:t=90,s=-1;break;case 8:t=-90;break}return{rotate:t,scaleX:s,scaleY:n}}var hm={render:function(){this.initContainer(),this.initCanvas(),this.initCropBox(),this.renderCanvas(),this.cropped&&this.renderCropBox()},initContainer:function(){var t=this.element,s=this.options,n=this.container,i=this.cropper,a=Number(s.minContainerWidth),l=Number(s.minContainerHeight);ce(i,we),De(t,we);var r={width:Math.max(n.offsetWidth,a>=0?a:ji),height:Math.max(n.offsetHeight,l>=0?l:qi)};this.containerData=r,Ye(i,{width:r.width,height:r.height}),ce(t,we),De(i,we)},initCanvas:function(){var t=this.containerData,s=this.imageData,n=this.options.viewMode,i=Math.abs(s.rotate)%180===90,a=i?s.naturalHeight:s.naturalWidth,l=i?s.naturalWidth:s.naturalHeight,r=a/l,p=t.width,c=t.height;t.height*r>t.width?n===3?p=t.height*r:c=t.width/r:n===3?c=t.width/r:p=t.height*r;var h={aspectRatio:r,naturalWidth:a,naturalHeight:l,width:p,height:c};this.canvasData=h,this.limited=n===1||n===2,this.limitCanvas(!0,!0),h.width=Math.min(Math.max(h.width,h.minWidth),h.maxWidth),h.height=Math.min(Math.max(h.height,h.minHeight),h.maxHeight),h.left=(t.width-h.width)/2,h.top=(t.height-h.height)/2,h.oldLeft=h.left,h.oldTop=h.top,this.initialCanvasData=ae({},h)},limitCanvas:function(t,s){var n=this.options,i=this.containerData,a=this.canvasData,l=this.cropBoxData,r=n.viewMode,p=a.aspectRatio,c=this.cropped&&l;if(t){var h=Number(n.minCanvasWidth)||0,m=Number(n.minCanvasHeight)||0;r>1?(h=Math.max(h,i.width),m=Math.max(m,i.height),r===3&&(m*p>h?h=m*p:m=h/p)):r>0&&(h?h=Math.max(h,c?l.width:0):m?m=Math.max(m,c?l.height:0):c&&(h=l.width,m=l.height,m*p>h?h=m*p:m=h/p));var g=Ge({aspectRatio:p,width:h,height:m});h=g.width,m=g.height,a.minWidth=h,a.minHeight=m,a.maxWidth=1/0,a.maxHeight=1/0}if(s)if(r>(c?0:1)){var k=i.width-a.width,V=i.height-a.height;a.minLeft=Math.min(0,k),a.minTop=Math.min(0,V),a.maxLeft=Math.max(0,k),a.maxTop=Math.max(0,V),c&&this.limited&&(a.minLeft=Math.min(l.left,l.left+(l.width-a.width)),a.minTop=Math.min(l.top,l.top+(l.height-a.height)),a.maxLeft=l.left,a.maxTop=l.top,r===2&&(a.width>=i.width&&(a.minLeft=Math.min(0,k),a.maxLeft=Math.max(0,k)),a.height>=i.height&&(a.minTop=Math.min(0,V),a.maxTop=Math.max(0,V))))}else a.minLeft=-a.width,a.minTop=-a.height,a.maxLeft=i.width,a.maxTop=i.height},renderCanvas:function(t,s){var n=this.canvasData,i=this.imageData;if(s){var a=am({width:i.naturalWidth*Math.abs(i.scaleX||1),height:i.naturalHeight*Math.abs(i.scaleY||1),degree:i.rotate||0}),l=a.width,r=a.height,p=n.width*(l/n.naturalWidth),c=n.height*(r/n.naturalHeight);n.left-=(p-n.width)/2,n.top-=(c-n.height)/2,n.width=p,n.height=c,n.aspectRatio=l/r,n.naturalWidth=l,n.naturalHeight=r,this.limitCanvas(!0,!1)}(n.width>n.maxWidth||n.width<n.minWidth)&&(n.left=n.oldLeft),(n.height>n.maxHeight||n.height<n.minHeight)&&(n.top=n.oldTop),n.width=Math.min(Math.max(n.width,n.minWidth),n.maxWidth),n.height=Math.min(Math.max(n.height,n.minHeight),n.maxHeight),this.limitCanvas(!1,!0),n.left=Math.min(Math.max(n.left,n.minLeft),n.maxLeft),n.top=Math.min(Math.max(n.top,n.minTop),n.maxTop),n.oldLeft=n.left,n.oldTop=n.top,Ye(this.canvas,ae({width:n.width,height:n.height},Tt({translateX:n.left,translateY:n.top}))),this.renderImage(t),this.cropped&&this.limited&&this.limitCropBox(!0,!0)},renderImage:function(t){var s=this.canvasData,n=this.imageData,i=n.naturalWidth*(s.width/s.naturalWidth),a=n.naturalHeight*(s.height/s.naturalHeight);ae(n,{width:i,height:a,left:(s.width-i)/2,top:(s.height-a)/2}),Ye(this.image,ae({width:n.width,height:n.height},Tt(ae({translateX:n.left,translateY:n.top},n)))),t&&this.output()},initCropBox:function(){var t=this.options,s=this.canvasData,n=t.aspectRatio||t.initialAspectRatio,i=Number(t.autoCropArea)||.8,a={width:s.width,height:s.height};n&&(s.height*n>s.width?a.height=a.width/n:a.width=a.height*n),this.cropBoxData=a,this.limitCropBox(!0,!0),a.width=Math.min(Math.max(a.width,a.minWidth),a.maxWidth),a.height=Math.min(Math.max(a.height,a.minHeight),a.maxHeight),a.width=Math.max(a.minWidth,a.width*i),a.height=Math.max(a.minHeight,a.height*i),a.left=s.left+(s.width-a.width)/2,a.top=s.top+(s.height-a.height)/2,a.oldLeft=a.left,a.oldTop=a.top,this.initialCropBoxData=ae({},a)},limitCropBox:function(t,s){var n=this.options,i=this.containerData,a=this.canvasData,l=this.cropBoxData,r=this.limited,p=n.aspectRatio;if(t){var c=Number(n.minCropBoxWidth)||0,h=Number(n.minCropBoxHeight)||0,m=r?Math.min(i.width,a.width,a.width+a.left,i.width-a.left):i.width,g=r?Math.min(i.height,a.height,a.height+a.top,i.height-a.top):i.height;c=Math.min(c,i.width),h=Math.min(h,i.height),p&&(c&&h?h*p>c?h=c/p:c=h*p:c?h=c/p:h&&(c=h*p),g*p>m?g=m/p:m=g*p),l.minWidth=Math.min(c,m),l.minHeight=Math.min(h,g),l.maxWidth=m,l.maxHeight=g}s&&(r?(l.minLeft=Math.max(0,a.left),l.minTop=Math.max(0,a.top),l.maxLeft=Math.min(i.width,a.left+a.width)-l.width,l.maxTop=Math.min(i.height,a.top+a.height)-l.height):(l.minLeft=0,l.minTop=0,l.maxLeft=i.width-l.width,l.maxTop=i.height-l.height))},renderCropBox:function(){var t=this.options,s=this.containerData,n=this.cropBoxData;(n.width>n.maxWidth||n.width<n.minWidth)&&(n.left=n.oldLeft),(n.height>n.maxHeight||n.height<n.minHeight)&&(n.top=n.oldTop),n.width=Math.min(Math.max(n.width,n.minWidth),n.maxWidth),n.height=Math.min(Math.max(n.height,n.minHeight),n.maxHeight),this.limitCropBox(!1,!0),n.left=Math.min(Math.max(n.left,n.minLeft),n.maxLeft),n.top=Math.min(Math.max(n.top,n.minTop),n.maxTop),n.oldLeft=n.left,n.oldTop=n.top,t.movable&&t.cropBoxMovable&&St(this.face,Vt,n.width>=s.width&&n.height>=s.height?Ri:Rn),Ye(this.cropBox,ae({width:n.width,height:n.height},Tt({translateX:n.left,translateY:n.top}))),this.cropped&&this.limited&&this.limitCanvas(!0,!0),this.disabled||this.output()},output:function(){this.preview(),ht(this.element,mn,this.getData())}},mm={initPreview:function(){var t=this.element,s=this.crossOrigin,n=this.options.preview,i=s?this.crossOriginUrl:this.url,a=t.alt||"The image to preview",l=document.createElement("img");if(s&&(l.crossOrigin=s),l.src=i,l.alt=a,this.viewBox.appendChild(l),this.viewBoxImage=l,!!n){var r=n;typeof n=="string"?r=t.ownerDocument.querySelectorAll(n):n.querySelector&&(r=[n]),this.previews=r,re(r,function(p){var c=document.createElement("img");St(p,Ft,{width:p.offsetWidth,height:p.offsetHeight,html:p.innerHTML}),s&&(c.crossOrigin=s),c.src=i,c.alt=a,c.style.cssText='display:block;width:100%;height:auto;min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;image-orientation:0deg!important;"',p.innerHTML="",p.appendChild(c)})}},resetPreview:function(){re(this.previews,function(t){var s=yn(t,Ft);Ye(t,{width:s.width,height:s.height}),t.innerHTML=s.html,tm(t,Ft)})},preview:function(){var t=this.imageData,s=this.canvasData,n=this.cropBoxData,i=n.width,a=n.height,l=t.width,r=t.height,p=n.left-s.left-t.left,c=n.top-s.top-t.top;!this.cropped||this.disabled||(Ye(this.viewBoxImage,ae({width:l,height:r},Tt(ae({translateX:-p,translateY:-c},t)))),re(this.previews,function(h){var m=yn(h,Ft),g=m.width,k=m.height,V=g,S=k,C=1;i&&(C=g/i,S=a*C),a&&S>k&&(C=k/a,V=i*C,S=k),Ye(h,{width:V,height:S}),Ye(h.getElementsByTagName("img")[0],ae({width:l*C,height:r*C},Tt(ae({translateX:-p*C,translateY:-c*C},t))))}))}},fm={bind:function(){var t=this.element,s=this.options,n=this.cropper;ye(s.cropstart)&&Se(t,bn,s.cropstart),ye(s.cropmove)&&Se(t,gn,s.cropmove),ye(s.cropend)&&Se(t,fn,s.cropend),ye(s.crop)&&Se(t,mn,s.crop),ye(s.zoom)&&Se(t,vn,s.zoom),Se(n,Ja,this.onCropStart=this.cropStart.bind(this)),s.zoomable&&s.zoomOnWheel&&Se(n,ti,this.onWheel=this.wheel.bind(this),{passive:!1,capture:!0}),s.toggleDragModeOnDblclick&&Se(n,Xa,this.onDblclick=this.dblclick.bind(this)),Se(t.ownerDocument,Qa,this.onCropMove=this.cropMove.bind(this)),Se(t.ownerDocument,Za,this.onCropEnd=this.cropEnd.bind(this)),s.responsive&&Se(window,ei,this.onResize=this.resize.bind(this))},unbind:function(){var t=this.element,s=this.options,n=this.cropper;ye(s.cropstart)&&Ae(t,bn,s.cropstart),ye(s.cropmove)&&Ae(t,gn,s.cropmove),ye(s.cropend)&&Ae(t,fn,s.cropend),ye(s.crop)&&Ae(t,mn,s.crop),ye(s.zoom)&&Ae(t,vn,s.zoom),Ae(n,Ja,this.onCropStart),s.zoomable&&s.zoomOnWheel&&Ae(n,ti,this.onWheel,{passive:!1,capture:!0}),s.toggleDragModeOnDblclick&&Ae(n,Xa,this.onDblclick),Ae(t.ownerDocument,Qa,this.onCropMove),Ae(t.ownerDocument,Za,this.onCropEnd),s.responsive&&Ae(window,ei,this.onResize)}},gm={resize:function(){if(!this.disabled){var t=this.options,s=this.container,n=this.containerData,i=s.offsetWidth/n.width,a=s.offsetHeight/n.height,l=Math.abs(i-1)>Math.abs(a-1)?i:a;if(l!==1){var r,p;t.restore&&(r=this.getCanvasData(),p=this.getCropBoxData()),this.render(),t.restore&&(this.setCanvasData(re(r,function(c,h){r[h]=c*l})),this.setCropBoxData(re(p,function(c,h){p[h]=c*l})))}}},dblclick:function(){this.disabled||this.options.dragMode===Fi||this.setDragMode(xh(this.dragBox,pn)?Ni:Dn)},wheel:function(t){var s=this,n=Number(this.options.wheelZoomRatio)||.1,i=1;this.disabled||(t.preventDefault(),!this.wheeling&&(this.wheeling=!0,setTimeout(function(){s.wheeling=!1},50),t.deltaY?i=t.deltaY>0?1:-1:t.wheelDelta?i=-t.wheelDelta/120:t.detail&&(i=t.detail>0?1:-1),this.zoom(-i*n,t)))},cropStart:function(t){var s=t.buttons,n=t.button;if(!(this.disabled||(t.type==="mousedown"||t.type==="pointerdown"&&t.pointerType==="mouse")&&(X(s)&&s!==1||X(n)&&n!==0||t.ctrlKey))){var i=this.options,a=this.pointers,l;t.changedTouches?re(t.changedTouches,function(r){a[r.identifier]=jt(r)}):a[t.pointerId||0]=jt(t),Object.keys(a).length>1&&i.zoomable&&i.zoomOnTouch?l=Di:l=yn(t.target,Vt),zh.test(l)&&ht(this.element,bn,{originalEvent:t,action:l})!==!1&&(t.preventDefault(),this.action=l,this.cropping=!1,l===Bi&&(this.cropping=!0,ce(this.dragBox,Wt)))}},cropMove:function(t){var s=this.action;if(!(this.disabled||!s)){var n=this.pointers;t.preventDefault(),ht(this.element,gn,{originalEvent:t,action:s})!==!1&&(t.changedTouches?re(t.changedTouches,function(i){ae(n[i.identifier]||{},jt(i,!0))}):ae(n[t.pointerId||0]||{},jt(t,!0)),this.change(t))}},cropEnd:function(t){if(!this.disabled){var s=this.action,n=this.pointers;t.changedTouches?re(t.changedTouches,function(i){delete n[i.identifier]}):delete n[t.pointerId||0],s&&(t.preventDefault(),Object.keys(n).length||(this.action=""),this.cropping&&(this.cropping=!1,ct(this.dragBox,Wt,this.cropped&&this.options.modal)),ht(this.element,fn,{originalEvent:t,action:s}))}}},bm={change:function(t){var s=this.options,n=this.canvasData,i=this.containerData,a=this.cropBoxData,l=this.pointers,r=this.action,p=s.aspectRatio,c=a.left,h=a.top,m=a.width,g=a.height,k=c+m,V=h+g,S=0,C=0,E=i.width,B=i.height,M=!0,R;!p&&t.shiftKey&&(p=m&&g?m/g:1),this.limited&&(S=a.minLeft,C=a.minTop,E=S+Math.min(i.width,n.width,n.left+n.width),B=C+Math.min(i.height,n.height,n.top+n.height));var G=l[Object.keys(l)[0]],b={x:G.endX-G.startX,y:G.endY-G.startY},I=function(O){switch(O){case Je:k+b.x>E&&(b.x=E-k);break;case Qe:c+b.x<S&&(b.x=S-c);break;case We:h+b.y<C&&(b.y=C-h);break;case lt:V+b.y>B&&(b.y=B-V);break}};switch(r){case Rn:c+=b.x,h+=b.y;break;case Je:if(b.x>=0&&(k>=E||p&&(h<=C||V>=B))){M=!1;break}I(Je),m+=b.x,m<0&&(r=Qe,m=-m,c-=m),p&&(g=m/p,h+=(a.height-g)/2);break;case We:if(b.y<=0&&(h<=C||p&&(c<=S||k>=E))){M=!1;break}I(We),g-=b.y,h+=b.y,g<0&&(r=lt,g=-g,h-=g),p&&(m=g*p,c+=(a.width-m)/2);break;case Qe:if(b.x<=0&&(c<=S||p&&(h<=C||V>=B))){M=!1;break}I(Qe),m-=b.x,c+=b.x,m<0&&(r=Je,m=-m,c-=m),p&&(g=m/p,h+=(a.height-g)/2);break;case lt:if(b.y>=0&&(V>=B||p&&(c<=S||k>=E))){M=!1;break}I(lt),g+=b.y,g<0&&(r=We,g=-g,h-=g),p&&(m=g*p,c+=(a.width-m)/2);break;case vt:if(p){if(b.y<=0&&(h<=C||k>=E)){M=!1;break}I(We),g-=b.y,h+=b.y,m=g*p}else I(We),I(Je),b.x>=0?k<E?m+=b.x:b.y<=0&&h<=C&&(M=!1):m+=b.x,b.y<=0?h>C&&(g-=b.y,h+=b.y):(g-=b.y,h+=b.y);m<0&&g<0?(r=$t,g=-g,m=-m,h-=g,c-=m):m<0?(r=yt,m=-m,c-=m):g<0&&(r=wt,g=-g,h-=g);break;case yt:if(p){if(b.y<=0&&(h<=C||c<=S)){M=!1;break}I(We),g-=b.y,h+=b.y,m=g*p,c+=a.width-m}else I(We),I(Qe),b.x<=0?c>S?(m-=b.x,c+=b.x):b.y<=0&&h<=C&&(M=!1):(m-=b.x,c+=b.x),b.y<=0?h>C&&(g-=b.y,h+=b.y):(g-=b.y,h+=b.y);m<0&&g<0?(r=wt,g=-g,m=-m,h-=g,c-=m):m<0?(r=vt,m=-m,c-=m):g<0&&(r=$t,g=-g,h-=g);break;case $t:if(p){if(b.x<=0&&(c<=S||V>=B)){M=!1;break}I(Qe),m-=b.x,c+=b.x,g=m/p}else I(lt),I(Qe),b.x<=0?c>S?(m-=b.x,c+=b.x):b.y>=0&&V>=B&&(M=!1):(m-=b.x,c+=b.x),b.y>=0?V<B&&(g+=b.y):g+=b.y;m<0&&g<0?(r=vt,g=-g,m=-m,h-=g,c-=m):m<0?(r=wt,m=-m,c-=m):g<0&&(r=yt,g=-g,h-=g);break;case wt:if(p){if(b.x>=0&&(k>=E||V>=B)){M=!1;break}I(Je),m+=b.x,g=m/p}else I(lt),I(Je),b.x>=0?k<E?m+=b.x:b.y>=0&&V>=B&&(M=!1):m+=b.x,b.y>=0?V<B&&(g+=b.y):g+=b.y;m<0&&g<0?(r=yt,g=-g,m=-m,h-=g,c-=m):m<0?(r=$t,m=-m,c-=m):g<0&&(r=vt,g=-g,h-=g);break;case Ri:this.move(b.x,b.y),M=!1;break;case Di:this.zoom(nm(l),t),M=!1;break;case Bi:if(!b.x||!b.y){M=!1;break}R=Yi(this.cropper),c=G.startX-R.left,h=G.startY-R.top,m=a.minWidth,g=a.minHeight,b.x>0?r=b.y>0?wt:vt:b.x<0&&(c-=m,r=b.y>0?$t:yt),b.y<0&&(h-=g),this.cropped||(De(this.cropBox,we),this.cropped=!0,this.limited&&this.limitCropBox(!0,!0));break}M&&(a.width=m,a.height=g,a.left=c,a.top=h,this.action=r,this.renderCropBox()),re(l,function(A){A.startX=A.endX,A.startY=A.endY})}},vm={crop:function(){return this.ready&&!this.cropped&&!this.disabled&&(this.cropped=!0,this.limitCropBox(!0,!0),this.options.modal&&ce(this.dragBox,Wt),De(this.cropBox,we),this.setCropBoxData(this.initialCropBoxData)),this},reset:function(){return this.ready&&!this.disabled&&(this.imageData=ae({},this.initialImageData),this.canvasData=ae({},this.initialCanvasData),this.cropBoxData=ae({},this.initialCropBoxData),this.renderCanvas(),this.cropped&&this.renderCropBox()),this},clear:function(){return this.cropped&&!this.disabled&&(ae(this.cropBoxData,{left:0,top:0,width:0,height:0}),this.cropped=!1,this.renderCropBox(),this.limitCanvas(!0,!0),this.renderCanvas(),De(this.dragBox,Wt),ce(this.cropBox,we)),this},replace:function(t){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return!this.disabled&&t&&(this.isImg&&(this.element.src=t),s?(this.url=t,this.image.src=t,this.ready&&(this.viewBoxImage.src=t,re(this.previews,function(n){n.getElementsByTagName("img")[0].src=t}))):(this.isImg&&(this.replaced=!0),this.options.data=null,this.uncreate(),this.load(t))),this},enable:function(){return this.ready&&this.disabled&&(this.disabled=!1,De(this.cropper,Ga)),this},disable:function(){return this.ready&&!this.disabled&&(this.disabled=!0,ce(this.cropper,Ga)),this},destroy:function(){var t=this.element;return t[oe]?(t[oe]=void 0,this.isImg&&this.replaced&&(t.src=this.originalUrl),this.uncreate(),this):this},move:function(t){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t,n=this.canvasData,i=n.left,a=n.top;return this.moveTo(on(t)?t:i+Number(t),on(s)?s:a+Number(s))},moveTo:function(t){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t,n=this.canvasData,i=!1;return t=Number(t),s=Number(s),this.ready&&!this.disabled&&this.options.movable&&(X(t)&&(n.left=t,i=!0),X(s)&&(n.top=s,i=!0),i&&this.renderCanvas(!0)),this},zoom:function(t,s){var n=this.canvasData;return t=Number(t),t<0?t=1/(1-t):t=1+t,this.zoomTo(n.width*t/n.naturalWidth,null,s)},zoomTo:function(t,s,n){var i=this.options,a=this.canvasData,l=a.width,r=a.height,p=a.naturalWidth,c=a.naturalHeight;if(t=Number(t),t>=0&&this.ready&&!this.disabled&&i.zoomable){var h=p*t,m=c*t;if(ht(this.element,vn,{ratio:t,oldRatio:l/p,originalEvent:n})===!1)return this;if(n){var g=this.pointers,k=Yi(this.cropper),V=g&&Object.keys(g).length?om(g):{pageX:n.pageX,pageY:n.pageY};a.left-=(h-l)*((V.pageX-k.left-a.left)/l),a.top-=(m-r)*((V.pageY-k.top-a.top)/r)}else ut(s)&&X(s.x)&&X(s.y)?(a.left-=(h-l)*((s.x-a.left)/l),a.top-=(m-r)*((s.y-a.top)/r)):(a.left-=(h-l)/2,a.top-=(m-r)/2);a.width=h,a.height=m,this.renderCanvas(!0)}return this},rotate:function(t){return this.rotateTo((this.imageData.rotate||0)+Number(t))},rotateTo:function(t){return t=Number(t),X(t)&&this.ready&&!this.disabled&&this.options.rotatable&&(this.imageData.rotate=t%360,this.renderCanvas(!0,!0)),this},scaleX:function(t){var s=this.imageData.scaleY;return this.scale(t,X(s)?s:1)},scaleY:function(t){var s=this.imageData.scaleX;return this.scale(X(s)?s:1,t)},scale:function(t){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t,n=this.imageData,i=!1;return t=Number(t),s=Number(s),this.ready&&!this.disabled&&this.options.scalable&&(X(t)&&(n.scaleX=t,i=!0),X(s)&&(n.scaleY=s,i=!0),i&&this.renderCanvas(!0,!0)),this},getData:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,s=this.options,n=this.imageData,i=this.canvasData,a=this.cropBoxData,l;if(this.ready&&this.cropped){l={x:a.left-i.left,y:a.top-i.top,width:a.width,height:a.height};var r=n.width/n.naturalWidth;if(re(l,function(h,m){l[m]=h/r}),t){var p=Math.round(l.y+l.height),c=Math.round(l.x+l.width);l.x=Math.round(l.x),l.y=Math.round(l.y),l.width=c-l.x,l.height=p-l.y}}else l={x:0,y:0,width:0,height:0};return s.rotatable&&(l.rotate=n.rotate||0),s.scalable&&(l.scaleX=n.scaleX||1,l.scaleY=n.scaleY||1),l},setData:function(t){var s=this.options,n=this.imageData,i=this.canvasData,a={};if(this.ready&&!this.disabled&&ut(t)){var l=!1;s.rotatable&&X(t.rotate)&&t.rotate!==n.rotate&&(n.rotate=t.rotate,l=!0),s.scalable&&(X(t.scaleX)&&t.scaleX!==n.scaleX&&(n.scaleX=t.scaleX,l=!0),X(t.scaleY)&&t.scaleY!==n.scaleY&&(n.scaleY=t.scaleY,l=!0)),l&&this.renderCanvas(!0,!0);var r=n.width/n.naturalWidth;X(t.x)&&(a.left=t.x*r+i.left),X(t.y)&&(a.top=t.y*r+i.top),X(t.width)&&(a.width=t.width*r),X(t.height)&&(a.height=t.height*r),this.setCropBoxData(a)}return this},getContainerData:function(){return this.ready?ae({},this.containerData):{}},getImageData:function(){return this.sized?ae({},this.imageData):{}},getCanvasData:function(){var t=this.canvasData,s={};return this.ready&&re(["left","top","width","height","naturalWidth","naturalHeight"],function(n){s[n]=t[n]}),s},setCanvasData:function(t){var s=this.canvasData,n=s.aspectRatio;return this.ready&&!this.disabled&&ut(t)&&(X(t.left)&&(s.left=t.left),X(t.top)&&(s.top=t.top),X(t.width)?(s.width=t.width,s.height=t.width/n):X(t.height)&&(s.height=t.height,s.width=t.height*n),this.renderCanvas(!0)),this},getCropBoxData:function(){var t=this.cropBoxData,s;return this.ready&&this.cropped&&(s={left:t.left,top:t.top,width:t.width,height:t.height}),s||{}},setCropBoxData:function(t){var s=this.cropBoxData,n=this.options.aspectRatio,i,a;return this.ready&&this.cropped&&!this.disabled&&ut(t)&&(X(t.left)&&(s.left=t.left),X(t.top)&&(s.top=t.top),X(t.width)&&t.width!==s.width&&(i=!0,s.width=t.width),X(t.height)&&t.height!==s.height&&(a=!0,s.height=t.height),n&&(i?s.height=s.width/n:a&&(s.width=s.height*n)),this.renderCropBox()),this},getCroppedCanvas:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!this.ready||!window.HTMLCanvasElement)return null;var s=this.canvasData,n=im(this.image,this.imageData,s,t);if(!this.cropped)return n;var i=this.getData(t.rounded),a=i.x,l=i.y,r=i.width,p=i.height,c=n.width/Math.floor(s.naturalWidth);c!==1&&(a*=c,l*=c,r*=c,p*=c);var h=r/p,m=Ge({aspectRatio:h,width:t.maxWidth||1/0,height:t.maxHeight||1/0}),g=Ge({aspectRatio:h,width:t.minWidth||0,height:t.minHeight||0},"cover"),k=Ge({aspectRatio:h,width:t.width||(c!==1?n.width:r),height:t.height||(c!==1?n.height:p)}),V=k.width,S=k.height;V=Math.min(m.width,Math.max(g.width,V)),S=Math.min(m.height,Math.max(g.height,S));var C=document.createElement("canvas"),E=C.getContext("2d");C.width=pt(V),C.height=pt(S),E.fillStyle=t.fillColor||"transparent",E.fillRect(0,0,V,S);var B=t.imageSmoothingEnabled,M=B===void 0?!0:B,R=t.imageSmoothingQuality;E.imageSmoothingEnabled=M,R&&(E.imageSmoothingQuality=R);var G=n.width,b=n.height,I=a,A=l,O,U,F,j,_,N;I<=-r||I>G?(I=0,O=0,F=0,_=0):I<=0?(F=-I,I=0,O=Math.min(G,r+I),_=O):I<=G&&(F=0,O=Math.min(r,G-I),_=O),O<=0||A<=-p||A>b?(A=0,U=0,j=0,N=0):A<=0?(j=-A,A=0,U=Math.min(b,p+A),N=U):A<=b&&(j=0,U=Math.min(p,b-A),N=U);var Z=[I,A,O,U];if(_>0&&N>0){var de=V/r;Z.push(F*de,j*de,_*de,N*de)}return E.drawImage.apply(E,[n].concat(Mi(Z.map(function(Le){return Math.floor(pt(Le))})))),C},setAspectRatio:function(t){var s=this.options;return!this.disabled&&!on(t)&&(s.aspectRatio=Math.max(0,t)||NaN,this.ready&&(this.initCropBox(),this.cropped&&this.renderCropBox())),this},setDragMode:function(t){var s=this.options,n=this.dragBox,i=this.face;if(this.ready&&!this.disabled){var a=t===Dn,l=s.movable&&t===Ni;t=a||l?t:Fi,s.dragMode=t,St(n,Vt,t),ct(n,pn,a),ct(n,hn,l),s.cropBoxMovable||(St(i,Vt,t),ct(i,pn,a),ct(i,hn,l))}return this}},ym=Ne.Cropper,Ki=function(){function e(t){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(Ah(this,e),!t||!Yh.test(t.tagName))throw new Error("The first argument is required and must be an <img> or <canvas> element.");this.element=t,this.options=ae({},ni,ut(s)&&s),this.cropped=!1,this.disabled=!1,this.pointers={},this.ready=!1,this.reloading=!1,this.replaced=!1,this.sized=!1,this.sizing=!1,this.init()}return Oh(e,[{key:"init",value:function(){var s=this.element,n=s.tagName.toLowerCase(),i;if(!s[oe]){if(s[oe]=this,n==="img"){if(this.isImg=!0,i=s.getAttribute("src")||"",this.originalUrl=i,!i)return;i=s.src}else n==="canvas"&&window.HTMLCanvasElement&&(i=s.toDataURL());this.load(i)}}},{key:"load",value:function(s){var n=this;if(s){this.url=s,this.imageData={};var i=this.element,a=this.options;if(!a.rotatable&&!a.scalable&&(a.checkOrientation=!1),!a.checkOrientation||!window.ArrayBuffer){this.clone();return}if(Hh.test(s)){Wh.test(s)?this.read(dm(s)):this.clone();return}var l=new XMLHttpRequest,r=this.clone.bind(this);this.reloading=!0,this.xhr=l,l.onabort=r,l.onerror=r,l.ontimeout=r,l.onprogress=function(){l.getResponseHeader("content-type")!==si&&l.abort()},l.onload=function(){n.read(l.response)},l.onloadend=function(){n.reloading=!1,n.xhr=null},a.checkCrossOrigin&&ai(s)&&i.crossOrigin&&(s=ii(s)),l.open("GET",s,!0),l.responseType="arraybuffer",l.withCredentials=i.crossOrigin==="use-credentials",l.send()}}},{key:"read",value:function(s){var n=this.options,i=this.imageData,a=cm(s),l=0,r=1,p=1;if(a>1){this.url=um(s,si);var c=pm(a);l=c.rotate,r=c.scaleX,p=c.scaleY}n.rotatable&&(i.rotate=l),n.scalable&&(i.scaleX=r,i.scaleY=p),this.clone()}},{key:"clone",value:function(){var s=this.element,n=this.url,i=s.crossOrigin,a=n;this.options.checkCrossOrigin&&ai(n)&&(i||(i="anonymous"),a=ii(n)),this.crossOrigin=i,this.crossOriginUrl=a;var l=document.createElement("img");i&&(l.crossOrigin=i),l.src=a||n,l.alt=s.alt||"The image to crop",this.image=l,l.onload=this.start.bind(this),l.onerror=this.stop.bind(this),ce(l,Ka),s.parentNode.insertBefore(l,s.nextSibling)}},{key:"start",value:function(){var s=this,n=this.image;n.onload=null,n.onerror=null,this.sizing=!0;var i=Ne.navigator&&/(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(Ne.navigator.userAgent),a=function(c,h){ae(s.imageData,{naturalWidth:c,naturalHeight:h,aspectRatio:c/h}),s.initialImageData=ae({},s.imageData),s.sizing=!1,s.sized=!0,s.build()};if(n.naturalWidth&&!i){a(n.naturalWidth,n.naturalHeight);return}var l=document.createElement("img"),r=document.body||document.documentElement;this.sizingImage=l,l.onload=function(){a(l.width,l.height),i||r.removeChild(l)},l.src=n.src,i||(l.style.cssText="left:0;max-height:none!important;max-width:none!important;min-height:0!important;min-width:0!important;opacity:0;position:absolute;top:0;z-index:-1;",r.appendChild(l))}},{key:"stop",value:function(){var s=this.image;s.onload=null,s.onerror=null,s.parentNode.removeChild(s),this.image=null}},{key:"build",value:function(){if(!(!this.sized||this.ready)){var s=this.element,n=this.options,i=this.image,a=s.parentNode,l=document.createElement("div");l.innerHTML=Gh;var r=l.querySelector(".".concat(oe,"-container")),p=r.querySelector(".".concat(oe,"-canvas")),c=r.querySelector(".".concat(oe,"-drag-box")),h=r.querySelector(".".concat(oe,"-crop-box")),m=h.querySelector(".".concat(oe,"-face"));this.container=a,this.cropper=r,this.canvas=p,this.dragBox=c,this.cropBox=h,this.viewBox=r.querySelector(".".concat(oe,"-view-box")),this.face=m,p.appendChild(i),ce(s,we),a.insertBefore(r,s.nextSibling),De(i,Ka),this.initPreview(),this.bind(),n.initialAspectRatio=Math.max(0,n.initialAspectRatio)||NaN,n.aspectRatio=Math.max(0,n.aspectRatio)||NaN,n.viewMode=Math.max(0,Math.min(3,Math.round(n.viewMode)))||0,ce(h,we),n.guides||ce(h.getElementsByClassName("".concat(oe,"-dashed")),we),n.center||ce(h.getElementsByClassName("".concat(oe,"-center")),we),n.background&&ce(r,"".concat(oe,"-bg")),n.highlight||ce(m,Nh),n.cropBoxMovable&&(ce(m,hn),St(m,Vt,Rn)),n.cropBoxResizable||(ce(h.getElementsByClassName("".concat(oe,"-line")),we),ce(h.getElementsByClassName("".concat(oe,"-point")),we)),this.render(),this.ready=!0,this.setDragMode(n.dragMode),n.autoCrop&&this.crop(),this.setData(n.data),ye(n.ready)&&Se(s,xa,n.ready,{once:!0}),ht(s,xa)}}},{key:"unbuild",value:function(){if(this.ready){this.ready=!1,this.unbind(),this.resetPreview();var s=this.cropper.parentNode;s&&s.removeChild(this.cropper),De(this.element,we)}}},{key:"uncreate",value:function(){this.ready?(this.unbuild(),this.ready=!1,this.cropped=!1):this.sizing?(this.sizingImage.onload=null,this.sizing=!1,this.sized=!1):this.reloading?(this.xhr.onabort=null,this.xhr.abort()):this.image&&this.stop()}}],[{key:"noConflict",value:function(){return window.Cropper=ym,e}},{key:"setDefaults",value:function(s){ae(ni,ut(s)&&s)}}])}();ae(Ki.prototype,hm,mm,fm,gm,bm,vm);ge.add(Lt);const wm={props:{trigger:{type:[String,window.Element],required:!0},submitHandler:{type:Function,required:!0},cropperOptions:{type:Object,default(){return{aspectRatio:1,autoCropArea:1,viewMode:1,movable:!1,zoomable:!1,guides:!1}}},mimes:{type:String,default:"image/png, image/gif, image/jpeg, image/bmp, image/x-icon"},saveButtonLabel:{type:String},saveWithoutCroppingButtonlabel:{type:String},cancelButtonLabel:{type:String}},data(){return{cropper:void 0,dataUrl:void 0,filename:void 0,submitting:!1}},computed:{saveText(){return this.saveButtonLabel||this.$t("image_cropper.save")},saveWithoutCroppingText(){return this.saveWithoutCroppingButtonlabel||this.$t("image_cropper.save_without_cropping")},cancelText(){return this.cancelButtonLabel||this.$t("image_cropper.cancel")}},methods:{destroy(){this.cropper&&this.cropper.destroy(),this.$refs.input.value="",this.dataUrl=void 0,this.$emit("close")},submit(e=!0){this.submitting=!0,this.submitHandler(e&&this.cropper,this.file).then(()=>this.destroy()).finally(()=>{this.submitting=!1})},pickImage(){this.$refs.input.click()},createCropper(){this.cropper=new Ki(this.$refs.img,this.cropperOptions)},getTriggerDOM(){return typeof this.trigger=="object"?this.trigger:document.querySelector(this.trigger)},readFile(){const e=this.$refs.input;if(e.files!=null&&e.files[0]!=null){this.file=e.files[0];const t=new window.FileReader;t.onload=s=>{this.dataUrl=s.target.result,this.$emit("open")},t.readAsDataURL(this.file),this.$emit("changed",this.file,t)}}},mounted(){const e=this.getTriggerDOM();e?e.addEventListener("click",this.pickImage):this.$emit("error","No image make trigger found.","user"),this.$refs.input.addEventListener("change",this.readFile)},beforeUnmount:function(){const e=this.getTriggerDOM();e&&e.removeEventListener("click",this.pickImage),this.$refs.input.removeEventListener("change",this.readFile)}},$m={class:"image-cropper"},km={key:0},Cm={class:"image-cropper-image-container"},Tm=["src"],Vm={class:"image-cropper-buttons-wrapper"},Sm=["disabled","textContent"],Lm=["disabled","textContent"],Pm=["disabled","textContent"],Im=["accept"];function Em(e,t,s,n,i,a){const l=L("FAIcon");return f(),w("div",$m,[e.dataUrl?(f(),w("div",km,[o("div",Cm,[o("img",{ref:"img",src:e.dataUrl,alt:"",onLoad:t[0]||(t[0]=rn((...r)=>e.createCropper&&e.createCropper(...r),["stop"]))},null,40,Tm)]),o("div",Vm,[o("button",{class:"button-default btn",type:"button",disabled:e.submitting,onClick:t[1]||(t[1]=r=>e.submit()),textContent:d(e.saveText)},null,8,Sm),o("button",{class:"button-default btn",type:"button",disabled:e.submitting,onClick:t[2]||(t[2]=(...r)=>e.destroy&&e.destroy(...r)),textContent:d(e.cancelText)},null,8,Lm),o("button",{class:"button-default btn",type:"button",disabled:e.submitting,onClick:t[3]||(t[3]=r=>e.submit(!1)),textContent:d(e.saveWithoutCroppingText)},null,8,Pm),e.submitting?(f(),H(l,{key:0,spin:"",icon:"circle-notch"})):T("",!0)])])):T("",!0),o("input",{ref:"input",type:"file",class:"input image-cropper-img-input",accept:e.mimes},null,8,Im)])}const _m=J(wm,[["render",Em]]);ge.add(Gt,gi,Lt);const Am={data(){return{newName:this.$store.state.users.currentUser.name_unescaped,newBio:nh(this.$store.state.users.currentUser.description),newLocked:this.$store.state.users.currentUser.locked,newBirthday:this.$store.state.users.currentUser.birthday,showBirthday:this.$store.state.users.currentUser.show_birthday,newFields:this.$store.state.users.currentUser.fields.map(e=>({name:e.name,value:e.value})),showRole:this.$store.state.users.currentUser.show_role,role:this.$store.state.users.currentUser.role,bot:this.$store.state.users.currentUser.bot,actorType:this.$store.state.users.currentUser.actor_type,pickAvatarBtnVisible:!0,bannerUploading:!1,backgroundUploading:!1,banner:null,bannerPreview:null,background:null,backgroundPreview:null,emailLanguage:this.$store.state.users.currentUser.language||[""]}},components:{ScopeSelector:fi,ImageCropper:_m,EmojiInput:Ll,Autosuggest:Ci,ProgressButton:Kt,Checkbox:$e,BooleanSetting:Et,InterfaceLanguageSwitcher:mi,Select:et},computed:{user(){return this.$store.state.users.currentUser},...It(),emojiUserSuggestor(){return Zt({emoji:[...this.$store.getters.standardEmojiList,...this.$store.state.instance.customEmoji],store:this.$store})},emojiSuggestor(){return Zt({emoji:[...this.$store.getters.standardEmojiList,...this.$store.state.instance.customEmoji]})},userSuggestor(){return Zt({store:this.$store})},fieldsLimits(){return this.$store.state.instance.fieldsLimits},maxFields(){return this.fieldsLimits?this.fieldsLimits.maxFields:0},defaultAvatar(){return this.$store.state.instance.server+this.$store.state.instance.defaultAvatar},defaultBanner(){return this.$store.state.instance.server+this.$store.state.instance.defaultBanner},isDefaultAvatar(){const e=this.$store.state.instance.defaultAvatar;return!this.$store.state.users.currentUser.profile_image_url||this.$store.state.users.currentUser.profile_image_url.includes(e)},isDefaultBanner(){const e=this.$store.state.instance.defaultBanner;return!this.$store.state.users.currentUser.cover_photo||this.$store.state.users.currentUser.cover_photo.includes(e)},isDefaultBackground(){return!this.$store.state.users.currentUser.background_image},avatarImgSrc(){const e=this.$store.state.users.currentUser.profile_image_url_original;return e||this.defaultAvatar},bannerImgSrc(){const e=this.$store.state.users.currentUser.cover_photo;return e||this.defaultBanner},groupActorAvailable(){return this.$store.state.instance.groupActorAvailable},availableActorTypes(){return this.groupActorAvailable?["Person","Service","Group"]:["Person","Service"]}},methods:{updateProfile(){const e={note:this.newBio,locked:this.newLocked,display_name:this.newName,fields_attributes:this.newFields.filter(t=>t!=null),actor_type:this.actorType,show_role:this.showRole,birthday:this.newBirthday||"",show_birthday:this.showBirthday};this.emailLanguage&&(e.language=ui.internalToBackendLocaleMulti(this.emailLanguage)),this.$store.state.api.backendInteractor.updateProfile({params:e}).then(t=>{this.newFields.splice(t.fields.length),Eh(this.newFields,t.fields),this.$store.commit("addNewUsers",[t]),this.$store.commit("setCurrentUser",t)})},changeVis(e){this.newDefaultScope=e},addField(){return this.newFields.length<this.maxFields?(this.newFields.push({name:"",value:""}),!0):!1},deleteField(e){this.newFields.splice(e,1)},uploadFile(e,t){const s=t.target.files[0];if(!s)return;if(s.size>this.$store.state.instance[e+"limit"]){const i=_o.fileSizeFormat(s.size),a=_o.fileSizeFormat(this.$store.state.instance[e+"limit"]);x().pushGlobalNotice({messageKey:"upload.error.message",messageArgs:[this.$t("upload.error.file_too_big",{filesize:i.num,filesizeunit:i.unit,allowedsize:a.num,allowedsizeunit:a.unit})],level:"error"});return}const n=new FileReader;n.onload=({target:i})=>{const a=i.result;this[e+"Preview"]=a,this[e]=s},n.readAsDataURL(s)},resetAvatar(){window.confirm(this.$t("settings.reset_avatar_confirm"))&&this.submitAvatar(void 0,"")},resetBanner(){window.confirm(this.$t("settings.reset_banner_confirm"))&&this.submitBanner("")},resetBackground(){window.confirm(this.$t("settings.reset_background_confirm"))&&this.submitBackground("")},submitAvatar(e,t){const s=this;return new Promise((n,i)=>{function a(l,r){s.$store.state.api.backendInteractor.updateProfileImages({avatar:l,avatarName:r}).then(p=>{s.$store.commit("addNewUsers",[p]),s.$store.commit("setCurrentUser",p),n()}).catch(p=>{s.displayUploadError(p),i(p)})}e?e.getCroppedCanvas().toBlob(l=>a(l,t.name),t.type):a(t,t.name)})},submitBanner(e){!this.bannerPreview&&e!==""||(this.bannerUploading=!0,this.$store.state.api.backendInteractor.updateProfileImages({banner:e}).then(t=>{this.$store.commit("addNewUsers",[t]),this.$store.commit("setCurrentUser",t),this.bannerPreview=null}).catch(this.displayUploadError).finally(()=>{this.bannerUploading=!1}))},submitBackground(e){!this.backgroundPreview&&e!==""||(this.backgroundUploading=!0,this.$store.state.api.backendInteractor.updateProfileImages({background:e}).then(t=>{this.$store.commit("addNewUsers",[t]),this.$store.commit("setCurrentUser",t),this.backgroundPreview=null}).catch(this.displayUploadError).finally(()=>{this.backgroundUploading=!1}))},displayUploadError(e){x().pushGlobalNotice({messageKey:"upload.error.message",messageArgs:[e.message],level:"error"})},propsToNative(e){return Pl(e)}}},Om={class:"profile-tab"},Um={class:"setting-item"},Mm={key:0},Bm={key:1},Rm=["onUpdate:modelValue","placeholder"],Dm=["onUpdate:modelValue","placeholder"],Nm=["onClick"],Fm=["value"],jm={key:2},qm=["disabled"],zm={class:"setting-item"},Hm={class:"visibility-notice"},Wm={class:"current-avatar-container"},Ym=["src"],Gm=["title"],Km={class:"setting-item"},Xm={class:"banner-background-preview"},Jm=["src"],Qm=["title"],Zm=["src"],xm={class:"setting-item"},ef={class:"banner-background-preview"},tf=["src"],sf=["title"],nf=["src"],of={class:"setting-item"},af={class:"setting-list"},lf={class:"setting-list suboptions"},rf={class:"setting-list suboptions"};function df(e,t,s,n,i,a){const l=L("EmojiInput"),r=L("Checkbox"),p=L("FAIcon"),c=L("Select"),h=L("interface-language-switcher"),m=L("image-cropper"),g=L("BooleanSetting");return f(),w("div",Om,[o("div",Um,[o("h2",null,d(e.$t("settings.name_bio")),1),o("p",null,d(e.$t("settings.name")),1),u(l,{modelValue:e.newName,"onUpdate:modelValue":t[1]||(t[1]=k=>e.newName=k),"enable-emoji-picker":"",suggest:e.emojiSuggestor},{default:v(k=>[ee(o("input",Mt({id:"username","onUpdate:modelValue":t[0]||(t[0]=V=>e.newName=V),class:"input name-changer"},e.propsToNative(k)),null,16),[[xt,e.newName]])]),_:1},8,["modelValue","suggest"]),o("p",null,d(e.$t("settings.bio")),1),u(l,{modelValue:e.newBio,"onUpdate:modelValue":t[3]||(t[3]=k=>e.newBio=k),"enable-emoji-picker":"",suggest:e.emojiUserSuggestor},{default:v(k=>[ee(o("textarea",Mt({"onUpdate:modelValue":t[2]||(t[2]=V=>e.newBio=V),class:"input bio resize-height"},e.propsToNative(k)),null,16),[[ue,e.newBio]])]),_:1},8,["modelValue","suggest"]),e.role==="admin"||e.role==="moderator"?(f(),w("p",Mm,[u(r,{modelValue:e.showRole,"onUpdate:modelValue":t[4]||(t[4]=k=>e.showRole=k)},{default:v(()=>[e.role==="admin"?(f(),w(K,{key:0},[$(d(e.$t("settings.show_admin_badge")),1)],64)):T("",!0),e.role==="moderator"?(f(),w(K,{key:1},[$(d(e.$t("settings.show_moderator_badge")),1)],64)):T("",!0)]),_:1},8,["modelValue"])])):T("",!0),o("div",null,[o("p",null,d(e.$t("settings.birthday.label")),1),ee(o("input",{id:"birthday","onUpdate:modelValue":t[5]||(t[5]=k=>e.newBirthday=k),type:"date",class:"input birthday-input"},null,512),[[ue,e.newBirthday]]),u(r,{modelValue:e.showBirthday,"onUpdate:modelValue":t[6]||(t[6]=k=>e.showBirthday=k)},{default:v(()=>[$(d(e.$t("settings.birthday.show_birthday")),1)]),_:1},8,["modelValue"])]),e.maxFields>0?(f(),w("div",Bm,[o("p",null,d(e.$t("settings.profile_fields.label")),1),(f(!0),w(K,null,ne(e.newFields,(k,V)=>(f(),w("div",{key:V,class:"profile-fields"},[u(l,{modelValue:e.newFields[V].name,"onUpdate:modelValue":S=>e.newFields[V].name=S,"enable-emoji-picker":"","hide-emoji-button":"",suggest:e.userSuggestor},{default:v(S=>[ee(o("input",Mt({"onUpdate:modelValue":C=>e.newFields[V].name=C,placeholder:e.$t("settings.profile_fields.name"),ref_for:!0},e.propsToNative(S),{class:"input"}),null,16,Rm),[[xt,e.newFields[V].name]])]),_:2},1032,["modelValue","onUpdate:modelValue","suggest"]),u(l,{modelValue:e.newFields[V].value,"onUpdate:modelValue":S=>e.newFields[V].value=S,"enable-emoji-picker":"","hide-emoji-button":"",suggest:e.userSuggestor},{default:v(S=>[ee(o("input",Mt({"onUpdate:modelValue":C=>e.newFields[V].value=C,placeholder:e.$t("settings.profile_fields.value"),ref_for:!0},e.propsToNative(S),{class:"input"}),null,16,Dm),[[xt,e.newFields[V].value]])]),_:2},1032,["modelValue","onUpdate:modelValue","suggest"]),o("button",{class:"delete-field button-unstyled -hover-highlight",onClick:S=>e.deleteField(V)},[e.newFields.length>1?(f(),H(p,{key:0,icon:"times"})):T("",!0)],8,Nm)]))),128)),e.newFields.length<e.maxFields?(f(),w("button",{key:0,class:"add-field faint button-unstyled -hover-highlight",onClick:t[7]||(t[7]=(...k)=>e.addField&&e.addField(...k))},[u(p,{icon:"plus"}),$(" "+d(e.$t("settings.profile_fields.add_field")),1)])):T("",!0)])):T("",!0),o("p",null,[o("label",null,[$(d(e.$t("settings.actor_type"))+" ",1),u(c,{modelValue:e.actorType,"onUpdate:modelValue":t[8]||(t[8]=k=>e.actorType=k)},{default:v(()=>[(f(!0),w(K,null,ne(e.availableActorTypes,k=>(f(),w("option",{key:k,value:k},d(e.$t("settings.actor_type_"+k)),9,Fm))),128))]),_:1},8,["modelValue"])])]),e.groupActorAvailable?(f(),w("div",jm,[o("small",null,d(e.$t("settings.actor_type_description")),1)])):T("",!0),o("p",null,[u(h,{"prompt-text":e.$t("settings.email_language"),language:e.emailLanguage,"set-language":k=>e.emailLanguage=k},null,8,["prompt-text","language","set-language"])]),o("button",{disabled:e.newName&&e.newName.length===0,class:"btn button-default",onClick:t[9]||(t[9]=(...k)=>e.updateProfile&&e.updateProfile(...k))},d(e.$t("settings.save")),9,qm)]),o("div",zm,[o("h2",null,d(e.$t("settings.avatar")),1),o("p",Hm,d(e.$t("settings.avatar_size_instruction")),1),o("div",Wm,[o("img",{src:e.user.profile_image_url_original,class:"current-avatar"},null,8,Ym),!e.isDefaultAvatar&&e.pickAvatarBtnVisible?(f(),w("button",{key:0,title:e.$t("settings.reset_avatar"),class:"button-unstyled reset-button",onClick:t[10]||(t[10]=(...k)=>e.resetAvatar&&e.resetAvatar(...k))},[u(p,{icon:"times",type:"button"})],8,Gm)):T("",!0)]),o("p",null,d(e.$t("settings.set_new_avatar")),1),ee(o("button",{id:"pick-avatar",class:"button-default btn",type:"button"},d(e.$t("settings.upload_a_photo")),513),[[rt,e.pickAvatarBtnVisible]]),u(m,{trigger:"#pick-avatar","submit-handler":e.submitAvatar,onOpen:t[11]||(t[11]=k=>e.pickAvatarBtnVisible=!1),onClose:t[12]||(t[12]=k=>e.pickAvatarBtnVisible=!0)},null,8,["submit-handler"])]),o("div",Km,[o("h2",null,d(e.$t("settings.profile_banner")),1),o("div",Xm,[o("img",{src:e.user.cover_photo},null,8,Jm),e.isDefaultBanner?T("",!0):(f(),w("button",{key:0,class:"button-unstyled reset-button",title:e.$t("settings.reset_profile_banner"),onClick:t[13]||(t[13]=(...k)=>e.resetBanner&&e.resetBanner(...k))},[u(p,{icon:"times",type:"button"})],8,Qm))]),o("p",null,d(e.$t("settings.set_new_profile_banner")),1),e.bannerPreview?(f(),w("img",{key:0,class:"banner-background-preview",src:e.bannerPreview},null,8,Zm)):T("",!0),o("div",null,[o("input",{type:"file",class:"input",onChange:t[14]||(t[14]=k=>e.uploadFile("banner",k))},null,32)]),e.bannerUploading?(f(),H(p,{key:1,class:"uploading",spin:"",icon:"circle-notch"})):e.bannerPreview?(f(),w("button",{key:2,class:"btn button-default",onClick:t[15]||(t[15]=k=>e.submitBanner(e.banner))},d(e.$t("settings.save")),1)):T("",!0)]),o("div",xm,[o("h2",null,d(e.$t("settings.profile_background")),1),o("div",ef,[o("img",{src:e.user.background_image},null,8,tf),e.isDefaultBackground?T("",!0):(f(),w("button",{key:0,class:"button-unstyled reset-button",title:e.$t("settings.reset_profile_background"),onClick:t[16]||(t[16]=(...k)=>e.resetBackground&&e.resetBackground(...k))},[u(p,{icon:"times",type:"button"})],8,sf))]),o("p",null,d(e.$t("settings.set_new_profile_background")),1),e.backgroundPreview?(f(),w("img",{key:0,class:"banner-background-preview",src:e.backgroundPreview},null,8,nf)):T("",!0),o("div",null,[o("input",{type:"file",class:"input",onChange:t[17]||(t[17]=k=>e.uploadFile("background",k))},null,32)]),e.backgroundUploading?(f(),H(p,{key:1,class:"uploading",spin:"",icon:"circle-notch"})):e.backgroundPreview?(f(),w("button",{key:2,class:"btn button-default",onClick:t[18]||(t[18]=k=>e.submitBackground(e.background))},d(e.$t("settings.save")),1)):T("",!0)]),o("div",of,[o("h2",null,d(e.$t("settings.account_privacy")),1),o("ul",af,[o("li",null,[u(g,{source:"profile",path:"locked"},{default:v(()=>[$(d(e.$t("settings.lock_account_description")),1)]),_:1})]),o("li",null,[u(g,{source:"profile",path:"discoverable"},{default:v(()=>[$(d(e.$t("settings.discoverable")),1)]),_:1})]),o("li",null,[u(g,{source:"profile",path:"allowFollowingMove"},{default:v(()=>[$(d(e.$t("settings.allow_following_move")),1)]),_:1})]),o("li",null,[u(g,{source:"profile",path:"hideFavorites"},{default:v(()=>[$(d(e.$t("settings.hide_favorites_description")),1)]),_:1})]),o("li",null,[u(g,{source:"profile",path:"hideFollowers"},{default:v(()=>[$(d(e.$t("settings.hide_followers_description")),1)]),_:1}),o("ul",lf,[o("li",null,[u(g,{source:"profile",path:"hideFollowersCount","parent-path":"hideFollowers"},{default:v(()=>[$(d(e.$t("settings.hide_followers_count_description")),1)]),_:1})])])]),o("li",null,[u(g,{source:"profile",path:"hideFollows"},{default:v(()=>[$(d(e.$t("settings.hide_follows_description")),1)]),_:1}),o("ul",rf,[o("li",null,[u(g,{source:"profile",path:"hideFollowsCount","parent-path":"hideFollows"},{default:v(()=>[$(d(e.$t("settings.hide_follows_count_description")),1)]),_:1})])])])])])])}const uf=J(Am,[["render",df]]),cf={components:{NumberSetting:sd}};function pf(e,t,s,n,i,a){const l=L("NumberSetting");return f(),H(l,Il(El(e.$attrs)),{default:v(()=>[Ke(e.$slots,"default")]),_:3},16)}const Xi=J(cf,[["render",pf]]);ge.add(bi);const hf={data(){return{subjectLineOptions:["email","noop","masto"].map(e=>({key:e,value:e,label:this.$t(`settings.subject_line_${e==="masto"?"mastodon":e}`)})),conversationDisplayOptions:["tree","linear"].map(e=>({key:e,value:e,label:this.$t(`settings.conversation_display_${e}`)})),absoluteTime12hOptions:["24h","12h"].map(e=>({key:e,value:e,label:this.$t(`settings.absolute_time_format_12h_${e}`)})),conversationOtherRepliesButtonOptions:["below","inside"].map(e=>({key:e,value:e,label:this.$t(`settings.conversation_other_replies_button_${e}`)})),mentionLinkDisplayOptions:["short","full_for_remote","full"].map(e=>({key:e,value:e,label:this.$t(`settings.mention_link_display_${e}`)})),userPopoverAvatarActionOptions:["close","zoom","open"].map(e=>({key:e,value:e,label:this.$t(`settings.user_popover_avatar_action_${e}`)})),unsavedPostActionOptions:["save","discard","confirm"].map(e=>({key:e,value:e,label:this.$t(`settings.unsaved_post_action_${e}`)})),loopSilentAvailable:Object.getOwnPropertyDescriptor(HTMLVideoElement.prototype,"mozHasAudio")||Object.getOwnPropertyDescriptor(HTMLMediaElement.prototype,"webkitAudioDecodedByteCount")||Object.getOwnPropertyDescriptor(HTMLMediaElement.prototype,"audioTracks")}},components:{BooleanSetting:Et,ChoiceSetting:En,IntegerSetting:In,FloatSetting:Xi,UnitSetting:On,InterfaceLanguageSwitcher:mi,ScopeSelector:fi,ProfileSettingIndicator:ki},computed:{postFormats(){return this.$store.state.instance.postFormats||[]},postContentOptions(){return this.postFormats.map(e=>({key:e,value:e,label:this.$t(`post_status.content_type["${e}"]`)}))},language:{get:function(){return this.$store.getters.mergedConfig.interfaceLanguage},set:function(e){this.$store.dispatch("setOption",{name:"interfaceLanguage",value:e})}},instanceShoutboxPresent(){return this.$store.state.instance.shoutAvailable},instanceSpecificPanelPresent(){return this.$store.state.instance.showInstanceSpecificPanel},...It()},methods:{changeDefaultScope(e){this.$store.dispatch("setProfileOption",{name:"defaultScope",value:e})}}},mf=["label"],ff={class:"setting-item"},gf={class:"setting-list"},bf={key:0},vf={class:"setting-list suboptions"},yf={key:1},wf={class:"select-multiple"},$f={class:"label"},kf={class:"option-list"},Cf={class:"setting-item"},Tf={class:"setting-list"},Vf={key:0,class:"setting-list suboptions"},Sf={key:1,class:"setting-list suboptions"},Lf={class:"setting-list suboptions"},Pf={class:"setting-list suboptions"},If={class:"setting-list suboptions"},Ef={key:0,class:"unavailable"},_f={key:2},Af={key:3},Of={key:4},Uf={key:0,class:"setting-item"},Mf={class:"setting-list"},Bf={for:"default-vis"},Rf={key:0},Df={key:1};function Nf(e,t,s,n,i,a){const l=L("interface-language-switcher"),r=L("BooleanSetting"),p=L("ChoiceSetting"),c=L("IntegerSetting"),h=L("UnitSetting"),m=L("FAIcon"),g=L("ProfileSettingIndicator"),k=L("ScopeSelector");return f(),w("div",{label:e.$t("settings.general")},[o("div",ff,[o("h2",null,d(e.$t("settings.interface")),1),o("ul",gf,[o("li",null,[u(l,{"prompt-text":e.$t("settings.interfaceLanguage"),language:e.language,"set-language":V=>e.language=V},null,8,["prompt-text","language","set-language"])]),e.instanceSpecificPanelPresent?(f(),w("li",bf,[u(r,{path:"hideISP"},{default:v(()=>[$(d(e.$t("settings.hide_isp")),1)]),_:1})])):T("",!0),o("li",null,[u(r,{path:"stopGifs"},{default:v(()=>[$(d(e.$t("settings.stop_gifs")),1)]),_:1})]),o("li",null,[u(r,{path:"streaming"},{default:v(()=>[$(d(e.$t("settings.streaming")),1)]),_:1}),o("ul",vf,[o("li",null,[u(r,{path:"pauseOnUnfocused","parent-path":"streaming"},{default:v(()=>[$(d(e.$t("settings.pause_on_unfocused")),1)]),_:1})])])]),o("li",null,[u(r,{path:"useStreamingApi",expert:"1"},{default:v(()=>[$(d(e.$t("settings.useStreamingApi")),1)]),_:1})]),o("li",null,[u(r,{path:"virtualScrolling",expert:"1"},{default:v(()=>[$(d(e.$t("settings.virtual_scrolling")),1)]),_:1})]),o("li",null,[u(p,{id:"userPopoverAvatarAction",path:"userPopoverAvatarAction",options:e.userPopoverAvatarActionOptions,expert:"1"},{default:v(()=>[$(d(e.$t("settings.user_popover_avatar_action")),1)]),_:1},8,["options"])]),o("li",null,[u(r,{path:"userPopoverOverlay",expert:"1"},{default:v(()=>[$(d(e.$t("settings.user_popover_avatar_overlay")),1)]),_:1})]),o("li",null,[u(r,{path:"alwaysShowNewPostButton",expert:"1"},{default:v(()=>[$(d(e.$t("settings.always_show_post_button")),1)]),_:1})]),o("li",null,[u(r,{path:"autohideFloatingPostButton",expert:"1"},{default:v(()=>[$(d(e.$t("settings.autohide_floating_post_button")),1)]),_:1})]),e.instanceShoutboxPresent?(f(),w("li",yf,[u(r,{path:"hideShoutbox",expert:"1"},{default:v(()=>[$(d(e.$t("settings.hide_shoutbox")),1)]),_:1})])):T("",!0),o("li",wf,[o("span",$f,d(e.$t("settings.confirm_dialogs")),1),o("ul",kf,[o("li",null,[u(r,{path:"modalOnRepeat"},{default:v(()=>[$(d(e.$t("settings.confirm_dialogs_repeat")),1)]),_:1})]),o("li",null,[u(r,{path:"modalOnUnfollow"},{default:v(()=>[$(d(e.$t("settings.confirm_dialogs_unfollow")),1)]),_:1})]),o("li",null,[u(r,{path:"modalOnBlock"},{default:v(()=>[$(d(e.$t("settings.confirm_dialogs_block")),1)]),_:1})]),o("li",null,[u(r,{path:"modalOnMute"},{default:v(()=>[$(d(e.$t("settings.confirm_dialogs_mute")),1)]),_:1})]),o("li",null,[u(r,{path:"modalOnMuteConversation"},{default:v(()=>[$(d(e.$t("settings.confirm_dialogs_mute_conversation")),1)]),_:1})]),o("li",null,[u(r,{path:"modalOnMuteDomain"},{default:v(()=>[$(d(e.$t("settings.confirm_dialogs_mute_domain")),1)]),_:1})]),o("li",null,[u(r,{path:"modalOnDelete"},{default:v(()=>[$(d(e.$t("settings.confirm_dialogs_delete")),1)]),_:1})]),o("li",null,[u(r,{path:"modalOnLogout"},{default:v(()=>[$(d(e.$t("settings.confirm_dialogs_logout")),1)]),_:1})]),o("li",null,[u(r,{path:"modalOnApproveFollow"},{default:v(()=>[$(d(e.$t("settings.confirm_dialogs_approve_follow")),1)]),_:1})]),o("li",null,[u(r,{path:"modalOnDenyFollow"},{default:v(()=>[$(d(e.$t("settings.confirm_dialogs_deny_follow")),1)]),_:1})]),o("li",null,[u(r,{path:"modalOnRemoveUserFromFollowers"},{default:v(()=>[$(d(e.$t("settings.confirm_dialogs_remove_follower")),1)]),_:1})])])])])]),o("div",Cf,[o("h2",null,d(e.$t("settings.post_look_feel")),1),o("ul",Tf,[o("li",null,[u(p,{id:"conversationDisplay",path:"conversationDisplay",options:e.conversationDisplayOptions},{default:v(()=>[$(d(e.$t("settings.conversation_display")),1)]),_:1},8,["options"])]),e.mergedConfig.conversationDisplay!=="linear"?(f(),w("ul",Vf,[o("li",null,[u(r,{path:"conversationTreeAdvanced"},{default:v(()=>[$(d(e.$t("settings.tree_advanced")),1)]),_:1})]),o("li",null,[u(r,{path:"conversationTreeFadeAncestors",expert:1},{default:v(()=>[$(d(e.$t("settings.tree_fade_ancestors")),1)]),_:1})]),o("li",null,[u(c,{path:"maxDepthInThread",min:3,expert:1},{default:v(()=>[$(d(e.$t("settings.max_depth_in_thread")),1)]),_:1})]),o("li",null,[u(p,{id:"conversationOtherRepliesButton",path:"conversationOtherRepliesButton",options:e.conversationOtherRepliesButtonOptions,expert:1},{default:v(()=>[$(d(e.$t("settings.conversation_other_replies_button")),1)]),_:1},8,["options"])])])):T("",!0),o("li",null,[u(r,{path:"collapseMessageWithSubject"},{default:v(()=>[$(d(e.$t("settings.collapse_subject")),1)]),_:1})]),o("li",null,[u(r,{path:"emojiReactionsOnTimeline",expert:"1"},{default:v(()=>[$(d(e.$t("settings.emoji_reactions_on_timeline")),1)]),_:1})]),o("li",null,[e.user?(f(),H(r,{key:0,source:"profile",path:"stripRichContent",expert:"1"},{default:v(()=>[$(d(e.$t("settings.no_rich_text_description")),1)]),_:1})):T("",!0)]),o("li",null,[u(r,{path:"useAbsoluteTimeFormat",expert:"1"},{default:v(()=>[$(d(e.$t("settings.absolute_time_format")),1)]),_:1})]),e.mergedConfig.useAbsoluteTimeFormat?(f(),w("ul",Sf,[o("li",null,[u(h,{path:"absoluteTimeFormatMinAge","unit-set":"time",units:["s","m","h","d"],min:0},{default:v(()=>[$(d(e.$t("settings.absolute_time_format_min_age")),1)]),_:1})]),o("li",null,[u(p,{id:"absoluteTime12h",path:"absoluteTime12h",options:e.absoluteTime12hOptions,expert:1},{default:v(()=>[$(d(e.$t("settings.absolute_time_format_12h")),1)]),_:1},8,["options"])])])):T("",!0),o("h3",null,d(e.$t("settings.attachments")),1),o("li",null,[u(r,{path:"imageCompression",expert:"1"},{default:v(()=>[$(d(e.$t("settings.image_compression")),1)]),_:1})]),o("ul",Lf,[o("li",null,[u(r,{path:"alwaysUseJpeg",expert:"1","parent-path":"imageCompression"},{default:v(()=>[$(d(e.$t("settings.always_use_jpeg")),1)]),_:1})])]),o("li",null,[u(r,{path:"useContainFit",expert:"1"},{default:v(()=>[$(d(e.$t("settings.use_contain_fit")),1)]),_:1})]),o("li",null,[u(r,{path:"hideNsfw"},{default:v(()=>[$(d(e.$t("settings.nsfw_clickthrough")),1)]),_:1})]),o("ul",Pf,[o("li",null,[u(r,{path:"preloadImage",expert:"1","parent-path":"hideNsfw"},{default:v(()=>[$(d(e.$t("settings.preload_images")),1)]),_:1})]),o("li",null,[u(r,{path:"useOneClickNsfw",expert:"1","parent-path":"hideNsfw"},{default:v(()=>[$(d(e.$t("settings.use_one_click_nsfw")),1)]),_:1})])]),o("li",null,[u(r,{path:"loopVideo",expert:"1"},{default:v(()=>[$(d(e.$t("settings.loop_video")),1)]),_:1}),o("ul",If,[o("li",null,[u(r,{path:"loopVideoSilentOnly",expert:"1","parent-path":"loopVideo",disabled:!e.loopSilentAvailable},{default:v(()=>[$(d(e.$t("settings.loop_video_silent_only")),1)]),_:1},8,["disabled"]),e.loopSilentAvailable?T("",!0):(f(),w("div",Ef,[u(m,{icon:"globe"}),$("! "+d(e.$t("settings.limited_availability")),1)]))])])]),o("li",null,[u(r,{path:"playVideosInModal",expert:"1"},{default:v(()=>[$(d(e.$t("settings.play_videos_in_modal")),1)]),_:1})]),o("h3",null,d(e.$t("settings.mention_links")),1),o("li",null,[u(p,{id:"mentionLinkDisplay",path:"mentionLinkDisplay",options:e.mentionLinkDisplayOptions},{default:v(()=>[$(d(e.$t("settings.mention_link_display")),1)]),_:1},8,["options"])]),o("li",null,[u(r,{path:"mentionLinkShowTooltip",expert:"1"},{default:v(()=>[$(d(e.$t("settings.mention_link_use_tooltip")),1)]),_:1})]),o("li",null,[u(r,{path:"mentionLinkShowAvatar"},{default:v(()=>[$(d(e.$t("settings.mention_link_show_avatar")),1)]),_:1})]),o("li",null,[u(r,{path:"mentionLinkFadeDomain",expert:"1"},{default:v(()=>[$(d(e.$t("settings.mention_link_fade_domain")),1)]),_:1})]),e.user?(f(),w("li",_f,[u(r,{path:"mentionLinkBoldenYou",expert:"1"},{default:v(()=>[$(d(e.$t("settings.mention_link_bolden_you")),1)]),_:1})])):T("",!0),e.expertLevel>0?(f(),w("h3",Af,d(e.$t("settings.fun")),1)):T("",!0),o("li",null,[u(r,{path:"greentext",expert:"1"},{default:v(()=>[$(d(e.$t("settings.greentext")),1)]),_:1})]),e.user?(f(),w("li",Of,[u(r,{path:"mentionLinkShowYous",expert:"1"},{default:v(()=>[$(d(e.$t("settings.show_yous")),1)]),_:1})])):T("",!0)])]),e.user?(f(),w("div",Uf,[o("h2",null,d(e.$t("settings.composing")),1),o("ul",Mf,[o("li",null,[o("label",Bf,[$(d(e.$t("settings.default_vis"))+" ",1),u(g,{"is-profile":!0}),u(k,{class:"scope-selector","show-all":!0,"user-default":e.$store.state.profileConfig.defaultScope,"initial-scope":e.$store.state.profileConfig.defaultScope,"on-scope-change":e.changeDefaultScope},null,8,["user-default","initial-scope","on-scope-change"])])]),o("li",null,[u(r,{path:"sensitiveByDefault"},{default:v(()=>[$(d(e.$t("settings.sensitive_by_default")),1)]),_:1})]),o("li",null,[u(r,{path:"scopeCopy",expert:"1"},{default:v(()=>[$(d(e.$t("settings.scope_copy")),1)]),_:1})]),o("li",null,[u(r,{path:"alwaysShowSubjectInput",expert:"1"},{default:v(()=>[$(d(e.$t("settings.subject_input_always_show")),1)]),_:1})]),o("li",null,[u(p,{id:"subjectLineBehavior",path:"subjectLineBehavior",options:e.subjectLineOptions,expert:"1"},{default:v(()=>[$(d(e.$t("settings.subject_line_behavior")),1)]),_:1},8,["options"])]),e.postFormats.length>0?(f(),w("li",Rf,[u(p,{id:"postContentType",path:"postContentType",options:e.postContentOptions},{default:v(()=>[$(d(e.$t("settings.post_status_content_type")),1)]),_:1},8,["options"])])):T("",!0),o("li",null,[u(r,{path:"minimalScopesMode",expert:"1"},{default:v(()=>[$(d(e.$t("settings.minimal_scopes_mode")),1)]),_:1})]),o("li",null,[u(r,{path:"padEmoji",expert:"1"},{default:v(()=>[$(d(e.$t("settings.pad_emoji")),1)]),_:1})]),o("li",null,[u(r,{path:"autocompleteSelect",expert:"1"},{default:v(()=>[$(d(e.$t("settings.autocomplete_select_first")),1)]),_:1})]),o("li",null,[u(r,{path:"autoSaveDraft"},{default:v(()=>[$(d(e.$t("settings.auto_save_draft")),1)]),_:1})]),e.mergedConfig.autoSaveDraft?T("",!0):(f(),w("li",Df,[u(p,{id:"unsavedPostAction",path:"unsavedPostAction",options:e.unsavedPostActionOptions},{default:v(()=>[$(d(e.$t("settings.unsaved_post_action")),1)]),_:1},8,["options"])]))])])):T("",!0)],8,mf)}const Ff=J(hf,[["render",Nf]]),jf=["px","rem","vw"];({...ze.components},{...ze.props}),{...ze.computed},{...ze.methods};ge.add(_l);const qf={components:{Checkbox:$e},props:{name:{required:!0,type:String},label:{required:!0,type:String},modelValue:{required:!1,type:String,default:void 0},fallback:{required:!1,type:String,default:void 0},disabled:{required:!1,type:Boolean,default:!1},showOptionalCheckbox:{required:!1,type:Boolean,default:!0},hideOptionalCheckbox:{required:!1,type:Boolean,default:!1}},emits:["update:modelValue"],computed:{present(){return typeof this.modelValue<"u"},validColor(){return zt(this.modelValue||this.fallback)},transparentColor(){return this.modelValue==="transparent"},computedColor(){return this.modelValue&&(this.modelValue.startsWith("--")||this.modelValue.startsWith("$"))}},methods:{updateValue:le.throttle(function(e){this.$emit("update:modelValue",e)},100)}},zf=["for"],Hf=["id","value","disabled"],Wf={key:1,class:"transparentIndicator"},Yf={key:3,class:"invalidIndicator"},Gf={class:"nativeColor"},Kf=["id","value","disabled"];function Xf(e,t,s,n,i,a){const l=L("Checkbox"),r=L("FAIcon");return f(),w("div",{class:Y(["color-input style-control",{disabled:!a.present||s.disabled}])},[o("label",{for:s.name,class:Y(["label",{faint:!a.present||s.disabled}])},d(s.label),11,zf),typeof s.fallback<"u"&&s.showOptionalCheckbox&&!s.hideOptionalCheckbox?(f(),H(l,{key:0,"model-value":a.present,disabled:s.disabled,class:"opt","onUpdate:modelValue":t[0]||(t[0]=p=>a.updateValue(typeof s.modelValue>"u"?s.fallback:void 0))},null,8,["model-value","disabled"])):T("",!0),o("div",{class:Y(["input color-input-field",{disabled:!a.present||s.disabled}])},[o("input",{id:s.name+"-t",class:Y(["textColor unstyled",{disabled:!a.present||s.disabled}]),type:"text",value:s.modelValue||s.fallback,disabled:!a.present||s.disabled,onInput:t[1]||(t[1]=p=>a.updateValue(p.target.value))},null,42,Hf),a.validColor?(f(),w("div",{key:0,class:"validIndicator",style:Xe({backgroundColor:s.modelValue||s.fallback})},null,4)):a.transparentColor?(f(),w("div",Wf)):a.computedColor?(f(),w("div",{key:2,class:"computedIndicator",style:Xe({backgroundColor:s.fallback})},null,4)):(f(),w("div",Yf)),o("label",Gf,[u(r,{icon:"eye-dropper"}),o("input",{id:s.name,class:Y(["unstyled",{disabled:!a.present||s.disabled}]),type:"color",value:s.modelValue||s.fallback,disabled:!a.present||s.disabled,onInput:t[2]||(t[2]=p=>a.updateValue(p.target.value))},null,42,Kf)])],2)],2)}const ft=J(qf,[["render",Xf]]),Jf=["disabled"],Ji={__name:"palette_editor",props:["modelValue","compact","apply","disabled"],emits:["update:modelValue","applyPalette"],setup(e,{emit:t}){ge.add(Al,Ol);const s=["bg","fg","text","link","accent","cRed","cBlue","cGreen","cOrange","wallpaper"],n=e,i=t,a=()=>s.reduce((k,V)=>n.modelValue[V]==null?k:{...k,[V]:n.modelValue[V]},{}),l=_n({filename:"pleroma_palette",extension:"json",getExportedObject:a}),r=Jt({accept:".json",onImport(k){i("update:modelValue",k)}}),p=()=>{l.exportData()},c=()=>{r.importData()},h=()=>{i("applyPalette",a())},m=k=>{if(k==="accent")return n.modelValue.link;if(k==="link")return n.modelValue.accent;if(k.startsWith("extra"))return"#FF00FF";if(k.startsWith("wallpaper"))return"#008080"},g=(k,V)=>{i("update:modelValue",{...n.modelValue,[k]:V})};return(k,V)=>{const S=L("FAIcon");return f(),w("div",{class:Y(["PaletteEditor",{"-compact":e.compact,"-apply":e.apply}])},[(f(),w(K,null,ne(s,C=>u(ft,{key:C,name:C,"model-value":n.modelValue[C],fallback:m(C),label:k.$t("settings.style.themes3.palette."+C),"onUpdate:modelValue":E=>g(C,E)},null,8,["name","model-value","fallback","label","onUpdate:modelValue"])),64)),o("button",{class:"btn button-default palette-import-button",onClick:c},[u(S,{icon:"file-import"}),$(" "+d(k.$t("settings.style.themes3.palette.import")),1)]),o("button",{class:"btn button-default palette-export-button",onClick:p},[u(S,{icon:"file-export"}),$(" "+d(k.$t("settings.style.themes3.palette.export")),1)]),e.apply?(f(),w("button",{key:0,class:Y(["btn button-default palette-apply-button",{disabled:e.disabled}]),disabled:e.disabled,onClick:h},d(k.$t("settings.style.themes3.palette.apply")),11,Jf)):T("",!0)],2)}}};ge.add(Gt,Ul,Ml,Bl);const Qf={components:{Checkbox:$e}},Zf={class:"theme-preview-container"},xf={class:"panel dummy"},eg={class:"panel-heading"},tg={class:"title"},sg={class:"faint"},ng={class:"alert error"},og={class:"btn button-default"},ag={class:"panel-body theme-preview-content"},ig={class:"post"},lg={class:"content"},rg={style:{"font-family":"var(--postCodeFont)"}},dg={style:{color:"var(--link)"}},ug={class:"icons"},cg={class:"after-post"},pg={class:"content"},hg={style:{color:"var(--linkFaint)"}},mg={class:"alert error"},fg=["value"],gg={class:"actions"},bg={class:"btn button-default"};function vg(e,t,s,n,i,a){const l=L("i18n-t"),r=L("FAIcon"),p=L("Checkbox");return f(),w("div",Zf,[t[4]||(t[4]=o("div",{class:"underlay underlay-preview"},null,-1)),o("div",xf,[o("div",eg,[o("h1",tg,[$(d(e.$t("settings.style.preview.header"))+" ",1),t[0]||(t[0]=o("span",{class:"badge -notification"}," 99 ",-1))]),o("span",sg,d(e.$t("settings.style.preview.header_faint")),1),o("span",ng,d(e.$t("settings.style.preview.error")),1),o("button",og,d(e.$t("settings.style.preview.button")),1)]),o("div",ag,[o("div",ig,[t[1]||(t[1]=o("div",{class:"avatar still-image"}," (   ) ",-1)),o("div",lg,[o("h4",null,d(e.$t("settings.style.preview.content")),1),u(l,{scope:"global",keypath:"settings.style.preview.text"},{default:v(()=>[o("code",rg,d(e.$t("settings.style.preview.mono")),1),o("a",dg,d(e.$t("settings.style.preview.link")),1)]),_:1}),o("div",ug,[u(r,{"fixed-width":"",style:{color:"var(--cBlue)"},class:"fa-scale-110 fa-old-padding",icon:"reply"}),u(r,{"fixed-width":"",style:{color:"var(--cGreen)"},class:"fa-scale-110 fa-old-padding",icon:"retweet"}),u(r,{"fixed-width":"",style:{color:"var(--cOrange)"},class:"fa-scale-110 fa-old-padding",icon:"star"}),u(r,{"fixed-width":"",style:{color:"var(--cRed)"},class:"fa-scale-110 fa-old-padding",icon:"times"})])])]),o("div",cg,[t[2]||(t[2]=o("div",{class:"avatar-alt"}," :^) ",-1)),o("div",pg,[u(l,{keypath:"settings.style.preview.fine_print",tag:"span",class:"faint",scope:"global"},{default:v(()=>[o("a",hg,d(e.$t("settings.style.preview.faint_link")),1)]),_:1})])]),t[3]||(t[3]=o("div",{class:"separator"},null,-1)),o("span",mg,d(e.$t("settings.style.preview.error")),1),o("input",{value:e.$t("settings.style.preview.input"),type:"text",class:"input"},null,8,fg),o("div",gg,[u(p,null,{default:v(()=>[$(d(e.$t("settings.style.preview.checkbox")),1)]),_:1}),o("button",bg,d(e.$t("settings.style.preview.button")),1)])])])])}const Fn=J(Qf,[["render",vg]]);ge.add(vi,Rl,Dl);const yg={components:{Select:et,Checkbox:$e,Popover:Sn},props:["name","label","modelValue","fallback","options","no-inherit"],mounted(){x().queryLocalFonts()},emits:["update:modelValue"],data(){return{manualEntry:!1,availableOptions:[this.noInherit?"":"inherit","serif","sans-serif","monospace",...this.options||[]].filter(e=>e)}},methods:{toggleManualEntry(){this.manualEntry=!this.manualEntry}},computed:{present(){return typeof this.modelValue<"u"},localFontsList(){return x().localFonts},localFontsSize(){var e;return(e=x().localFonts)==null?void 0:e.length}}},wg={class:"font-control"},$g=["id","for"],kg={key:1,class:"font-input"},Cg=["id","for"],Tg=["id","for"],Vg={key:2,class:"btn-group"},Sg=["title"],Lg=["id","model-value"],Pg={key:3,class:"btn-group"},Ig=["title"],Eg=["label"],_g=["value"],Ag=["label"],Og=["value"],Ug=["label"],Mg={disabled:""},Bg={disabled:""};function Rg(e,t,s,n,i,a){var h,m;const l=L("Checkbox"),r=L("i18n-t"),p=L("FAIcon"),c=L("Select");return f(),w("div",wg,[o("label",{id:e.name+"-label",for:e.manualEntry?e.name:e.name+"-font-switcher",class:"label"},d(e.$t("settings.style.themes3.font.label",{label:e.label})),9,$g),t[7]||(t[7]=$(" "+d(" ")+" ")),typeof e.fallback<"u"?(f(),H(l,{key:0,id:e.name+"-o",class:"font-checkbox","model-value":e.present,onChange:t[0]||(t[0]=g=>e.$emit("update:modelValue",typeof e.modelValue>"u"?e.fallback:void 0))},{default:v(()=>[$(d(e.$t("settings.style.themes3.define")),1)]),_:1},8,["id","model-value"])):T("",!0),(h=e.modelValue)!=null&&h.family?(f(),w("div",kg,[e.manualEntry?(f(),w("label",{key:0,id:e.name+"-label",for:e.manualEntry?e.name:e.name+"-font-switcher",class:"label"},[u(r,{keypath:"settings.style.themes3.font.entry",tag:"span",scope:"global"},{fontFamily:v(()=>t[5]||(t[5]=[o("code",null,"font-family",-1)])),_:1})],8,Cg)):(f(),w("label",{key:1,id:e.name+"-label",for:e.manualEntry?e.name:e.name+"-font-switcher",class:"label"},d(e.$t("settings.style.themes3.font.select")),9,Tg)),t[6]||(t[6]=$(" "+d(" ")+" ")),e.manualEntry?(f(),w("span",Vg,[o("button",{class:"btn button-default",title:e.$t("settings.style.themes3.font.lookup_local_fonts"),onClick:t[1]||(t[1]=(...g)=>e.toggleManualEntry&&e.toggleManualEntry(...g))},[u(p,{"fixed-width":"",icon:"font"})],8,Sg),o("input",{id:e.name,"model-value":e.modelValue.family,class:"input custom-font",type:"text","on:update:modelValue":t[2]||(t[2]=g=>e.$emit("update:modelValue",{...e.modelValue||{},family:g.target.value}))},null,40,Lg)])):(f(),w("span",Pg,[o("button",{class:"btn button-default",title:e.$t("settings.style.themes3.font.enter_manually"),onClick:t[3]||(t[3]=(...g)=>e.toggleManualEntry&&e.toggleManualEntry(...g))},[u(p,{"fixed-width":"",icon:"keyboard"})],8,Ig),u(c,{id:e.name+"-local-font-switcher","model-value":(m=e.modelValue)==null?void 0:m.family,class:"custom-font","onUpdate:modelValue":t[4]||(t[4]=g=>e.$emit("update:modelValue",{...e.modelValue||{},family:g}))},{default:v(()=>[o("optgroup",{label:e.$t("settings.style.themes3.font.group-builtin")},[(f(!0),w(K,null,ne(e.availableOptions,g=>(f(),w("option",{key:g,value:g,style:Xe({fontFamily:g==="inherit"?null:g})},d(e.$t("settings.style.themes3.font.builtin."+g)),13,_g))),128))],8,Eg),e.localFontsSize>0?(f(),w("optgroup",{key:0,label:e.$t("settings.style.themes3.font.group-local")},[(f(!0),w(K,null,ne(e.localFontsList,g=>(f(),w("option",{key:g,value:g,style:Xe({fontFamily:g})},d(g),13,Og))),128))],8,Ag)):(f(),w("optgroup",{key:1,label:e.$t("settings.style.themes3.font.group-local")},[o("option",Mg,d(e.$t("settings.style.themes3.font.local-unavailable1")),1),o("option",Bg,d(e.$t("settings.style.themes3.font.local-unavailable2")),1)],8,Ug))]),_:1},8,["id","model-value"])]))])):T("",!0)])}const Qi=J(yg,[["render",Rg]]);ge.add(bi);const Dg={data(){return{availableThemesV3:[],availableThemesV2:[],bundledPalettes:[],compilationCache:{},fileImporter:Jt({accept:".json, .iss",validator:this.importValidator,onImport:this.onImport,parser:this.importParser,onImportFailure:this.onImportFailure}),palettesKeys:["bg","fg","link","text","cRed","cGreen","cBlue","cOrange"],userPalette:{},intersectionObserver:null,thirdColumnModeOptions:["none","notifications","postform"].map(e=>({key:e,value:e,label:this.$t(`settings.third_column_mode_${e}`)})),forcedRoundnessOptions:["disabled","sharp","nonsharp","round"].map((e,t)=>({key:e,value:t-1,label:this.$t(`settings.style.themes3.hacks.forced_roundness_mode_${e}`)})),underlayOverrideModes:["none","opaque","transparent"].map(e=>({key:e,value:e,label:this.$t(`settings.style.themes3.hacks.underlay_override_mode_${e}`)}))}},components:{BooleanSetting:Et,ChoiceSetting:En,IntegerSetting:In,FloatSetting:Xi,UnitSetting:On,ProfileSettingIndicator:ki,FontControl:Qi,Preview:Fn,PaletteEditor:Ji},mounted(){x().getThemeData();const e=t=>{const s=t[0].toUpperCase()+t.slice(1),n=this.$store.state.instance[`${t}sIndex`];let i;return n?i=Promise.resolve(n):i=x()[`fetch${s}sIndex`](),i.then(a=>Object.entries(a).map(([l,r])=>[l,r()]))};e("style").then(t=>{t.forEach(([s,n])=>n.then(i=>{const a=i.find(l=>l.component==="@meta");this.availableThemesV3.push({key:s,data:i,name:a.directives.name,version:"v3"})}))}),e("theme").then(t=>{t.forEach(([s,n])=>n.then(i=>{i?Array.isArray(i)?console.warn(`Theme with key ${s} is a v1 theme and should be moved to static/palettes/index.json`):!i.source&&!i.theme?console.warn(`Theme with key ${s} is malformed`):this.availableThemesV2.push({key:s,data:i,name:i.name,version:"v2"}):console.warn(`Theme with key ${s} is empty or malformed`)}))}),this.userPalette=x().paletteDataUsed||{},e("palette").then(t=>{t.forEach(([s,n])=>n.then(i=>{let a;if(Array.isArray(i)){const[l,r,p,c,h,m="#FF0000",g="#00FF00",k="#0000FF",V="#E3FF00"]=i;a={key:s,name:l,bg:r,fg:p,text:c,link:h,cRed:m,cBlue:k,cGreen:g,cOrange:V}}else a={key:s,...i};a.key.startsWith("style.")||this.bundledPalettes.push(a)}))}),window.IntersectionObserver&&(this.intersectionObserver=new IntersectionObserver((t,s)=>{t.forEach(({target:n,isIntersecting:i})=>{if(!i)return;const a=this.availableStyles.find(l=>l.key===n.dataset.themeKey);this.$nextTick(()=>{a&&(a.ready=!0)}),s.unobserve(n)})},{root:this.$refs.themeList}))},updated(){this.$nextTick(()=>{this.$refs.themeList.querySelectorAll(".theme-preview").forEach(e=>{this.intersectionObserver.observe(e)})})},watch:{paletteDataUsed(){this.userPalette=this.paletteDataUsed||{}}},computed:{switchInProgress(){return x().themeChangeInProgress},paletteDataUsed(){return x().paletteDataUsed},availableStyles(){return[...this.availableThemesV3,...this.availableThemesV2]},availablePalettes(){return[...this.bundledPalettes,...this.stylePalettes]},stylePalettes(){const e=x().styleDataUsed||[];if(!e&&e.length===0)return;const t=e.find(n=>n.component==="@meta");return e.filter(n=>n.component.startsWith("@palette")).map(n=>{const{variant:i,directives:a}=n,{bg:l,fg:r,text:p,link:c,accent:h,cRed:m,cBlue:g,cGreen:k,cOrange:V,wallpaper:S}=a,C={name:`${t.directives.name||this.$t("settings.style.themes3.palette.imported")}: ${i}`,key:`style.${i.toLowerCase().replace(/ /g,"_")}`,bg:l,fg:r,text:p,link:c,accent:h,cRed:m,cBlue:g,cGreen:k,cOrange:V,wallpaper:S};return Object.fromEntries(Object.entries(C).filter(([,E])=>E))})},noIntersectionObserver(){return!window.IntersectionObserver},horizontalUnits(){return jf},fontsOverride(){return this.$store.getters.mergedConfig.fontsOverride},columns(){const e=this.$store.getters.mergedConfig.thirdColumnMode,t=e==="none"?[]:["notifs"];return this.$store.getters.mergedConfig.sidebarRight||e==="postform"?[...t,"content","sidebar"]:["sidebar","content",...t]},instanceWallpaperUsed(){return this.$store.state.instance.background&&!this.$store.state.users.currentUser.background_image},language:{get:function(){return this.$store.getters.mergedConfig.interfaceLanguage},set:function(e){this.$store.dispatch("setOption",{name:"interfaceLanguage",value:e})}},customThemeVersion(){const{themeVersion:e}=x();return e},isCustomThemeUsed(){const{customTheme:e,customThemeSource:t}=this.mergedConfig;return e!=null||t!=null},isCustomStyleUsed(){const{styleCustomData:e}=this.mergedConfig;return e!=null},...It()},methods:{updateFont(e,t){this.$store.dispatch("setOption",{name:"theme3hacks",value:{...this.mergedConfig.theme3hacks,fonts:{...this.mergedConfig.theme3hacks.fonts,[e]:t}}})},importFile(){this.fileImporter.importData()},importParser(e,t){if(t.endsWith(".json"))return JSON.parse(e);if(t.endsWith(".iss"))return wi(e)},onImport(e,t){t.endsWith(".json")?x().setThemeCustom(e.source||e.theme):t.endsWith(".iss")&&x().setStyleCustom(e)},onImportFailure(e){console.error("Failure importing theme:",e),this.$store.useInterfaceStore().pushGlobalNotice({messageKey:"settings.invalid_theme_imported",level:"error"})},importValidator(e,t){if(t.endsWith(".json")){const s=e._pleroma_theme_version;return s>=1||s<=2}else if(t.endsWith(".iss"))return!(!Array.isArray(e)||e.length<1||e.find(s=>s.component==="@meta")==null)},isThemeActive(e){return e===(this.mergedConfig.theme||this.$store.state.instance.theme)},isStyleActive(e){return e===(this.mergedConfig.style||this.$store.state.instance.style)},isPaletteActive(e){return e===(this.mergedConfig.palette||this.$store.state.instance.palette)},...Nl(x,["setStyle","setTheme"]),setPalette(e,t){x().setPalette(e),this.userPalette=t},setPaletteCustom(e){x().setPaletteCustom(e),this.userPalette=e},resetTheming(){x().setStyle("stock")},previewTheme(e,t,s){let n;if(this.compilationCache[e])n=this.compilationCache[e];else if(s){if(t==="v2"){const i=Fl(s),a=yi(i);n=Ct({inputRuleset:a,ultimateBackgroundColor:"#000000",liteMode:!0,debug:!0,onlyNormalState:!0})}else if(t==="v3"){const i=s.find(l=>l.component==="@palette");let a;if(i){const{directives:l}=i;l.link=l.link||l.accent,l.accent=l.accent||l.link,a={component:"Root",directives:Object.fromEntries(Object.entries(l).filter(([r])=>r&&r!=="name").map(([r,p])=>["--"+r,"color | "+p]))}}else a=null;n=Ct({inputRuleset:[...s,a].filter(l=>l),ultimateBackgroundColor:"#000000",liteMode:!0,debug:!0,onlyNormalState:!0})}}else n=Ct({inputRuleset:[],ultimateBackgroundColor:"#000000",liteMode:!0,debug:!0,onlyNormalState:!0});return this.compilationCache[e]||(this.compilationCache[e]=n),Ln(Ht(n.eager),"#theme-preview-"+e).join(`
`)}}},Ng=["label"],Fg={class:"setting-item"},jg={ref:"themeList",class:"theme-list"},qg=["disabled"],zg={class:"theme-name"},Hg={key:0,disabled:"",class:"button-default theme-preview toggled"},Wg={class:"theme-name"},Yg={key:1,disabled:"",class:"button-default theme-preview toggled"},Gg={class:"theme-name"},Kg=["data-theme-key","disabled","onClick"],Xg={key:0},Jg={class:"theme-name"},Qg={class:"alert neutral version"},Zg={class:"import-file-container"},xg=["disabled"],eb={class:"setting-item"},tb={key:0,class:"palettes-container"},sb={key:0},nb={class:"palettes"},ob=["disabled","onClick"],ab={class:"palette-label"},ib={class:"palette-preview"},lb=["disabled","onClick"],rb={class:"palette-label"},db={class:"palette-preview"},ub={key:0},cb={key:1,class:"alert neutral theme-notice unsupported-theme-v2"},pb={class:"setting-item"},hb={class:"alert neutral theme-notice"},mb={class:"setting-list"},fb={class:"setting-list suboptions"},gb={key:0},bb={class:"column-settings"},vb={class:"setting-item"},yb={class:"setting-list"},wb={key:0};function $b(e,t,s,n,i,a){var S;const l=L("preview"),r=L("FAIcon"),p=L("PaletteEditor"),c=L("UnitSetting"),h=L("i18n-t"),m=L("FloatSetting"),g=L("FontControl"),k=L("BooleanSetting"),V=L("ChoiceSetting");return f(),w("div",{class:"appearance-tab",label:e.$t("settings.general")},[o("div",Fg,[o("h2",null,d(e.$t("settings.theme")),1),o("ul",jg,[o("button",{class:Y(["button-default theme-preview",{toggled:e.isStyleActive("stock"),disabled:e.switchInProgress}]),"data-theme-key":"stock",disabled:e.switchInProgress,onClick:t[0]||(t[0]=(...C)=>e.resetTheming&&e.resetTheming(...C))},[(f(),H(mt("style"),{innerHTML:e.previewTheme("stock","v3")},null,8,["innerHTML"])),u(l,{id:"theme-preview-stock"}),o("h4",zg,[$(d(e.$t("settings.style.stock_theme_used"))+" ",1),t[8]||(t[8]=o("span",{class:"alert neutral version"},"v3",-1))])],10,qg),e.isCustomThemeUsed?(f(),w("button",Hg,[u(l),o("h4",Wg,[$(d(e.$t("settings.style.custom_theme_used"))+" ",1),t[9]||(t[9]=o("span",{class:"alert neutral version"},"v2",-1))])])):T("",!0),e.isCustomStyleUsed?(f(),w("button",Yg,[u(l),o("h4",Gg,[$(d(e.$t("settings.style.custom_style_used"))+" ",1),t[10]||(t[10]=o("span",{class:"alert neutral version"},"v3",-1))])])):T("",!0),(f(!0),w(K,null,ne(e.availableStyles,C=>(f(),w("button",{key:C.key,"data-theme-key":C.key,class:Y(["button-default theme-preview",{toggled:e.isThemeActive(C.key),disabled:e.switchInProgress}]),disabled:e.switchInProgress,onClick:E=>C.version==="v2"?e.setTheme(C.key):e.setStyle(C.key)},[C.ready||e.noIntersectionObserver?(f(),w("div",Xg,[(f(),H(mt("style"),{innerHTML:e.previewTheme(C.key,C.version,C.data)},null,8,["innerHTML"]))])):T("",!0),u(l,{id:"theme-preview-"+C.key},null,8,["id"]),o("h4",Jg,[$(d(C.name)+" ",1),o("span",Qg,d(C.version),1)])],10,Kg))),128))],512),o("div",Zg,[o("button",{class:Y(["btn button-default",{disabled:e.switchInProgress}]),disabled:e.switchInProgress,onClick:t[1]||(t[1]=(...C)=>e.importFile&&e.importFile(...C))},[u(r,{icon:"folder-open"}),$(" "+d(e.$t("settings.style.themes3.editor.load_style")),1)],10,xg)]),o("div",eb,[o("h2",null,d(e.$t("settings.style.themes3.palette.label")),1),e.customThemeVersion==="v3"?(f(),w("div",tb,[((S=e.stylePalettes)==null?void 0:S.length)>0?(f(),w("h4",sb,d(e.$t("settings.style.themes3.palette.style")),1)):T("",!0),o("div",nb,[(f(!0),w(K,null,ne(e.stylePalettes||[],C=>(f(),w("button",{key:C.name,class:Y(["btn button-default palette-entry",{toggled:e.isPaletteActive(C.key),disabled:e.switchInProgress}]),disabled:e.switchInProgress,onClick:()=>e.setPalette(C.key,C)},[o("div",ab,[o("label",null,d(C.name??e.$t("settings.style.themes3.palette.user")),1)]),o("div",ib,[(f(!0),w(K,null,ne(e.palettesKeys,E=>(f(),w("span",{key:E,class:"palette-square",style:Xe({backgroundColor:C[E],border:"1px solid "+(C[E]??"var(--text)")})},null,4))),128))])],10,ob))),128)),o("h4",null,d(e.$t("settings.style.themes3.palette.bundled")),1),(f(!0),w(K,null,ne(e.bundledPalettes,C=>(f(),w("button",{key:C.name,class:Y(["btn button-default palette-entry",{toggled:e.isPaletteActive(C.key),disabled:e.switchInProgress}]),disabled:e.switchInProgress,onClick:()=>e.setPalette(C.key,C)},[o("div",rb,[o("label",null,d(C.name),1)]),o("div",db,[(f(!0),w(K,null,ne(e.palettesKeys,E=>(f(),w("span",{key:E,class:"palette-square",style:Xe({backgroundColor:C[E],border:"1px solid "+(C[E]??"var(--text)")})},null,4))),128))])],10,lb))),128))])])):T("",!0),o("div",null,[e.customThemeVersion==="v3"?(f(),w(K,{key:0},[e.expertLevel>0?(f(),w("h4",ub,d(e.$t("settings.style.themes3.palette.user")),1)):T("",!0),e.expertLevel>0?(f(),H(p,{key:1,modelValue:e.userPalette,"onUpdate:modelValue":t[2]||(t[2]=C=>e.userPalette=C),class:"userPalette",compact:!0,apply:!0,disabled:e.switchInProgress,onApplyPalette:t[3]||(t[3]=C=>e.setPaletteCustom(C))},null,8,["modelValue","disabled"])):T("",!0)],64)):e.customThemeVersion==="v2"?(f(),w("div",cb,d(e.$t("settings.style.themes3.palette.v2_unsupported")),1)):T("",!0)])])]),o("div",pb,[o("h2",null,d(e.$t("settings.scale_and_layout")),1),o("div",hb,d(e.$t("settings.style.appearance_tab_note")),1),o("ul",mb,[o("li",null,[u(c,{path:"textSize",step:.1,units:["px","rem"],"reset-default":{px:14,rem:1},"timed-apply-mode":""},{default:v(()=>[$(d(e.$t("settings.text_size")),1)]),_:1}),o("div",null,[o("small",null,[u(h,{scope:"global",keypath:"settings.text_size_tip",tag:"span"},{default:v(()=>t[11]||(t[11]=[o("code",null,"px",-1),o("code",null,"rem",-1)])),_:1}),t[13]||(t[13]=o("br",null,null,-1)),u(h,{scope:"global",keypath:"settings.text_size_tip2",tag:"span"},{default:v(()=>t[12]||(t[12]=[o("code",null,"14px",-1)])),_:1})])])]),o("li",null,[u(c,{path:"emojiSize",step:.1,units:["px","rem"],"reset-default":{px:32,rem:2.2}},{default:v(()=>[$(d(e.$t("settings.emoji_size")),1)]),_:1}),o("ul",fb,[o("li",null,[e.user?(f(),H(m,{key:0,path:"emojiReactionsScale",expert:"1"},{default:v(()=>[$(d(e.$t("settings.emoji_reactions_scale")),1)]),_:1})):T("",!0)])])]),o("li",null,[u(c,{path:"navbarSize",step:.1,units:["px","rem"],"reset-default":{px:55,rem:3.5}},{default:v(()=>[$(d(e.$t("settings.navbar_size")),1)]),_:1})]),o("h3",null,d(e.$t("settings.style.interface_font_user_override")),1),o("li",null,[u(g,{"model-value":e.mergedConfig.theme3hacks.fonts.interface,name:"ui",label:e.$t("settings.style.fonts.components.interface"),fallback:{family:"sans-serif"},"no-inherit":"1","onUpdate:modelValue":t[4]||(t[4]=C=>e.updateFont("interface",C))},null,8,["model-value","label"])]),o("li",null,[e.expertLevel>0?(f(),H(g,{key:0,"model-value":e.mergedConfig.theme3hacks.fonts.input,name:"input",fallback:{family:"inherit"},label:e.$t("settings.style.fonts.components.input"),"onUpdate:modelValue":t[5]||(t[5]=C=>e.updateFont("input",C))},null,8,["model-value","label"])):T("",!0)]),o("li",null,[e.expertLevel>0?(f(),H(g,{key:0,"model-value":e.mergedConfig.theme3hacks.fonts.post,name:"post",fallback:{family:"inherit"},label:e.$t("settings.style.fonts.components.post"),"onUpdate:modelValue":t[6]||(t[6]=C=>e.updateFont("post",C))},null,8,["model-value","label"])):T("",!0)]),o("li",null,[e.expertLevel>0?(f(),H(g,{key:0,"model-value":e.mergedConfig.theme3hacks.fonts.monospace,name:"postCode",fallback:{family:"monospace"},label:e.$t("settings.style.fonts.components.monospace"),"onUpdate:modelValue":t[7]||(t[7]=C=>e.updateFont("monospace",C))},null,8,["model-value","label"])):T("",!0)]),o("h3",null,d(e.$t("settings.columns")),1),o("li",null,[u(c,{path:"panelHeaderSize",step:.1,units:["px","rem"],"reset-default":{px:52,rem:3.2},"timed-apply-mode":""},{default:v(()=>[$(d(e.$t("settings.panel_header_size")),1)]),_:1})]),o("li",null,[u(k,{path:"sidebarRight"},{default:v(()=>[$(d(e.$t("settings.right_sidebar")),1)]),_:1})]),o("li",null,[u(k,{path:"navbarColumnStretch"},{default:v(()=>[$(d(e.$t("settings.navbar_column_stretch")),1)]),_:1})]),o("li",null,[e.user?(f(),H(V,{key:0,id:"thirdColumnMode",path:"thirdColumnMode",options:e.thirdColumnModeOptions},{default:v(()=>[$(d(e.$t("settings.third_column_mode")),1)]),_:1},8,["options"])):T("",!0)]),e.expertLevel>0?(f(),w("li",gb,[$(d(e.$t("settings.column_sizes"))+" ",1),o("div",bb,[(f(!0),w(K,null,ne(e.columns,C=>(f(),H(c,{key:C,path:C+"ColumnWidth",units:e.horizontalUnits,expert:"1"},{default:v(()=>[$(d(e.$t("settings.column_sizes_"+C)),1)]),_:2},1032,["path","units"]))),128))])])):T("",!0),o("li",null,[u(k,{path:"disableStickyHeaders"},{default:v(()=>[$(d(e.$t("settings.disable_sticky_headers")),1)]),_:1})]),o("li",null,[u(k,{path:"showScrollbars"},{default:v(()=>[$(d(e.$t("settings.show_scrollbars")),1)]),_:1})]),o("li",null,[u(c,{path:"themeEditorMinWidth",units:["px","rem"],expert:"1"},{default:v(()=>[$(d(e.$t("settings.theme_editor_min_width")),1)]),_:1})])])]),o("div",vb,[o("h2",null,d(e.$t("settings.visual_tweaks")),1),o("ul",yb,[o("li",null,[u(k,{path:"modalMobileCenter"},{default:v(()=>[$(d(e.$t("settings.mobile_center_dialog")),1)]),_:1})]),o("li",null,[u(V,{id:"forcedRoundness",path:"forcedRoundness",options:e.forcedRoundnessOptions},{default:v(()=>[$(d(e.$t("settings.style.themes3.hacks.force_interface_roundness")),1)]),_:1},8,["options"])]),o("li",null,[u(V,{id:"underlayOverride",path:"theme3hacks.underlay",options:e.underlayOverrideModes},{default:v(()=>[$(d(e.$t("settings.style.themes3.hacks.underlay_overrides")),1)]),_:1},8,["options"])]),e.instanceWallpaperUsed?(f(),w("li",wb,[u(k,{path:"hideInstanceWallpaper"},{default:v(()=>[$(d(e.$t("settings.hide_wallpaper")),1)]),_:1})])):T("",!0),o("li",null,[u(k,{path:"forceThemeRecompilation",expert:1},{default:v(()=>[$(d(e.$t("settings.force_theme_recompilation_debug")),1)]),_:1})]),o("li",null,[u(k,{path:"themeDebug",expert:1},{default:v(()=>[$(d(e.$t("settings.theme_debug")),1)]),_:1})])])])],8,Ng)}const kb=J(Dg,[["render",$b]]),Cb="https://git.pleroma.social/pleroma/pleroma-fe/commit/",Tb={data(){const e=this.$store.state.instance;return{backendVersion:e.backendVersion,backendRepository:e.backendRepository,frontendVersion:e.frontendVersion}},computed:{frontendVersionLink(){return Cb+this.frontendVersion}}},Vb=["label"],Sb={class:"setting-item"},Lb={class:"setting-list"},Pb={class:"option-list"},Ib=["href"],Eb={class:"option-list"},_b=["href"];function Ab(e,t,s,n,i,a){return f(),w("div",{label:e.$t("settings.version.title")},[o("div",Sb,[o("ul",Lb,[o("li",null,[o("p",null,d(e.$t("settings.version.backend_version")),1),o("ul",Pb,[o("li",null,[o("a",{href:e.backendRepository,target:"_blank"},d(e.backendVersion),9,Ib)])])]),o("li",null,[o("p",null,d(e.$t("settings.version.frontend_version")),1),o("ul",Eb,[o("li",null,[o("a",{href:e.frontendVersionLink,target:"_blank"},d(e.frontendVersion),9,_b)])])])])])],8,Vb)}const Ob=J(Tb,[["render",Ab]]),Ub={props:["name","modelValue","fallback","disabled","label","max","min","step","hardMin","hardMax"],emits:["update:modelValue"],computed:{present(){return typeof this.modelValue<"u"}}},Mb=["id","for"],Bb=["id","aria-labelledby","checked"],Rb=["for"],Db=["id","value","disabled","max","min","step"],Nb=["id","aria-labelledby","value","disabled","max","min","step"];function Fb(e,t,s,n,i,a){return f(),w("div",{class:Y(["range-control style-control",{disabled:!a.present||s.disabled}])},[o("label",{id:s.name+"-label",for:s.name,class:"label"},d(s.label),9,Mb),typeof s.fallback<"u"?(f(),w("input",{key:0,id:s.name+"-o","aria-labelledby":s.name+"-label",class:"input -checkbox opt visible-for-screenreader-only",type:"checkbox",checked:a.present,onChange:t[0]||(t[0]=l=>e.$emit("update:modelValue",a.present?void 0:s.fallback))},null,40,Bb)):T("",!0),typeof s.fallback<"u"?(f(),w("label",{key:1,class:"opt-l",for:s.name+"-o","aria-hidden":!0},null,8,Rb)):T("",!0),o("input",{id:s.name,class:"input input-number",type:"range",value:s.modelValue||s.fallback,disabled:!a.present||s.disabled,max:s.max||s.hardMax||100,min:s.min||s.hardMin||0,step:s.step||1,onInput:t[1]||(t[1]=l=>e.$emit("update:modelValue",l.target.value))},null,40,Db),o("input",{id:s.name+"-numeric",class:"input input-number",type:"number","aria-labelledby":s.name+"-label",value:s.modelValue||s.fallback,disabled:!a.present||s.disabled,max:s.hardMax,min:s.hardMin,step:s.step||1,onInput:t[2]||(t[2]=l=>e.$emit("update:modelValue",l.target.value))},null,40,Nb)],2)}const jb=J(Ub,[["render",Fb]]),qb={components:{Checkbox:$e},props:["name","label","modelValue","fallback","disabled"],emits:["update:modelValue"],computed:{present(){return typeof this.modelValue<"u"}}},zb=["for"],Hb=["id","value","disabled"];function Wb(e,t,s,n,i,a){const l=L("Checkbox");return f(),w("div",{class:Y(["opacity-control style-control",{disabled:!a.present||s.disabled}])},[o("label",{for:s.name,class:Y(["label",{faint:!a.present||s.disabled}])},d(s.label),11,zb),typeof s.fallback<"u"?(f(),H(l,{key:0,"model-value":a.present,disabled:s.disabled,class:"opt","onUpdate:modelValue":t[0]||(t[0]=r=>e.$emit("update:modelValue",a.present?void 0:s.fallback))},null,8,["model-value","disabled"])):T("",!0),o("input",{id:s.name,class:Y(["input input-number",{disabled:!a.present||s.disabled}]),type:"number",value:s.modelValue||s.fallback,disabled:!a.present||s.disabled,max:"1",min:"0",step:".05",onInput:t[1]||(t[1]=r=>e.$emit("update:modelValue",r.target.value))},null,42,Hb)],2)}const jn=J(qb,[["render",Wb]]),Yb={class:"SelectMotion btn-group"},Gb=["disabled"],Kb=["disabled"],Xb=["disabled"],Jb=["disabled"],qn={__name:"select_motion",props:{modelValue:{type:Array,required:!0},selectedId:{type:Number,required:!0},disabled:{type:Boolean,default:!1},getAddValue:{type:Function,required:!0}},emits:["update:modelValue","update:selectedId"],setup(e,{emit:t}){const s=e,n=t,i=Q(()=>s.selectedId>0),a=Q(()=>s.modelValue[s.selectedId]!=null),l=async()=>{const m=[...s.modelValue],g=m.splice(s.selectedId,1)[0];m.splice(s.selectedId-1,0,g),n("update:modelValue",m),await Bt(),n("update:selectedId",s.selectedId-1)},r=Q(()=>s.selectedId<s.modelValue.length-1),p=async()=>{const m=[...s.modelValue],g=m.splice(s.selectedId.value,1)[0];m.splice(s.selectedId+1,0,g),n("update:modelValue",m),await Bt(),n("update:selectedId",s.selectedId+1)},c=async()=>{const m=[...s.modelValue,s.getAddValue()];n("update:modelValue",m),await Bt(),n("update:selectedId",Math.max(m.length-1,0))},h=async()=>{const m=[...s.modelValue];m.splice(s.selectedId,1),n("update:modelValue",m),await Bt(),n("update:selectedId",m.length===0?void 0:Math.max(s.selectedId-1,0))};return(m,g)=>{const k=L("FAIcon");return f(),w("div",Yb,[o("button",{class:"btn button-default",disabled:e.disabled,onClick:c},[u(k,{"fixed-width":"",icon:"plus"})],8,Gb),o("button",{class:Y(["btn button-default",{disabled:e.disabled||!i.value}]),disabled:e.disabled||!i.value,onClick:l},[u(k,{"fixed-width":"",icon:"chevron-up"})],10,Kb),o("button",{class:Y(["btn button-default",{disabled:e.disabled||!r.value}]),disabled:e.disabled||!r.value,onClick:p},[u(k,{"fixed-width":"",icon:"chevron-down"})],10,Xb),o("button",{class:Y(["btn button-default",{disabled:e.disabled||!a.value}]),disabled:e.disabled||!a.value,onClick:h},[u(k,{"fixed-width":"",icon:"times"})],10,Jb)])}}},Qb={components:{Checkbox:$e,ColorInput:ft},props:["shadow","shadowControl","previewClass","previewStyle","previewCss","disabled","invalid","noColorControl"],emits:["update:shadow"],data(){return{colorOverride:void 0,lightGrid:!1,zoom:100}},computed:{style(){const e=[this.previewStyle,`zoom: ${this.zoom/100}`];return this.colorOverride&&e.push(`--background: ${this.colorOverride}`),e},hideControls(){return typeof this.shadow=="string"}},methods:{updateProperty(e,t){this.$emit("update:shadow",{axis:e,value:Number(t)})}}},Zb={class:"x-shift-number"},xb=["value","disabled"],ev={class:"y-shift-number"},tv=["value","disabled"],sv=["value","disabled"],nv=["value","disabled"],ov={key:0,class:"invalid-container"},av={class:"alert error invalid-label"},iv={class:"assists"},lv={class:"style-control"},rv={class:"label"};function dv(e,t,s,n,i,a){var p,c,h,m;const l=L("Checkbox"),r=L("ColorInput");return f(),w("div",{class:Y(["ComponentPreview",{"-shadow-controls":s.shadowControl}])},[(f(),H(mt("style"),{innerHTML:s.previewCss},null,8,["innerHTML"])),ee(o("label",{role:"heading",class:Y(["header",{faint:s.disabled}])},d(e.$t("settings.style.shadows.offset")),3),[[rt,s.shadowControl]]),ee(o("label",Zb,[$(d(e.$t("settings.style.shadows.offset-x"))+" ",1),o("input",{value:(p=s.shadow)==null?void 0:p.x,disabled:s.disabled,class:Y([{disabled:s.disabled},"input input-number"]),type:"number",onInput:t[0]||(t[0]=g=>a.updateProperty("x",g.target.value))},null,42,xb)],512),[[rt,s.shadowControl&&!a.hideControls]]),ee(o("label",ev,[$(d(e.$t("settings.style.shadows.offset-y"))+" ",1),o("input",{value:(c=s.shadow)==null?void 0:c.y,disabled:s.disabled,class:Y([{disabled:s.disabled},"input input-number"]),type:"number",onInput:t[1]||(t[1]=g=>a.updateProperty("y",g.target.value))},null,42,tv)],512),[[rt,s.shadowControl&&!a.hideControls]]),ee(o("input",{value:(h=s.shadow)==null?void 0:h.x,disabled:s.disabled,class:Y([{disabled:s.disabled},"input input-range x-shift-slider"]),type:"range",max:"20",min:"-20",onInput:t[2]||(t[2]=g=>a.updateProperty("x",g.target.value))},null,42,sv),[[rt,s.shadowControl&&!a.hideControls]]),ee(o("input",{value:(m=s.shadow)==null?void 0:m.y,disabled:s.disabled,class:Y([{disabled:s.disabled},"input input-range y-shift-slider"]),type:"range",max:"20",min:"-20",onInput:t[3]||(t[3]=g=>a.updateProperty("y",g.target.value))},null,42,nv),[[rt,s.shadowControl&&!a.hideControls]]),o("div",{class:Y(["preview-window",{"-light-grid":i.lightGrid}])},[o("div",{class:Y(["preview-block",s.previewClass]),style:Xe(a.style)},d(e.$t("settings.style.themes3.editor.test_string")),7),s.invalid?(f(),w("div",ov,[o("div",av,d(e.$t("settings.style.themes3.editor.invalid")),1)])):T("",!0)],2),o("div",iv,[u(l,{modelValue:i.lightGrid,"onUpdate:modelValue":t[4]||(t[4]=g=>i.lightGrid=g),name:"lightGrid",class:"input-light-grid"},{default:v(()=>[$(d(e.$t("settings.style.shadows.light_grid")),1)]),_:1},8,["modelValue"]),o("div",lv,[o("label",rv,d(e.$t("settings.style.shadows.zoom")),1),ee(o("input",{"onUpdate:modelValue":t[5]||(t[5]=g=>i.zoom=g),class:"input input-number y-shift-number",type:"number"},null,512),[[ue,i.zoom]])]),s.noColorControl?T("",!0):(f(),H(r,{key:0,modelValue:i.colorOverride,"onUpdate:modelValue":t[6]||(t[6]=g=>i.colorOverride=g),class:"input-color-input",fallback:"#606060",label:e.$t("settings.style.shadows.color_override")},null,8,["modelValue","label"]))])],2)}const Zi=J(Qb,[["render",dv]]),Yt=e=>{if(typeof e=="object"){const t=e.inset?"inset ":"",s=e.name?` #${e.name} `:"",n=`${t}${e.x} ${e.y} ${e.blur} ${e.spread} ${e.color} / ${e.alpha}${s}`;return Pn(n),n}else return e},uv=e=>e.map(t=>{if(Object.keys(t.directives||{}).length===0)return!1;const s=jl(t).reverse().map(i=>{const{component:a}=i,l=i.variant==null||i.variant==="normal"?"":"."+i.variant,r=(i.state||[]).filter(p=>p!=="normal");return`${a}${l}${r.map(p=>":"+p).join("")}`}).join(" "),n=Object.entries(t.directives).map(([i,a])=>{if(i.startsWith("--")){const[l,r]=a.split("|");switch(l){case"shadow":return`  ${i}: ${l.trim()} | ${r.map(Yt).map(p=>p.trim()).join(", ")}`;default:return`  ${i}: ${l.trim()} | ${r.trim()}`}}else switch(i){case"shadow":return a.length>0?`  ${i}: ${a.map(Yt).join(", ")}`:`  ${i}: none`;default:return`  ${i}: ${a}`}});return`${s} {
${n.join(`;
`)}
}`}).filter(t=>t).join(`

`);ge.add(Hl,Wl,Gt,gi);const qt=e=>{if(typeof e=="object")return{x:0,y:0,blur:0,spread:0,inset:!1,color:"#000000",alpha:1,...e};if(typeof e=="string")return e},cv={props:["modelValue","fallback","separateInset","noPreview","disabled","staticVars","compact"],emits:["update:modelValue","subShadowSelected"],data(){return{selectedId:0,invalid:!1}},components:{ColorInput:ft,OpacityInput:jn,Select:et,SelectMotion:qn,Checkbox:$e,Popover:Sn,ComponentPreview:Zi},computed:{cValue:{get(){return(this.modelValue??this.fallback??[]).map(qt)},set(e){this.$emit("update:modelValue",e)}},selectedType:{get(){return typeof this.selected},set(e){this.selected=qt(e==="object"?{}:"")}},selected:{get(){const e=this.cValue[this.selectedId];return e&&typeof e=="object"?{...e}:typeof e=="string"?e:null},set(e){this.cValue[this.selectedId]=qt(e),this.$emit("update:modelValue",this.cValue)}},present(){return this.selected!=null&&this.modelValue!=null},shadowsAreNull(){return this.modelValue==null},currentFallback(){var e;return(e=this.fallback)==null?void 0:e[this.selectedId]},getColorFallback(){var e,t;if(this.staticVars&&((e=this.selected)!=null&&e.color))try{const s=dn(this.selected.color,{dynamicVars:{},staticVars:this.staticVars},!0);return s?Ze(s):null}catch(s){return console.warn(s),null}else return(t=this.currentFallback)==null?void 0:t.color},style(){try{let e;this.cValue.map(i=>Yt(i)).join(",").split(/,/).map(Pn);const n=le.flattenDeep(ql(this.cValue,{dynamicVars:{},staticVars:this.staticVars})).map(i=>({...i,color:Ze(i.color)}));return this.separateInset?e={filter:zl(n),boxShadow:Ao(n,!0)}:e={boxShadow:Ao(n)},this.invalid=!1,e}catch(e){console.error("Invalid shadow",e),this.invalid=!0}}},watch:{selected(){this.$emit("subShadowSelected",this.selectedId)}},methods:{getNewSubshadow(){return qt(this.selected)},onSelectChange(e){this.selectedId=e},getSubshadowLabel(e,t){if(typeof e=="object")return(e==null?void 0:e.name)??this.$t("settings.style.shadows.shadow_id",{value:t});if(typeof e=="string")return e||this.$t("settings.style.shadows.empty_expression")},updateProperty:le.throttle(function(e,t){this.cValue[this.selectedId][e]=t,e==="inset"&&t===!1&&this.separateInset&&(this.cValue[this.selectedId].spread=0),this.$emit("update:modelValue",this.cValue)},100)}},pv={class:"shadow-switcher"},hv=["value"],mv={class:"shadow-tweak"},fv={value:"object"},gv={value:"string"},bv=["disabled"],vv=["value","disabled"],yv=["disabled"],wv=["disabled"],$v=["value","disabled"],kv=["value","disabled"],Cv=["value","disabled"],Tv=["value","disabled"],Vv={class:"inset-alert alert warning"},Sv={class:"inset-tooltip tooltip"};function Lv(e,t,s,n,i,a){var S,C,E,B,M,R,G,b,I,A,O,U,F,j;const l=L("ComponentPreview"),r=L("Select"),p=L("SelectMotion"),c=L("Checkbox"),h=L("ColorInput"),m=L("OpacityInput"),g=L("i18n-t"),k=L("FAIcon"),V=L("Popover");return f(),w("div",{class:Y(["ShadowControl label shadow-control",{disabled:e.disabled||!e.present,"-no-preview":e.noPreview,"-compact":e.compact}])},[e.noPreview?T("",!0):(f(),H(l,{key:0,invalid:e.invalid,class:"shadow-preview","shadow-control":!0,shadow:e.selected,"preview-style":e.style,disabled:e.disabled||!e.present,"onUpdate:shadow":t[0]||(t[0]=({axis:_,value:N})=>e.updateProperty(_,N))},null,8,["invalid","shadow","preview-style","disabled"])),o("div",pv,[u(r,{id:"shadow-list",modelValue:e.selectedId,"onUpdate:modelValue":t[1]||(t[1]=_=>e.selectedId=_),class:"shadow-list",size:"4",disabled:e.disabled||e.shadowsAreNull},{default:v(()=>[(f(!0),w(K,null,ne(e.cValue,(_,N)=>(f(),w("option",{key:N,value:N,class:Y({"-active":N===Number(e.selectedId)})},d(e.getSubshadowLabel(_,N)),11,hv))),128))]),_:1},8,["modelValue","disabled"]),u(p,{modelValue:e.cValue,"onUpdate:modelValue":t[2]||(t[2]=_=>e.cValue=_),"selected-id":e.selectedId,"get-add-value":e.getNewSubshadow,disabled:e.disabled,"onUpdate:selectedId":e.onSelectChange},null,8,["modelValue","selected-id","get-add-value","disabled","onUpdate:selectedId"])]),o("div",mv,[u(r,{modelValue:e.selectedType,"onUpdate:modelValue":t[3]||(t[3]=_=>e.selectedType=_),disabled:e.disabled||!e.present},{default:v(()=>[o("option",fv,d(e.$t("settings.style.shadows.raw")),1),o("option",gv,d(e.$t("settings.style.shadows.expression")),1)]),_:1},8,["modelValue","disabled"]),e.selectedType==="string"?ee((f(),w("textarea",{key:0,"onUpdate:modelValue":t[4]||(t[4]=_=>e.selected=_),class:Y(["input shadow-expression",{disabled:e.disabled||e.shadowsAreNull}]),disabled:e.disabled||e.shadowsAreNull},null,10,bv)),[[ue,e.selected]]):e.selectedType==="object"?(f(),w(K,{key:1},[o("div",{class:Y([{disabled:e.disabled||!e.present},"name-control style-control"])},[o("label",{for:"name",class:Y(["label",{faint:e.disabled||!e.present}])},d(e.$t("settings.style.shadows.name")),3),o("input",{id:"name",value:(S=e.selected)==null?void 0:S.name,disabled:e.disabled||!e.present,class:Y([{disabled:e.disabled||!e.present},"input input-string"]),name:"name",onInput:t[5]||(t[5]=_=>e.updateProperty("name",_.target.value))},null,42,vv)],2),o("div",{disabled:e.disabled||!e.present,class:"inset-control style-control"},[u(c,{id:"inset",value:(C=e.selected)==null?void 0:C.inset,disabled:e.disabled||!e.present,name:"inset",class:"input-inset input-boolean",onInput:t[6]||(t[6]=_=>e.updateProperty("inset",_.target.checked))},{before:v(()=>[$(d(e.$t("settings.style.shadows.inset")),1)]),_:1},8,["value","disabled"])],8,yv),o("div",{disabled:e.disabled||!e.present,class:Y([{disabled:e.disabled||!e.present},"blur-control style-control"])},[o("label",{for:"blur",class:Y(["label",{faint:e.disabled||!e.present}])},d(e.$t("settings.style.shadows.blur")),3),o("input",{id:"blur",value:(E=e.selected)==null?void 0:E.blur,disabled:e.disabled||!e.present,class:Y([{disabled:e.disabled||!e.present},"input input-range"]),name:"blur",type:"range",max:"20",min:"0",onInput:t[7]||(t[7]=_=>e.updateProperty("blur",_.target.value))},null,42,$v),o("input",{value:(B=e.selected)==null?void 0:B.blur,class:Y(["input input-number -small",{disabled:e.disabled||!e.present}]),disabled:e.disabled||!e.present,type:"number",min:"0",onInput:t[8]||(t[8]=_=>e.updateProperty("blur",_.target.value))},null,42,kv)],10,wv),o("div",{class:Y(["spread-control style-control",{disabled:e.disabled||!e.present||e.separateInset&&!((M=e.selected)!=null&&M.inset)}])},[o("label",{for:"spread",class:Y(["label",{faint:e.disabled||!e.present||e.separateInset&&!((R=e.selected)!=null&&R.inset)}])},d(e.$t("settings.style.shadows.spread")),3),o("input",{id:"spread",value:(G=e.selected)==null?void 0:G.spread,class:Y([{disabled:e.disabled||!e.present||e.separateInset&&!((b=e.selected)!=null&&b.inset)},"input input-range"]),disabled:e.disabled||!e.present||e.separateInset&&!((I=e.selected)!=null&&I.inset),name:"spread",type:"range",max:"20",min:"-20",onInput:t[9]||(t[9]=_=>e.updateProperty("spread",_.target.value))},null,42,Cv),o("input",{value:(A=e.selected)==null?void 0:A.spread,class:Y(["input input-number -small",{disabled:e.disabled||!e.present||e.separateInset&&!((O=e.selected)!=null&&O.inset)}]),disabled:e.disabled||!e.present||e.separateInset&&!((U=e.selected)!=null&&U.inset),type:"number",onInput:t[10]||(t[10]=_=>e.updateProperty("spread",_.target.value))},null,42,Tv)],2),u(h,{"model-value":(F=e.selected)==null?void 0:F.color,disabled:e.disabled||!e.present,label:e.$t("settings.style.common.color"),fallback:e.getColorFallback,"show-optional-checkbox":!1,name:"shadow","onUpdate:modelValue":t[11]||(t[11]=_=>e.updateProperty("color",_))},null,8,["model-value","disabled","label","fallback"]),u(m,{"model-value":(j=e.selected)==null?void 0:j.alpha,disabled:e.disabled||!e.present,"onUpdate:modelValue":t[12]||(t[12]=_=>e.updateProperty("alpha",_))},null,8,["model-value","disabled"]),u(g,{scope:"global",keypath:"settings.style.shadows.hintV3",class:Y({faint:e.disabled||!e.present}),tag:"p"},{default:v(()=>t[13]||(t[13]=[o("code",null,"--variable,mod",-1)])),_:1},8,["class"]),e.separateInset?(f(),H(V,{key:0,trigger:"hover"},{trigger:v(()=>[o("div",Vv,[u(k,{icon:"exclamation-triangle"}),$("  "+d(e.$t("settings.style.shadows.filter_hint.avatar_inset_short")),1)])]),content:v(()=>[o("div",Sv,[u(g,{scope:"global",keypath:"settings.style.shadows.filter_hint.always_drop_shadow",tag:"p"},{default:v(()=>t[14]||(t[14]=[o("code",null,"filter: drop-shadow()",-1)])),_:1}),o("p",null,d(e.$t("settings.style.shadows.filter_hint.avatar_inset")),1),u(g,{scope:"global",keypath:"settings.style.shadows.filter_hint.drop_shadow_syntax",tag:"p"},{default:v(()=>t[15]||(t[15]=[o("code",null,"drop-shadow",-1),o("code",null,"spread-radius",-1),o("code",null,"inset",-1)])),_:1}),u(g,{scope:"global",keypath:"settings.style.shadows.filter_hint.inset_classic",tag:"p"},{default:v(()=>t[16]||(t[16]=[o("code",null,"box-shadow",-1)])),_:1}),o("p",null,d(e.$t("settings.style.shadows.filter_hint.spread_zero")),1)])]),_:1})):T("",!0)],64)):T("",!0)])],2)}const zn=J(cv,[["render",Lv]]),Pv={class:"tooltip"},xi={__name:"tooltip",props:["text"],setup(e){const t=e;return(s,n)=>(f(),H(Sn,{trigger:"hover"},{trigger:v(()=>[Ke(s.$slots,"default")]),content:v(()=>[o("div",Pv,d(t.text),1)]),_:3}))}};ge.add(Yl,vi,Gl);const Iv={components:{Tooltip:xi},props:{large:{required:!1,type:Boolean,default:!1},contrast:{required:!1,type:Object,default:()=>({})},showRatio:{required:!1,type:Boolean,default:!1}},computed:{hint(){const e=this.contrast.aaa?"aaa":this.contrast.aa?"aa":"bad",t=this.$t(`settings.style.common.contrast.level.${e}`),s=this.$t("settings.style.common.contrast.context.text"),n=this.contrast.text;return this.$t("settings.style.common.contrast.hint",{level:t,context:s,ratio:n})},hint_18pt(){const e=this.contrast.laaa?"aaa":this.contrast.laa?"aa":"bad",t=this.$t(`settings.style.common.contrast.level.${e}`),s=this.$t("settings.style.common.contrast.context.18pt"),n=this.contrast.text;return this.$t("settings.style.common.contrast.hint",{level:t,context:s,ratio:n})}}},Ev={key:0,class:"contrast-ratio"},_v={key:0},Av={key:0},Ov={key:1},Uv={key:2},Mv={key:0},Bv={key:1},Rv={key:2};function Dv(e,t,s,n,i,a){const l=L("FAIcon"),r=L("Tooltip");return s.contrast?(f(),w("span",Ev,[s.showRatio?(f(),w("span",_v,d(s.contrast.text),1)):T("",!0),u(r,{text:a.hint,class:"rating"},{default:v(()=>[s.contrast.aaa?(f(),w("span",Av,[u(l,{icon:"thumbs-up",size:s.showRatio?"lg":""},null,8,["size"])])):T("",!0),!s.contrast.aaa&&s.contrast.aa?(f(),w("span",Ov,[u(l,{icon:"adjust",size:s.showRatio?"lg":""},null,8,["size"])])):T("",!0),!s.contrast.aaa&&!s.contrast.aa?(f(),w("span",Uv,[u(l,{icon:"exclamation-triangle",size:s.showRatio?"lg":""},null,8,["size"])])):T("",!0)]),_:1},8,["text"]),s.contrast&&s.large?(f(),H(r,{key:1,text:a.hint_18pt,class:"rating"},{default:v(()=>[s.contrast.laaa?(f(),w("span",Mv,[u(l,{icon:"thumbs-up",size:s.showRatio?"large":""},null,8,["size"])])):T("",!0),!s.contrast.laaa&&s.contrast.laa?(f(),w("span",Bv,[u(l,{icon:"adjust",size:s.showRatio?"lg":""},null,8,["size"])])):T("",!0),!s.contrast.laaa&&!s.contrast.laa?(f(),w("span",Rv,[u(l,{icon:"exclamation-triangle",size:s.showRatio?"lg":""},null,8,["size"])])):T("",!0)]),_:1},8,["text"])):T("",!0)])):T("",!0)}const el=J(Iv,[["render",Dv]]),Nv=["bg","fg","text","link","cRed","cGreen","cBlue","cOrange"].map(e=>e+"ColorLocal"),Fv=e=>e.startsWith("--")||e==="transparent"?e:zt(e),jv={data(){return{themeV3Preview:[],themeImporter:Jt({validator:this.importValidator,onImport:this.onImport,onImportFailure:this.onImportFailure}),themeExporter:_n({filename:"pleroma_theme",getExportedObject:()=>this.exportedTheme}),availableStyles:[],selected:"",selectedTheme:this.$store.getters.mergedConfig.theme,themeWarning:void 0,tempImportFile:void 0,engineVersion:0,previewTheme:{},shadowsInvalid:!0,colorsInvalid:!0,radiiInvalid:!0,keepColor:!1,keepShadows:!1,keepOpacity:!1,keepRoundness:!1,keepFonts:!1,...Object.keys(Rt).map(e=>[e,""]).reduce((e,[t,s])=>({...e,[t+"ColorLocal"]:s}),{}),...Object.keys(Oo).map(e=>[e,""]).reduce((e,[t,s])=>({...e,[t+"OpacityLocal"]:s}),{}),shadowSelected:void 0,shadowsLocal:{},fontsLocal:{},btnRadiusLocal:"",inputRadiusLocal:"",checkboxRadiusLocal:"",panelRadiusLocal:"",avatarRadiusLocal:"",avatarAltRadiusLocal:"",attachmentRadiusLocal:"",tooltipRadiusLocal:"",chatMessageRadiusLocal:""}},created(){const e=this.$store.state.instance.themesIndex;let t;e?t=Promise.resolve(e):t=x().fetchThemesIndex(),t.then(s=>{Object.values(s).forEach(n=>{n().then(i=>i&&this.availableStyles.push(i))})})},mounted(){typeof this.shadowSelected>"u"&&(this.shadowSelected=this.shadowsAvailable[0])},computed:{themeWarningHelp(){if(!this.themeWarning)return;const e=this.$t,t="settings.style.switcher.help.",{origin:s,themeEngineVersion:n,type:i,noActionsPossible:a}=this.themeWarning;if(s==="file"){if(n===2&&i==="wrong_version")return e(t+"v2_imported");if(n>Be||n<Be)return e(t+"future_version_imported")+" "+e(a?t+"snapshot_missing":t+"snapshot_present")}else if(s==="localStorage"){if(i==="snapshot_source_mismatch")return e(t+"snapshot_source_mismatch");if(n===2)return e(t+"upgraded_from_v2");if(n>Be)return e(t+"fe_downgraded")+" "+e(a?t+"migration_snapshot_ok":t+"migration_snapshot_gone");if(n<Be)return e(t+"fe_upgraded")+" "+e(a?t+"migration_snapshot_ok":t+"migration_snapshot_gone")}},selectedVersion(){return Array.isArray(this.selectedTheme)?1:2},currentColors(){return Object.keys(Rt).map(e=>[e,this[e+"ColorLocal"]]).reduce((e,[t,s])=>({...e,[t]:s}),{})},currentOpacity(){return Object.keys(Oo).map(e=>[e,this[e+"OpacityLocal"]]).reduce((e,[t,s])=>({...e,[t]:s}),{})},currentRadii(){return{btn:this.btnRadiusLocal,input:this.inputRadiusLocal,checkbox:this.checkboxRadiusLocal,panel:this.panelRadiusLocal,avatar:this.avatarRadiusLocal,avatarAlt:this.avatarAltRadiusLocal,tooltip:this.tooltipRadiusLocal,attachment:this.attachmentRadiusLocal,chatMessage:this.chatMessageRadiusLocal}},previewContrast(){try{if(!this.previewTheme.colors.bg)return{};const e=this.previewTheme.colors,t=this.previewTheme.opacity;if(!e.bg)return{};const s=a=>({text:a.toPrecision(3)+":1",aa:a>=4.5,aaa:a>=7,laa:a>=3,laaa:a>=4.5}),n=Object.entries(e).reduce((a,[l,r])=>({...a,[l]:Fv(r)}),{}),i=Object.entries(Rt).reduce((a,[l,r])=>{const p=l==="text"||l==="link";if(!(p||typeof r=="object"&&r!==null&&r.textColor))return a;const{layer:h,variant:m}=p?{layer:"bg"}:r,g=m||h,k=sr(g),V=[l,...g==="bg"?["cRed","cGreen","cBlue","cOrange"]:[]],S=nr(h,m||h,k,n,t);return S.flat().some(C=>C==null)?a:{...a,...V.reduce((C,E)=>{const B=p?"bg"+E[0].toUpperCase()+E.slice(1):E;return{...C,[B]:or(n[E],S,n[E])}},{})}},{});return Object.entries(i).reduce((a,[l,r])=>(a[l]=s(r),a),{})}catch(e){return console.warn("Failure computing contrasts",e),{}}},themeDataUsed(){return x().themeDataUsed},shadowsAvailable(){return Object.keys(tr).sort()},currentShadowOverriden:{get(){return!!this.currentShadow},set(e){e?this.shadowsLocal[this.shadowSelected]=(this.currentShadowFallback||[]).map(t=>({name:null,x:0,y:0,blur:0,spread:0,inset:!1,color:"#000000",alpha:1,...t})):delete this.shadowsLocal[this.shadowSelected]}},currentShadowFallback(){return(this.previewTheme.shadows||{})[this.shadowSelected]},currentShadow:{get(){return this.shadowsLocal[this.shadowSelected]},set(e){this.shadowsLocal[this.shadowSelected]=e}},themeValid(){return!this.shadowsInvalid&&!this.colorsInvalid&&!this.radiiInvalid},exportedTheme(){const e=!this.keepFonts&&!this.keepShadows&&!this.keepOpacity&&!this.keepRoundness&&!this.keepColor,t={themeEngineVersion:Be};return(this.keepFonts||e)&&(t.fonts=this.fontsLocal),(this.keepShadows||e)&&(t.shadows=this.shadowsLocal),(this.keepOpacity||e)&&(t.opacity=this.currentOpacity),(this.keepColor||e)&&(t.colors=this.currentColors),(this.keepRoundness||e)&&(t.radii=this.currentRadii),{_pleroma_theme_version:2,theme:{themeEngineVersion:Be,...this.previewTheme},source:t}},isActive(){const e=this.$parent;return e?e.isActive("theme"):!1}},components:{ColorInput:ft,OpacityInput:jn,RangeInput:jb,ContrastRatio:el,ShadowControl:zn,FontControl:Qi,TabSwitcher:Xt,Preview:Fn,Checkbox:$e,Select:et},methods:{loadTheme({theme:e,source:t,_pleroma_theme_version:s},n,i=!1){this.dismissWarning();const a=n==="localStorage"&&!e.colors?"l1":s,l=(e||{}).themeEngineVersion,r=(t||{}).themeEngineVersion||2,p=r===Be,c=e!==void 0&&t!==void 0&&r!==l,h=t&&i||!e;!(p&&!c)&&!h&&a!=="l1"&&n!=="defaults"&&(c&&n==="localStorage"?this.themeWarning={origin:n,themeEngineVersion:r,type:"snapshot_source_mismatch"}:e?p||(this.themeWarning={origin:n,noActionsPossible:!t,themeEngineVersion:r,type:"wrong_version"}):this.themeWarning={origin:n,noActionsPossible:!0,themeEngineVersion:r,type:"no_snapshot_old_version"}),this.normalizeLocalState(e,a,t,h)},forceLoadLocalStorage(){this.loadThemeFromLocalStorage(!0)},dismissWarning(){this.themeWarning=void 0,this.tempImportFile=void 0},forceLoad(){const{origin:e}=this.themeWarning;switch(e){case"localStorage":this.loadThemeFromLocalStorage(!0);break;case"file":this.onImport(this.tempImportFile,!0);break}this.dismissWarning()},forceSnapshot(){const{origin:e}=this.themeWarning;switch(e){case"localStorage":this.loadThemeFromLocalStorage(!1,!0);break;case"file":console.error("Forcing snapshot from file is not supported yet");break}this.dismissWarning()},loadThemeFromLocalStorage(e=!1){var s;const t=(s=this.themeDataUsed)==null?void 0:s.source;t&&this.loadTheme({theme:t},"localStorage",e)},setCustomTheme(){x().setThemeV2({customTheme:{ignore:!0,themeFileVersion:this.selectedVersion,themeEngineVersion:Be,...this.previewTheme},customThemeSource:{themeFileVersion:this.selectedVersion,themeEngineVersion:Be,shadows:this.shadowsLocal,fonts:this.fontsLocal,opacity:this.currentOpacity,colors:this.currentColors,radii:this.currentRadii}})},updatePreviewColors(){const e=er({opacity:this.currentOpacity,colors:this.currentColors});this.previewTheme.colors=e.theme.colors,this.previewTheme.opacity=e.theme.opacity},updatePreviewShadows(){this.previewTheme.shadows=Zl({shadows:this.shadowsLocal,opacity:this.previewTheme.opacity,themeEngineVersion:this.engineVersion},this.previewTheme.colors,xl(this.previewTheme.colors.bg)<.5?1:-1).theme.shadows},importTheme(){this.themeImporter.importData()},exportTheme(){this.themeExporter.exportData()},onImport(e,t=!1){this.tempImportFile=e,this.loadTheme(e,"file",t)},onImportFailure(){x().pushGlobalNotice({messageKey:"settings.invalid_theme_imported",level:"error"})},importValidator(e){const t=e._pleroma_theme_version;return t>=1||t<=2},clearAll(){this.loadThemeFromLocalStorage()},clearV1(){Object.keys(this.$data).filter(e=>e.endsWith("ColorLocal")||e.endsWith("OpacityLocal")).filter(e=>!Nv.includes(e)).forEach(e=>{this.$data[e]=void 0})},clearRoundness(){Object.keys(this.$data).filter(e=>e.endsWith("RadiusLocal")).forEach(e=>{this.$data[e]=void 0})},clearOpacity(){Object.keys(this.$data).filter(e=>e.endsWith("OpacityLocal")).forEach(e=>{this.$data[e]=void 0})},clearShadows(){this.shadowsLocal={}},clearFonts(){this.fontsLocal={}},normalizeLocalState(e,t=0,s,n=!1){let i;typeof s<"u"&&(n||(s==null?void 0:s.themeEngineVersion)===Be)?(i=s,t=s.themeEngineVersion):i=e;const a=i.radii||i,l=i.opacity,r=i.shadows||{},p=i.fonts||{},c=i.themeEngineVersion?i.colors||i:Jl(i.colors||i);if(t===0&&(i.version&&(t=i.version),typeof c.text>"u"&&typeof c.fg<"u"&&(t=1),typeof c.text<"u"&&typeof c.fg<"u"&&(t=2)),this.engineVersion=t,t===1&&(this.fgColorLocal=Ze(c.btn),this.textColorLocal=Ze(c.fg)),!this.keepColor){this.clearV1();const h=new Set(t!==1?Object.keys(Rt):[]);(t===1||t==="l1")&&h.add("bg").add("link").add("cRed").add("cBlue").add("cGreen").add("cOrange"),h.forEach(m=>{const g=c[m],k=Ze(c[m]);this[m+"ColorLocal"]=k==="#aN"?g:k})}l&&!this.keepOpacity&&(this.clearOpacity(),Object.entries(l).forEach(([h,m])=>{typeof m>"u"||m===null||Number.isNaN(m)||(this[h+"OpacityLocal"]=m)})),this.keepRoundness||(this.clearRoundness(),Object.entries(a).forEach(([h,m])=>{const g=h.endsWith("Radius")?h.split("Radius")[0]:h;this[g+"RadiusLocal"]=m})),this.keepShadows||(this.clearShadows(),t===2?this.shadowsLocal=Ql(r,this.previewTheme.opacity):this.shadowsLocal=r,this.updatePreviewColors(),this.updatePreviewShadows(),this.shadowSelected=this.shadowsAvailable[0]),this.keepFonts||(this.clearFonts(),this.fontsLocal=p)},updateTheme3Preview(){const e=yi(this.previewTheme),t=Ct({inputRuleset:e,ultimateBackgroundColor:"#000000",liteMode:!0});this.themeV3Preview=Ln(Ht(t.eager),"#theme-preview").join(`
`)}},watch:{themeDataUsed(){this.loadThemeFromLocalStorage()},currentRadii(){try{this.previewTheme.radii=Xl({radii:this.currentRadii}).theme.radii,this.radiiInvalid=!1}catch(e){this.radiiInvalid=!0,console.warn(e)}},shadowsLocal:{handler(){try{this.updatePreviewShadows(),this.shadowsInvalid=!1}catch(e){this.shadowsInvalid=!0,console.warn(e)}},deep:!0},fontsLocal:{handler(){try{this.previewTheme.fonts=Kl({fonts:this.fontsLocal}).theme.fonts,this.fontsInvalid=!1}catch(e){this.fontsInvalid=!0,console.warn(e)}},deep:!0},currentColors(){try{this.updatePreviewColors(),this.colorsInvalid=!1}catch(e){this.colorsInvalid=!0,console.warn(e)}},currentOpacity(){try{this.updatePreviewColors()}catch(e){console.warn(e)}},selected(){this.selectedTheme=Object.entries(this.availableStyles).find(([,e])=>Array.isArray(e)?e[0]===this.selected:e.name===this.selected)[1]},selectedTheme(){this.dismissWarning(),this.selectedVersion===1?(this.keepRoundness||this.clearRoundness(),this.keepShadows||this.clearShadows(),this.keepOpacity||this.clearOpacity(),this.keepColor||(this.clearV1(),this.bgColorLocal=this.selectedTheme[1],this.fgColorLocal=this.selectedTheme[2],this.textColorLocal=this.selectedTheme[3],this.linkColorLocal=this.selectedTheme[4],this.cRedColorLocal=this.selectedTheme[5],this.cGreenColorLocal=this.selectedTheme[6],this.cBlueColorLocal=this.selectedTheme[7],this.cOrangeColorLocal=this.selectedTheme[8])):this.selectedVersion>=2&&this.normalizeLocalState(this.selectedTheme.theme,2,this.selectedTheme.source)}}},qv={class:"theme-tab"},zv={class:"alert warning deprecation-warning"},Hv={class:"presets-container"},Wv={class:"save-load"},Yv={key:0,class:"theme-warning"},Gv={class:"alert warning"},Kv={class:"buttons"},Xv={class:"top"},Jv={class:"presets"},Qv={for:"preset-switcher",class:"select"},Zv=["value"],xv={class:"export-import"},e1={class:"save-load-options"},t1={class:"keep-option"},s1={class:"keep-option"},n1={class:"keep-option"},o1={class:"keep-option"},a1={class:"keep-option"},i1=["label"],l1={class:"tab-header"},r1={class:"tab-header-buttons"},d1={class:"color-item"},u1={class:"color-item"},c1={class:"color-item"},p1={class:"color-item"},h1=["label"],m1={class:"tab-header"},f1={class:"color-item"},g1={class:"color-item"},b1={class:"color-item"},v1={class:"color-item"},y1={class:"color-item"},w1={class:"color-item"},$1={class:"color-item"},k1={class:"color-item"},C1={class:"color-item"},T1={class:"color-item"},V1={class:"color-item"},S1={class:"color-item"},L1={class:"color-item"},P1={class:"color-item"},I1={class:"color-item"},E1={class:"color-item"},_1={class:"color-item"},A1={class:"color-item"},O1=["label"],U1={class:"tab-header"},M1=["label"],B1={class:"tab-header shadow-selector"},R1={class:"select-container"},D1=["value"],N1={class:"override"},F1=["label"],j1={class:"tab-header"},q1={class:"apply-container"},z1=["disabled"];function H1(e,t,s,n,i,a){const l=L("Select"),r=L("Checkbox"),p=L("preview"),c=L("ColorInput"),h=L("OpacityInput"),m=L("ContrastRatio"),g=L("RangeInput"),k=L("ShadowControl"),V=L("FontControl"),S=L("tab-switcher");return f(),w("div",qv,[o("div",zv,d(e.$t("settings.style.themes2_outdated")),1),o("div",Hv,[o("div",Wv,[e.themeWarning?(f(),w("div",Yv,[o("div",Gv,d(e.themeWarningHelp),1),o("div",Kv,[e.themeWarning.type==="snapshot_source_mismatch"?(f(),w(K,{key:0},[o("button",{class:"btn button-default",onClick:t[0]||(t[0]=(...C)=>e.forceLoad&&e.forceLoad(...C))},d(e.$t("settings.style.switcher.use_source")),1),o("button",{class:"btn button-default",onClick:t[1]||(t[1]=(...C)=>e.forceSnapshot&&e.forceSnapshot(...C))},d(e.$t("settings.style.switcher.use_snapshot")),1)],64)):e.themeWarning.noActionsPossible?(f(),w("button",{key:1,class:"btn button-default",onClick:t[2]||(t[2]=(...C)=>e.dismissWarning&&e.dismissWarning(...C))},d(e.$t("general.dismiss")),1)):(f(),w(K,{key:2},[o("button",{class:"btn button-default",onClick:t[3]||(t[3]=(...C)=>e.forceLoad&&e.forceLoad(...C))},d(e.$t("settings.style.switcher.load_theme")),1),o("button",{class:"btn button-default",onClick:t[4]||(t[4]=(...C)=>e.dismissWarning&&e.dismissWarning(...C))},d(e.$t("settings.style.switcher.keep_as_is")),1)],64))])])):T("",!0),o("div",Xv,[o("div",Jv,[$(d(e.$t("settings.presets"))+" ",1),o("label",Qv,[u(l,{id:"preset-switcher",modelValue:e.selected,"onUpdate:modelValue":t[5]||(t[5]=C=>e.selected=C),class:"preset-switcher"},{default:v(()=>[(f(!0),w(K,null,ne(e.availableStyles,C=>(f(),w("option",{key:C.name,value:C.name||C[0],style:Xe({backgroundColor:C[1]||(C.theme||C.source).colors.bg,color:C[3]||(C.theme||C.source).colors.text})},d(C[0]||C.name),13,Zv))),128))]),_:1},8,["modelValue"])])]),o("div",xv,[o("button",{class:"btn button-default",onClick:t[6]||(t[6]=(...C)=>e.importTheme&&e.importTheme(...C))},d(e.$t("settings.import_theme")),1),o("button",{class:"btn button-default",onClick:t[7]||(t[7]=(...C)=>e.exportTheme&&e.exportTheme(...C))},d(e.$t("settings.export_theme")),1)])])]),o("div",e1,[o("span",t1,[u(r,{modelValue:e.keepColor,"onUpdate:modelValue":t[8]||(t[8]=C=>e.keepColor=C)},{default:v(()=>[$(d(e.$t("settings.style.switcher.keep_color")),1)]),_:1},8,["modelValue"])]),o("span",s1,[u(r,{modelValue:e.keepShadows,"onUpdate:modelValue":t[9]||(t[9]=C=>e.keepShadows=C)},{default:v(()=>[$(d(e.$t("settings.style.switcher.keep_shadows")),1)]),_:1},8,["modelValue"])]),o("span",n1,[u(r,{modelValue:e.keepOpacity,"onUpdate:modelValue":t[10]||(t[10]=C=>e.keepOpacity=C)},{default:v(()=>[$(d(e.$t("settings.style.switcher.keep_opacity")),1)]),_:1},8,["modelValue"])]),o("span",o1,[u(r,{modelValue:e.keepRoundness,"onUpdate:modelValue":t[11]||(t[11]=C=>e.keepRoundness=C)},{default:v(()=>[$(d(e.$t("settings.style.switcher.keep_roundness")),1)]),_:1},8,["modelValue"])]),o("span",a1,[u(r,{modelValue:e.keepFonts,"onUpdate:modelValue":t[12]||(t[12]=C=>e.keepFonts=C)},{default:v(()=>[$(d(e.$t("settings.style.switcher.keep_fonts")),1)]),_:1},8,["modelValue"])]),o("p",null,d(e.$t("settings.style.switcher.save_load_hint")),1)])]),(f(),H(mt("style"),{innerHTML:e.themeV3Preview},null,8,["innerHTML"])),u(p,{id:"theme-preview"}),o("div",null,[o("button",{class:"btn button-default",onClick:t[13]||(t[13]=(...C)=>e.updateTheme3Preview&&e.updateTheme3Preview(...C))},d(e.$t("settings.style.update_preview")),1)]),(f(),H(ar,null,[u(S,{key:"style-tweak"},{default:v(()=>{var C,E,B,M,R,G,b,I,A,O,U,F,j,_,N,Z,de,Le,me,Oe,Pe,ke,Ce,Ie,Fe,Ue,Ee,fe,pe,Te,be,gt,nt,ot,P,D,z,q,W,ie,se,te,je,Me,Ve,ve,qe,_e,at,_t,At,Ot,Ut,Hn,Wn,Yn,Gn,Kn,Xn,Jn,Qn,Zn,xn,eo,to,so,no,oo,ao,io,lo,ro,uo,co,po,ho,mo,fo,go,bo,vo,yo,wo,$o,ko,Co,To,Vo,So,Lo,Po,Io,Eo;return[o("div",{label:e.$t("settings.style.common_colors._tab_label"),class:"color-container"},[o("div",l1,[o("p",null,d(e.$t("settings.theme_help")),1),o("div",r1,[o("button",{class:"btn button-default",onClick:t[14]||(t[14]=(...y)=>e.clearOpacity&&e.clearOpacity(...y))},d(e.$t("settings.style.switcher.clear_opacity")),1),o("button",{class:"btn button-default",onClick:t[15]||(t[15]=(...y)=>e.clearV1&&e.clearV1(...y))},d(e.$t("settings.style.switcher.clear_all")),1)])]),o("p",null,d(e.$t("settings.theme_help_v2_1")),1),o("h4",null,d(e.$t("settings.style.common_colors.main")),1),o("div",d1,[u(c,{modelValue:e.bgColorLocal,"onUpdate:modelValue":t[16]||(t[16]=y=>e.bgColorLocal=y),name:"bgColor",label:e.$t("settings.background")},null,8,["modelValue","label"]),u(h,{modelValue:e.bgOpacityLocal,"onUpdate:modelValue":t[17]||(t[17]=y=>e.bgOpacityLocal=y),name:"bgOpacity",fallback:(C=e.previewTheme.opacity)==null?void 0:C.bg},null,8,["modelValue","fallback"]),u(c,{modelValue:e.textColorLocal,"onUpdate:modelValue":t[18]||(t[18]=y=>e.textColorLocal=y),name:"textColor",label:e.$t("settings.text")},null,8,["modelValue","label"]),u(m,{contrast:e.previewContrast.bgText},null,8,["contrast"]),u(c,{modelValue:e.accentColorLocal,"onUpdate:modelValue":t[19]||(t[19]=y=>e.accentColorLocal=y),name:"accentColor",fallback:(E=e.previewTheme.colors)==null?void 0:E.link,label:e.$t("settings.accent"),"show-optional-checkbox":typeof e.linkColorLocal<"u"},null,8,["modelValue","fallback","label","show-optional-checkbox"]),u(c,{modelValue:e.linkColorLocal,"onUpdate:modelValue":t[20]||(t[20]=y=>e.linkColorLocal=y),name:"linkColor",fallback:(B=e.previewTheme.colors)==null?void 0:B.accent,label:e.$t("settings.links"),"show-optional-checkbox":typeof e.accentColorLocal<"u"},null,8,["modelValue","fallback","label","show-optional-checkbox"]),u(m,{contrast:e.previewContrast.bgLink},null,8,["contrast"])]),o("div",u1,[u(c,{modelValue:e.fgColorLocal,"onUpdate:modelValue":t[21]||(t[21]=y=>e.fgColorLocal=y),name:"fgColor",label:e.$t("settings.foreground")},null,8,["modelValue","label"]),u(c,{modelValue:e.fgTextColorLocal,"onUpdate:modelValue":t[22]||(t[22]=y=>e.fgTextColorLocal=y),name:"fgTextColor",label:e.$t("settings.text"),fallback:(M=e.previewTheme.colors)==null?void 0:M.fgText},null,8,["modelValue","label","fallback"]),u(c,{modelValue:e.fgLinkColorLocal,"onUpdate:modelValue":t[23]||(t[23]=y=>e.fgLinkColorLocal=y),name:"fgLinkColor",label:e.$t("settings.links"),fallback:(R=e.previewTheme.colors)==null?void 0:R.fgLink},null,8,["modelValue","label","fallback"]),o("p",null,d(e.$t("settings.style.common_colors.foreground_hint")),1)]),o("h4",null,d(e.$t("settings.style.common_colors.rgbo")),1),o("div",c1,[u(c,{modelValue:e.cRedColorLocal,"onUpdate:modelValue":t[24]||(t[24]=y=>e.cRedColorLocal=y),name:"cRedColor",label:e.$t("settings.cRed")},null,8,["modelValue","label"]),u(m,{contrast:e.previewContrast.bgCRed},null,8,["contrast"]),u(c,{modelValue:e.cBlueColorLocal,"onUpdate:modelValue":t[25]||(t[25]=y=>e.cBlueColorLocal=y),name:"cBlueColor",label:e.$t("settings.cBlue")},null,8,["modelValue","label"]),u(m,{contrast:e.previewContrast.bgCBlue},null,8,["contrast"])]),o("div",p1,[u(c,{modelValue:e.cGreenColorLocal,"onUpdate:modelValue":t[26]||(t[26]=y=>e.cGreenColorLocal=y),name:"cGreenColor",label:e.$t("settings.cGreen")},null,8,["modelValue","label"]),u(m,{contrast:e.previewContrast.bgCGreen},null,8,["contrast"]),u(c,{modelValue:e.cOrangeColorLocal,"onUpdate:modelValue":t[27]||(t[27]=y=>e.cOrangeColorLocal=y),name:"cOrangeColor",label:e.$t("settings.cOrange")},null,8,["modelValue","label"]),u(m,{contrast:e.previewContrast.bgCOrange},null,8,["contrast"])]),o("p",null,d(e.$t("settings.theme_help_v2_2")),1)],8,i1),o("div",{label:e.$t("settings.style.advanced_colors._tab_label"),class:"color-container"},[o("div",m1,[o("p",null,d(e.$t("settings.theme_help")),1),o("button",{class:"btn button-default",onClick:t[28]||(t[28]=(...y)=>e.clearOpacity&&e.clearOpacity(...y))},d(e.$t("settings.style.switcher.clear_opacity")),1),o("button",{class:"btn button-default",onClick:t[29]||(t[29]=(...y)=>e.clearV1&&e.clearV1(...y))},d(e.$t("settings.style.switcher.clear_all")),1)]),o("div",f1,[o("h4",null,d(e.$t("settings.style.advanced_colors.post")),1),u(c,{modelValue:e.postLinkColorLocal,"onUpdate:modelValue":t[30]||(t[30]=y=>e.postLinkColorLocal=y),name:"postLinkColor",fallback:(G=e.previewTheme.colors)==null?void 0:G.accent,label:e.$t("settings.links")},null,8,["modelValue","fallback","label"]),u(m,{contrast:e.previewContrast.postLink},null,8,["contrast"]),u(c,{modelValue:e.postGreentextColorLocal,"onUpdate:modelValue":t[31]||(t[31]=y=>e.postGreentextColorLocal=y),name:"postGreentextColor",fallback:(b=e.previewTheme.colors)==null?void 0:b.cGreen,label:e.$t("settings.greentext")},null,8,["modelValue","fallback","label"]),u(m,{contrast:e.previewContrast.postGreentext},null,8,["contrast"]),o("h4",null,d(e.$t("settings.style.advanced_colors.alert")),1),u(c,{modelValue:e.alertErrorColorLocal,"onUpdate:modelValue":t[32]||(t[32]=y=>e.alertErrorColorLocal=y),name:"alertError",label:e.$t("settings.style.advanced_colors.alert_error"),fallback:(I=e.previewTheme.colors)==null?void 0:I.alertError},null,8,["modelValue","label","fallback"]),u(c,{modelValue:e.alertErrorTextColorLocal,"onUpdate:modelValue":t[33]||(t[33]=y=>e.alertErrorTextColorLocal=y),name:"alertErrorText",label:e.$t("settings.text"),fallback:(A=e.previewTheme.colors)==null?void 0:A.alertErrorText},null,8,["modelValue","label","fallback"]),u(m,{contrast:e.previewContrast.alertErrorText,large:""},null,8,["contrast"]),u(c,{modelValue:e.alertWarningColorLocal,"onUpdate:modelValue":t[34]||(t[34]=y=>e.alertWarningColorLocal=y),name:"alertWarning",label:e.$t("settings.style.advanced_colors.alert_warning"),fallback:(O=e.previewTheme.colors)==null?void 0:O.alertWarning},null,8,["modelValue","label","fallback"]),u(c,{modelValue:e.alertWarningTextColorLocal,"onUpdate:modelValue":t[35]||(t[35]=y=>e.alertWarningTextColorLocal=y),name:"alertWarningText",label:e.$t("settings.text"),fallback:(U=e.previewTheme.colors)==null?void 0:U.alertWarningText},null,8,["modelValue","label","fallback"]),u(m,{contrast:e.previewContrast.alertWarningText,large:""},null,8,["contrast"]),u(c,{modelValue:e.alertNeutralColorLocal,"onUpdate:modelValue":t[36]||(t[36]=y=>e.alertNeutralColorLocal=y),name:"alertNeutral",label:e.$t("settings.style.advanced_colors.alert_neutral"),fallback:(F=e.previewTheme.colors)==null?void 0:F.alertNeutral},null,8,["modelValue","label","fallback"]),u(c,{modelValue:e.alertNeutralTextColorLocal,"onUpdate:modelValue":t[37]||(t[37]=y=>e.alertNeutralTextColorLocal=y),name:"alertNeutralText",label:e.$t("settings.text"),fallback:(j=e.previewTheme.colors)==null?void 0:j.alertNeutralText},null,8,["modelValue","label","fallback"]),u(m,{contrast:e.previewContrast.alertNeutralText,large:""},null,8,["contrast"]),u(h,{modelValue:e.alertOpacityLocal,"onUpdate:modelValue":t[38]||(t[38]=y=>e.alertOpacityLocal=y),name:"alertOpacity",fallback:(_=e.previewTheme.opacity)==null?void 0:_.alert},null,8,["modelValue","fallback"])]),o("div",g1,[o("h4",null,d(e.$t("settings.style.advanced_colors.badge")),1),u(c,{modelValue:e.badgeNotificationColorLocal,"onUpdate:modelValue":t[39]||(t[39]=y=>e.badgeNotificationColorLocal=y),name:"badgeNotification",label:e.$t("settings.style.advanced_colors.badge_notification"),fallback:(N=e.previewTheme.colors)==null?void 0:N.badgeNotification},null,8,["modelValue","label","fallback"]),u(c,{modelValue:e.badgeNotificationTextColorLocal,"onUpdate:modelValue":t[40]||(t[40]=y=>e.badgeNotificationTextColorLocal=y),name:"badgeNotificationText",label:e.$t("settings.text"),fallback:(Z=e.previewTheme.colors)==null?void 0:Z.badgeNotificationText},null,8,["modelValue","label","fallback"]),u(m,{contrast:e.previewContrast.badgeNotificationText,large:""},null,8,["contrast"])]),o("div",b1,[o("h4",null,d(e.$t("settings.style.advanced_colors.panel_header")),1),u(c,{modelValue:e.panelColorLocal,"onUpdate:modelValue":t[41]||(t[41]=y=>e.panelColorLocal=y),name:"panelColor",fallback:(de=e.previewTheme.colors)==null?void 0:de.panel,label:e.$t("settings.background")},null,8,["modelValue","fallback","label"]),u(h,{modelValue:e.panelOpacityLocal,"onUpdate:modelValue":t[42]||(t[42]=y=>e.panelOpacityLocal=y),name:"panelOpacity",fallback:(Le=e.previewTheme.opacity)==null?void 0:Le.panel,disabled:e.panelColorLocal==="transparent"},null,8,["modelValue","fallback","disabled"]),u(c,{modelValue:e.panelTextColorLocal,"onUpdate:modelValue":t[43]||(t[43]=y=>e.panelTextColorLocal=y),name:"panelTextColor",fallback:(me=e.previewTheme.colors)==null?void 0:me.panelText,label:e.$t("settings.text")},null,8,["modelValue","fallback","label"]),u(m,{contrast:e.previewContrast.panelText,large:""},null,8,["contrast"]),u(c,{modelValue:e.panelLinkColorLocal,"onUpdate:modelValue":t[44]||(t[44]=y=>e.panelLinkColorLocal=y),name:"panelLinkColor",fallback:(Oe=e.previewTheme.colors)==null?void 0:Oe.panelLink,label:e.$t("settings.links")},null,8,["modelValue","fallback","label"]),u(m,{contrast:e.previewContrast.panelLink,large:""},null,8,["contrast"])]),o("div",v1,[o("h4",null,d(e.$t("settings.style.advanced_colors.top_bar")),1),u(c,{modelValue:e.topBarColorLocal,"onUpdate:modelValue":t[45]||(t[45]=y=>e.topBarColorLocal=y),name:"topBarColor",fallback:(Pe=e.previewTheme.colors)==null?void 0:Pe.topBar,label:e.$t("settings.background")},null,8,["modelValue","fallback","label"]),u(c,{modelValue:e.topBarTextColorLocal,"onUpdate:modelValue":t[46]||(t[46]=y=>e.topBarTextColorLocal=y),name:"topBarTextColor",fallback:(ke=e.previewTheme.colors)==null?void 0:ke.topBarText,label:e.$t("settings.text")},null,8,["modelValue","fallback","label"]),u(m,{contrast:e.previewContrast.topBarText},null,8,["contrast"]),u(c,{modelValue:e.topBarLinkColorLocal,"onUpdate:modelValue":t[47]||(t[47]=y=>e.topBarLinkColorLocal=y),name:"topBarLinkColor",fallback:(Ce=e.previewTheme.colors)==null?void 0:Ce.topBarLink,label:e.$t("settings.links")},null,8,["modelValue","fallback","label"]),u(m,{contrast:e.previewContrast.topBarLink},null,8,["contrast"])]),o("div",y1,[o("h4",null,d(e.$t("settings.style.advanced_colors.inputs")),1),u(c,{modelValue:e.inputColorLocal,"onUpdate:modelValue":t[48]||(t[48]=y=>e.inputColorLocal=y),name:"inputColor",fallback:(Ie=e.previewTheme.colors)==null?void 0:Ie.input,label:e.$t("settings.background")},null,8,["modelValue","fallback","label"]),u(h,{modelValue:e.inputOpacityLocal,"onUpdate:modelValue":t[49]||(t[49]=y=>e.inputOpacityLocal=y),name:"inputOpacity",fallback:(Fe=e.previewTheme.opacity)==null?void 0:Fe.input,disabled:e.inputColorLocal==="transparent"},null,8,["modelValue","fallback","disabled"]),u(c,{modelValue:e.inputTextColorLocal,"onUpdate:modelValue":t[50]||(t[50]=y=>e.inputTextColorLocal=y),name:"inputTextColor",fallback:(Ue=e.previewTheme.colors)==null?void 0:Ue.inputText,label:e.$t("settings.text")},null,8,["modelValue","fallback","label"]),u(m,{contrast:e.previewContrast.inputText},null,8,["contrast"])]),o("div",w1,[o("h4",null,d(e.$t("settings.style.advanced_colors.buttons")),1),u(c,{modelValue:e.btnColorLocal,"onUpdate:modelValue":t[51]||(t[51]=y=>e.btnColorLocal=y),name:"btnColor",fallback:(Ee=e.previewTheme.colors)==null?void 0:Ee.btn,label:e.$t("settings.background")},null,8,["modelValue","fallback","label"]),u(h,{modelValue:e.btnOpacityLocal,"onUpdate:modelValue":t[52]||(t[52]=y=>e.btnOpacityLocal=y),name:"btnOpacity",fallback:(fe=e.previewTheme.opacity)==null?void 0:fe.btn,disabled:e.btnColorLocal==="transparent"},null,8,["modelValue","fallback","disabled"]),u(c,{modelValue:e.btnTextColorLocal,"onUpdate:modelValue":t[53]||(t[53]=y=>e.btnTextColorLocal=y),name:"btnTextColor",fallback:(pe=e.previewTheme.colors)==null?void 0:pe.btnText,label:e.$t("settings.text")},null,8,["modelValue","fallback","label"]),u(m,{contrast:e.previewContrast.btnText},null,8,["contrast"]),u(c,{modelValue:e.btnPanelTextColorLocal,"onUpdate:modelValue":t[54]||(t[54]=y=>e.btnPanelTextColorLocal=y),name:"btnPanelTextColor",fallback:(Te=e.previewTheme.colors)==null?void 0:Te.btnPanelText,label:e.$t("settings.style.advanced_colors.panel_header")},null,8,["modelValue","fallback","label"]),u(m,{contrast:e.previewContrast.btnPanelText},null,8,["contrast"]),u(c,{modelValue:e.btnTopBarTextColorLocal,"onUpdate:modelValue":t[55]||(t[55]=y=>e.btnTopBarTextColorLocal=y),name:"btnTopBarTextColor",fallback:(be=e.previewTheme.colors)==null?void 0:be.btnTopBarText,label:e.$t("settings.style.advanced_colors.top_bar")},null,8,["modelValue","fallback","label"]),u(m,{contrast:e.previewContrast.btnTopBarText},null,8,["contrast"]),o("h5",null,d(e.$t("settings.style.advanced_colors.pressed")),1),u(c,{modelValue:e.btnPressedColorLocal,"onUpdate:modelValue":t[56]||(t[56]=y=>e.btnPressedColorLocal=y),name:"btnPressedColor",fallback:(gt=e.previewTheme.colors)==null?void 0:gt.btnPressed,label:e.$t("settings.background")},null,8,["modelValue","fallback","label"]),u(c,{modelValue:e.btnPressedTextColorLocal,"onUpdate:modelValue":t[57]||(t[57]=y=>e.btnPressedTextColorLocal=y),name:"btnPressedTextColor",fallback:(nt=e.previewTheme.colors)==null?void 0:nt.btnPressedText,label:e.$t("settings.text")},null,8,["modelValue","fallback","label"]),u(m,{contrast:e.previewContrast.btnPressedText},null,8,["contrast"]),u(c,{modelValue:e.btnPressedPanelTextColorLocal,"onUpdate:modelValue":t[58]||(t[58]=y=>e.btnPressedPanelTextColorLocal=y),name:"btnPressedPanelTextColor",fallback:(ot=e.previewTheme.colors)==null?void 0:ot.btnPressedPanelText,label:e.$t("settings.style.advanced_colors.panel_header")},null,8,["modelValue","fallback","label"]),u(m,{contrast:e.previewContrast.btnPressedPanelText},null,8,["contrast"]),u(c,{modelValue:e.btnPressedTopBarTextColorLocal,"onUpdate:modelValue":t[59]||(t[59]=y=>e.btnPressedTopBarTextColorLocal=y),name:"btnPressedTopBarTextColor",fallback:(P=e.previewTheme.colors)==null?void 0:P.btnPressedTopBarText,label:e.$t("settings.style.advanced_colors.top_bar")},null,8,["modelValue","fallback","label"]),u(m,{contrast:e.previewContrast.btnPressedTopBarText},null,8,["contrast"]),o("h5",null,d(e.$t("settings.style.advanced_colors.disabled")),1),u(c,{modelValue:e.btnDisabledColorLocal,"onUpdate:modelValue":t[60]||(t[60]=y=>e.btnDisabledColorLocal=y),name:"btnDisabledColor",fallback:(D=e.previewTheme.colors)==null?void 0:D.btnDisabled,label:e.$t("settings.background")},null,8,["modelValue","fallback","label"]),u(c,{modelValue:e.btnDisabledTextColorLocal,"onUpdate:modelValue":t[61]||(t[61]=y=>e.btnDisabledTextColorLocal=y),name:"btnDisabledTextColor",fallback:(z=e.previewTheme.colors)==null?void 0:z.btnDisabledText,label:e.$t("settings.text")},null,8,["modelValue","fallback","label"]),u(c,{modelValue:e.btnDisabledPanelTextColorLocal,"onUpdate:modelValue":t[62]||(t[62]=y=>e.btnDisabledPanelTextColorLocal=y),name:"btnDisabledPanelTextColor",fallback:(q=e.previewTheme.colors)==null?void 0:q.btnDisabledPanelText,label:e.$t("settings.style.advanced_colors.panel_header")},null,8,["modelValue","fallback","label"]),u(c,{modelValue:e.btnDisabledTopBarTextColorLocal,"onUpdate:modelValue":t[63]||(t[63]=y=>e.btnDisabledTopBarTextColorLocal=y),name:"btnDisabledTopBarTextColor",fallback:(W=e.previewTheme.colors)==null?void 0:W.btnDisabledTopBarText,label:e.$t("settings.style.advanced_colors.top_bar")},null,8,["modelValue","fallback","label"]),o("h5",null,d(e.$t("settings.style.advanced_colors.toggled")),1),u(c,{modelValue:e.btnToggledColorLocal,"onUpdate:modelValue":t[64]||(t[64]=y=>e.btnToggledColorLocal=y),name:"btnToggledColor",fallback:(ie=e.previewTheme.colors)==null?void 0:ie.btnToggled,label:e.$t("settings.background")},null,8,["modelValue","fallback","label"]),u(c,{modelValue:e.btnToggledTextColorLocal,"onUpdate:modelValue":t[65]||(t[65]=y=>e.btnToggledTextColorLocal=y),name:"btnToggledTextColor",fallback:(se=e.previewTheme.colors)==null?void 0:se.btnToggledText,label:e.$t("settings.text")},null,8,["modelValue","fallback","label"]),u(m,{contrast:e.previewContrast.btnToggledText},null,8,["contrast"]),u(c,{modelValue:e.btnToggledPanelTextColorLocal,"onUpdate:modelValue":t[66]||(t[66]=y=>e.btnToggledPanelTextColorLocal=y),name:"btnToggledPanelTextColor",fallback:(te=e.previewTheme.colors)==null?void 0:te.btnToggledPanelText,label:e.$t("settings.style.advanced_colors.panel_header")},null,8,["modelValue","fallback","label"]),u(m,{contrast:e.previewContrast.btnToggledPanelText},null,8,["contrast"]),u(c,{modelValue:e.btnToggledTopBarTextColorLocal,"onUpdate:modelValue":t[67]||(t[67]=y=>e.btnToggledTopBarTextColorLocal=y),name:"btnToggledTopBarTextColor",fallback:(je=e.previewTheme.colors)==null?void 0:je.btnToggledTopBarText,label:e.$t("settings.style.advanced_colors.top_bar")},null,8,["modelValue","fallback","label"]),u(m,{contrast:e.previewContrast.btnToggledTopBarText},null,8,["contrast"])]),o("div",$1,[o("h4",null,d(e.$t("settings.style.advanced_colors.tabs")),1),u(c,{modelValue:e.tabColorLocal,"onUpdate:modelValue":t[68]||(t[68]=y=>e.tabColorLocal=y),name:"tabColor",fallback:(Me=e.previewTheme.colors)==null?void 0:Me.tab,label:e.$t("settings.background")},null,8,["modelValue","fallback","label"]),u(c,{modelValue:e.tabTextColorLocal,"onUpdate:modelValue":t[69]||(t[69]=y=>e.tabTextColorLocal=y),name:"tabTextColor",fallback:(Ve=e.previewTheme.colors)==null?void 0:Ve.tabText,label:e.$t("settings.text")},null,8,["modelValue","fallback","label"]),u(m,{contrast:e.previewContrast.tabText},null,8,["contrast"]),u(c,{modelValue:e.tabActiveTextColorLocal,"onUpdate:modelValue":t[70]||(t[70]=y=>e.tabActiveTextColorLocal=y),name:"tabActiveTextColor",fallback:(ve=e.previewTheme.colors)==null?void 0:ve.tabActiveText,label:e.$t("settings.text")},null,8,["modelValue","fallback","label"]),u(m,{contrast:e.previewContrast.tabActiveText},null,8,["contrast"])]),o("div",k1,[o("h4",null,d(e.$t("settings.style.advanced_colors.borders")),1),u(c,{modelValue:e.borderColorLocal,"onUpdate:modelValue":t[71]||(t[71]=y=>e.borderColorLocal=y),name:"borderColor",fallback:(qe=e.previewTheme.colors)==null?void 0:qe.border,label:e.$t("settings.style.common.color")},null,8,["modelValue","fallback","label"]),u(h,{modelValue:e.borderOpacityLocal,"onUpdate:modelValue":t[72]||(t[72]=y=>e.borderOpacityLocal=y),name:"borderOpacity",fallback:(_e=e.previewTheme.opacity)==null?void 0:_e.border,disabled:e.borderColorLocal==="transparent"},null,8,["modelValue","fallback","disabled"])]),o("div",C1,[o("h4",null,d(e.$t("settings.style.advanced_colors.faint_text")),1),u(c,{modelValue:e.faintColorLocal,"onUpdate:modelValue":t[73]||(t[73]=y=>e.faintColorLocal=y),name:"faintColor",fallback:(at=e.previewTheme.colors)==null?void 0:at.faint,label:e.$t("settings.text")},null,8,["modelValue","fallback","label"]),u(c,{modelValue:e.faintLinkColorLocal,"onUpdate:modelValue":t[74]||(t[74]=y=>e.faintLinkColorLocal=y),name:"faintLinkColor",fallback:(_t=e.previewTheme.colors)==null?void 0:_t.faintLink,label:e.$t("settings.links")},null,8,["modelValue","fallback","label"]),u(c,{modelValue:e.panelFaintColorLocal,"onUpdate:modelValue":t[75]||(t[75]=y=>e.panelFaintColorLocal=y),name:"panelFaintColor",fallback:(At=e.previewTheme.colors)==null?void 0:At.panelFaint,label:e.$t("settings.style.advanced_colors.panel_header")},null,8,["modelValue","fallback","label"]),u(h,{modelValue:e.faintOpacityLocal,"onUpdate:modelValue":t[76]||(t[76]=y=>e.faintOpacityLocal=y),name:"faintOpacity",fallback:(Ot=e.previewTheme.opacity)==null?void 0:Ot.faint},null,8,["modelValue","fallback"])]),o("div",T1,[o("h4",null,d(e.$t("settings.style.advanced_colors.underlay")),1),u(c,{modelValue:e.underlayColorLocal,"onUpdate:modelValue":t[77]||(t[77]=y=>e.underlayColorLocal=y),name:"underlay",label:e.$t("settings.style.advanced_colors.underlay"),fallback:(Ut=e.previewTheme.colors)==null?void 0:Ut.underlay},null,8,["modelValue","label","fallback"]),u(h,{modelValue:e.underlayOpacityLocal,"onUpdate:modelValue":t[78]||(t[78]=y=>e.underlayOpacityLocal=y),name:"underlayOpacity",fallback:(Hn=e.previewTheme.opacity)==null?void 0:Hn.underlay,disabled:e.underlayOpacityLocal==="transparent"},null,8,["modelValue","fallback","disabled"])]),o("div",V1,[o("h4",null,d(e.$t("settings.style.advanced_colors.wallpaper")),1),u(c,{modelValue:e.wallpaperColorLocal,"onUpdate:modelValue":t[79]||(t[79]=y=>e.wallpaperColorLocal=y),name:"wallpaper",label:e.$t("settings.style.advanced_colors.wallpaper"),fallback:(Wn=e.previewTheme.colors)==null?void 0:Wn.wallpaper},null,8,["modelValue","label","fallback"])]),o("div",S1,[o("h4",null,d(e.$t("settings.style.advanced_colors.poll")),1),u(c,{modelValue:e.pollColorLocal,"onUpdate:modelValue":t[80]||(t[80]=y=>e.pollColorLocal=y),name:"poll",label:e.$t("settings.background"),fallback:(Yn=e.previewTheme.colors)==null?void 0:Yn.poll},null,8,["modelValue","label","fallback"]),u(c,{modelValue:e.pollTextColorLocal,"onUpdate:modelValue":t[81]||(t[81]=y=>e.pollTextColorLocal=y),name:"pollText",label:e.$t("settings.text"),fallback:(Gn=e.previewTheme.colors)==null?void 0:Gn.pollText},null,8,["modelValue","label","fallback"])]),o("div",L1,[o("h4",null,d(e.$t("settings.style.advanced_colors.icons")),1),u(c,{modelValue:e.iconColorLocal,"onUpdate:modelValue":t[82]||(t[82]=y=>e.iconColorLocal=y),name:"icon",label:e.$t("settings.style.advanced_colors.icons"),fallback:(Kn=e.previewTheme.colors)==null?void 0:Kn.icon},null,8,["modelValue","label","fallback"])]),o("div",P1,[o("h4",null,d(e.$t("settings.style.advanced_colors.highlight")),1),u(c,{modelValue:e.highlightColorLocal,"onUpdate:modelValue":t[83]||(t[83]=y=>e.highlightColorLocal=y),name:"highlight",label:e.$t("settings.background"),fallback:(Xn=e.previewTheme.colors)==null?void 0:Xn.highlight},null,8,["modelValue","label","fallback"]),u(c,{modelValue:e.highlightTextColorLocal,"onUpdate:modelValue":t[84]||(t[84]=y=>e.highlightTextColorLocal=y),name:"highlightText",label:e.$t("settings.text"),fallback:(Jn=e.previewTheme.colors)==null?void 0:Jn.highlightText},null,8,["modelValue","label","fallback"]),u(m,{contrast:e.previewContrast.highlightText},null,8,["contrast"]),u(c,{modelValue:e.highlightLinkColorLocal,"onUpdate:modelValue":t[85]||(t[85]=y=>e.highlightLinkColorLocal=y),name:"highlightLink",label:e.$t("settings.links"),fallback:(Qn=e.previewTheme.colors)==null?void 0:Qn.highlightLink},null,8,["modelValue","label","fallback"]),u(m,{contrast:e.previewContrast.highlightLink},null,8,["contrast"])]),o("div",I1,[o("h4",null,d(e.$t("settings.style.advanced_colors.popover")),1),u(c,{modelValue:e.popoverColorLocal,"onUpdate:modelValue":t[86]||(t[86]=y=>e.popoverColorLocal=y),name:"popover",label:e.$t("settings.background"),fallback:(Zn=e.previewTheme.colors)==null?void 0:Zn.popover},null,8,["modelValue","label","fallback"]),u(h,{modelValue:e.popoverOpacityLocal,"onUpdate:modelValue":t[87]||(t[87]=y=>e.popoverOpacityLocal=y),name:"popoverOpacity",fallback:(xn=e.previewTheme.opacity)==null?void 0:xn.popover,disabled:e.popoverOpacityLocal==="transparent"},null,8,["modelValue","fallback","disabled"]),u(c,{modelValue:e.popoverTextColorLocal,"onUpdate:modelValue":t[88]||(t[88]=y=>e.popoverTextColorLocal=y),name:"popoverText",label:e.$t("settings.text"),fallback:(eo=e.previewTheme.colors)==null?void 0:eo.popoverText},null,8,["modelValue","label","fallback"]),u(m,{contrast:e.previewContrast.popoverText},null,8,["contrast"]),u(c,{modelValue:e.popoverLinkColorLocal,"onUpdate:modelValue":t[89]||(t[89]=y=>e.popoverLinkColorLocal=y),name:"popoverLink",label:e.$t("settings.links"),fallback:(to=e.previewTheme.colors)==null?void 0:to.popoverLink},null,8,["modelValue","label","fallback"]),u(m,{contrast:e.previewContrast.popoverLink},null,8,["contrast"])]),o("div",E1,[o("h4",null,d(e.$t("settings.style.advanced_colors.selectedPost")),1),u(c,{modelValue:e.selectedPostColorLocal,"onUpdate:modelValue":t[90]||(t[90]=y=>e.selectedPostColorLocal=y),name:"selectedPost",label:e.$t("settings.background"),fallback:(so=e.previewTheme.colors)==null?void 0:so.selectedPost},null,8,["modelValue","label","fallback"]),u(c,{modelValue:e.selectedPostTextColorLocal,"onUpdate:modelValue":t[91]||(t[91]=y=>e.selectedPostTextColorLocal=y),name:"selectedPostText",label:e.$t("settings.text"),fallback:(no=e.previewTheme.colors)==null?void 0:no.selectedPostText},null,8,["modelValue","label","fallback"]),u(m,{contrast:e.previewContrast.selectedPostText},null,8,["contrast"]),u(c,{modelValue:e.selectedPostLinkColorLocal,"onUpdate:modelValue":t[92]||(t[92]=y=>e.selectedPostLinkColorLocal=y),name:"selectedPostLink",label:e.$t("settings.links"),fallback:(oo=e.previewTheme.colors)==null?void 0:oo.selectedPostLink},null,8,["modelValue","label","fallback"]),u(m,{contrast:e.previewContrast.selectedPostLink},null,8,["contrast"])]),o("div",_1,[o("h4",null,d(e.$t("settings.style.advanced_colors.selectedMenu")),1),u(c,{modelValue:e.selectedMenuColorLocal,"onUpdate:modelValue":t[93]||(t[93]=y=>e.selectedMenuColorLocal=y),name:"selectedMenu",label:e.$t("settings.background"),fallback:(ao=e.previewTheme.colors)==null?void 0:ao.selectedMenu},null,8,["modelValue","label","fallback"]),u(c,{modelValue:e.selectedMenuTextColorLocal,"onUpdate:modelValue":t[94]||(t[94]=y=>e.selectedMenuTextColorLocal=y),name:"selectedMenuText",label:e.$t("settings.text"),fallback:(io=e.previewTheme.colors)==null?void 0:io.selectedMenuText},null,8,["modelValue","label","fallback"]),u(m,{contrast:e.previewContrast.selectedMenuText},null,8,["contrast"]),u(c,{modelValue:e.selectedMenuLinkColorLocal,"onUpdate:modelValue":t[95]||(t[95]=y=>e.selectedMenuLinkColorLocal=y),name:"selectedMenuLink",label:e.$t("settings.links"),fallback:(lo=e.previewTheme.colors)==null?void 0:lo.selectedMenuLink},null,8,["modelValue","label","fallback"]),u(m,{contrast:e.previewContrast.selectedMenuLink},null,8,["contrast"])]),o("div",A1,[o("h4",null,d(e.$t("chats.chats")),1),u(c,{modelValue:e.chatBgColorLocal,"onUpdate:modelValue":t[96]||(t[96]=y=>e.chatBgColorLocal=y),name:"chatBgColor",fallback:(ro=e.previewTheme.colors)==null?void 0:ro.bg,label:e.$t("settings.background")},null,8,["modelValue","fallback","label"]),o("h5",null,d(e.$t("settings.style.advanced_colors.chat.incoming")),1),u(c,{modelValue:e.chatMessageIncomingBgColorLocal,"onUpdate:modelValue":t[97]||(t[97]=y=>e.chatMessageIncomingBgColorLocal=y),name:"chatMessageIncomingBgColor",fallback:(uo=e.previewTheme.colors)==null?void 0:uo.bg,label:e.$t("settings.background")},null,8,["modelValue","fallback","label"]),u(c,{modelValue:e.chatMessageIncomingTextColorLocal,"onUpdate:modelValue":t[98]||(t[98]=y=>e.chatMessageIncomingTextColorLocal=y),name:"chatMessageIncomingTextColor",fallback:(co=e.previewTheme.colors)==null?void 0:co.text,label:e.$t("settings.text")},null,8,["modelValue","fallback","label"]),u(c,{modelValue:e.chatMessageIncomingLinkColorLocal,"onUpdate:modelValue":t[99]||(t[99]=y=>e.chatMessageIncomingLinkColorLocal=y),name:"chatMessageIncomingLinkColor",fallback:(po=e.previewTheme.colors)==null?void 0:po.link,label:e.$t("settings.links")},null,8,["modelValue","fallback","label"]),u(c,{modelValue:e.chatMessageIncomingBorderColorLocal,"onUpdate:modelValue":t[100]||(t[100]=y=>e.chatMessageIncomingBorderColorLocal=y),name:"chatMessageIncomingBorderLinkColor",fallback:(ho=e.previewTheme.colors)==null?void 0:ho.fg,label:e.$t("settings.style.advanced_colors.chat.border")},null,8,["modelValue","fallback","label"]),o("h5",null,d(e.$t("settings.style.advanced_colors.chat.outgoing")),1),u(c,{modelValue:e.chatMessageOutgoingBgColorLocal,"onUpdate:modelValue":t[101]||(t[101]=y=>e.chatMessageOutgoingBgColorLocal=y),name:"chatMessageOutgoingBgColor",fallback:(mo=e.previewTheme.colors)==null?void 0:mo.bg,label:e.$t("settings.background")},null,8,["modelValue","fallback","label"]),u(c,{modelValue:e.chatMessageOutgoingTextColorLocal,"onUpdate:modelValue":t[102]||(t[102]=y=>e.chatMessageOutgoingTextColorLocal=y),name:"chatMessageOutgoingTextColor",fallback:(fo=e.previewTheme.colors)==null?void 0:fo.text,label:e.$t("settings.text")},null,8,["modelValue","fallback","label"]),u(c,{modelValue:e.chatMessageOutgoingLinkColorLocal,"onUpdate:modelValue":t[103]||(t[103]=y=>e.chatMessageOutgoingLinkColorLocal=y),name:"chatMessageOutgoingLinkColor",fallback:(go=e.previewTheme.colors)==null?void 0:go.link,label:e.$t("settings.links")},null,8,["modelValue","fallback","label"]),u(c,{modelValue:e.chatMessageOutgoingBorderColorLocal,"onUpdate:modelValue":t[104]||(t[104]=y=>e.chatMessageOutgoingBorderColorLocal=y),name:"chatMessageOutgoingBorderLinkColor",fallback:(bo=e.previewTheme.colors)==null?void 0:bo.bg,label:e.$t("settings.style.advanced_colors.chat.border")},null,8,["modelValue","fallback","label"])])],8,h1),o("div",{label:e.$t("settings.style.radii._tab_label"),class:"radius-container"},[o("div",U1,[o("p",null,d(e.$t("settings.radii_help")),1),o("button",{class:"btn button-default",onClick:t[105]||(t[105]=(...y)=>e.clearRoundness&&e.clearRoundness(...y))},d(e.$t("settings.style.switcher.clear_all")),1)]),u(g,{modelValue:e.btnRadiusLocal,"onUpdate:modelValue":t[106]||(t[106]=y=>e.btnRadiusLocal=y),name:"btnRadius",label:e.$t("settings.btnRadius"),fallback:(vo=e.previewTheme.radii)==null?void 0:vo.btn,max:"16","hard-min":"0"},null,8,["modelValue","label","fallback"]),u(g,{modelValue:e.inputRadiusLocal,"onUpdate:modelValue":t[107]||(t[107]=y=>e.inputRadiusLocal=y),name:"inputRadius",label:e.$t("settings.inputRadius"),fallback:(yo=e.previewTheme.radii)==null?void 0:yo.input,max:"9","hard-min":"0"},null,8,["modelValue","label","fallback"]),u(g,{modelValue:e.checkboxRadiusLocal,"onUpdate:modelValue":t[108]||(t[108]=y=>e.checkboxRadiusLocal=y),name:"checkboxRadius",label:e.$t("settings.checkboxRadius"),fallback:(wo=e.previewTheme.radii)==null?void 0:wo.checkbox,max:"16","hard-min":"0"},null,8,["modelValue","label","fallback"]),u(g,{modelValue:e.panelRadiusLocal,"onUpdate:modelValue":t[109]||(t[109]=y=>e.panelRadiusLocal=y),name:"panelRadius",label:e.$t("settings.panelRadius"),fallback:($o=e.previewTheme.radii)==null?void 0:$o.panel,max:"50","hard-min":"0"},null,8,["modelValue","label","fallback"]),u(g,{modelValue:e.avatarRadiusLocal,"onUpdate:modelValue":t[110]||(t[110]=y=>e.avatarRadiusLocal=y),name:"avatarRadius",label:e.$t("settings.avatarRadius"),fallback:(ko=e.previewTheme.radii)==null?void 0:ko.avatar,max:"28","hard-min":"0"},null,8,["modelValue","label","fallback"]),u(g,{modelValue:e.avatarAltRadiusLocal,"onUpdate:modelValue":t[111]||(t[111]=y=>e.avatarAltRadiusLocal=y),name:"avatarAltRadius",label:e.$t("settings.avatarAltRadius"),fallback:(Co=e.previewTheme.radii)==null?void 0:Co.avatarAlt,max:"28","hard-min":"0"},null,8,["modelValue","label","fallback"]),u(g,{modelValue:e.attachmentRadiusLocal,"onUpdate:modelValue":t[112]||(t[112]=y=>e.attachmentRadiusLocal=y),name:"attachmentRadius",label:e.$t("settings.attachmentRadius"),fallback:(To=e.previewTheme.radii)==null?void 0:To.attachment,max:"50","hard-min":"0"},null,8,["modelValue","label","fallback"]),u(g,{modelValue:e.tooltipRadiusLocal,"onUpdate:modelValue":t[113]||(t[113]=y=>e.tooltipRadiusLocal=y),name:"tooltipRadius",label:e.$t("settings.tooltipRadius"),fallback:(Vo=e.previewTheme.radii)==null?void 0:Vo.tooltip,max:"50","hard-min":"0"},null,8,["modelValue","label","fallback"]),u(g,{modelValue:e.chatMessageRadiusLocal,"onUpdate:modelValue":t[114]||(t[114]=y=>e.chatMessageRadiusLocal=y),name:"chatMessageRadius",label:e.$t("settings.chatMessageRadius"),fallback:((So=e.previewTheme.radii)==null?void 0:So.chatMessage)||2,max:"50","hard-min":"0"},null,8,["modelValue","label","fallback"])],8,O1),o("div",{label:e.$t("settings.style.shadows._tab_label"),class:"shadow-container"},[o("div",B1,[o("div",R1,[$(d(e.$t("settings.style.shadows.component"))+" "+d(" ")+" ",1),u(l,{id:"shadow-switcher",modelValue:e.shadowSelected,"onUpdate:modelValue":t[115]||(t[115]=y=>e.shadowSelected=y),class:"shadow-switcher"},{default:v(()=>[(f(!0),w(K,null,ne(e.shadowsAvailable,y=>(f(),w("option",{key:y,value:y},d(e.$t("settings.style.shadows.components."+y)),9,D1))),128))]),_:1},8,["modelValue"])]),o("div",N1,[u(r,{id:"override",modelValue:e.currentShadowOverriden,"onUpdate:modelValue":t[116]||(t[116]=y=>e.currentShadowOverriden=y),name:"override",class:"input-override"},{default:v(()=>[$(d(e.$t("settings.style.shadows.override")),1)]),_:1},8,["modelValue"])]),o("button",{class:"btn button-default",onClick:t[117]||(t[117]=(...y)=>e.clearShadows&&e.clearShadows(...y))},d(e.$t("settings.style.switcher.clear_all")),1)]),u(k,{modelValue:e.currentShadow,"onUpdate:modelValue":t[118]||(t[118]=y=>e.currentShadow=y),"separate-inset":e.shadowSelected==="avatar"||e.shadowSelected==="avatarStatus",fallback:e.currentShadowFallback,"static-vars":e.previewTheme.colors,compact:!0},null,8,["modelValue","separate-inset","fallback","static-vars"])],8,M1),o("div",{label:e.$t("settings.style.fonts._tab_label"),class:"fonts-container"},[o("div",j1,[o("p",null,d(e.$t("settings.style.fonts.help")),1),o("button",{class:"btn button-default",onClick:t[119]||(t[119]=(...y)=>e.clearFonts&&e.clearFonts(...y))},d(e.$t("settings.style.switcher.clear_all")),1)]),u(V,{modelValue:e.fontsLocal.interface,"onUpdate:modelValue":t[120]||(t[120]=y=>e.fontsLocal.interface=y),name:"ui",label:e.$t("settings.style.fonts.components.interface"),fallback:(Lo=e.previewTheme.fonts)==null?void 0:Lo.interface,"no-inherit":"1"},null,8,["modelValue","label","fallback"]),u(V,{modelValue:e.fontsLocal.input,"onUpdate:modelValue":t[121]||(t[121]=y=>e.fontsLocal.input=y),name:"input",label:e.$t("settings.style.fonts.components.input"),fallback:(Po=e.previewTheme.fonts)==null?void 0:Po.input},null,8,["modelValue","label","fallback"]),u(V,{modelValue:e.fontsLocal.post,"onUpdate:modelValue":t[122]||(t[122]=y=>e.fontsLocal.post=y),name:"post",label:e.$t("settings.style.fonts.components.post"),fallback:(Io=e.previewTheme.fonts)==null?void 0:Io.post},null,8,["modelValue","label","fallback"]),u(V,{modelValue:e.fontsLocal.postCode,"onUpdate:modelValue":t[123]||(t[123]=y=>e.fontsLocal.postCode=y),name:"postCode",label:e.$t("settings.style.fonts.components.postCode"),fallback:(Eo=e.previewTheme.fonts)==null?void 0:Eo.postCode},null,8,["modelValue","label","fallback"])],8,F1)]}),_:1})],1024)),e.isActive?(f(),H($i,{key:0,to:"#unscrolled-content"},[o("div",q1,[o("button",{class:"btn button-default submit",disabled:!e.themeValid,onClick:t[124]||(t[124]=(...C)=>e.setCustomTheme&&e.setCustomTheme(...C))},d(e.$t("general.apply")),9,z1),o("button",{class:"btn button-default",onClick:t[125]||(t[125]=(...C)=>e.clearAll&&e.clearAll(...C))},d(e.$t("settings.style.switcher.reset")),1)])])):T("",!0)])}const W1=J(jv,[["render",H1]]),Y1={components:{Checkbox:$e},props:["name","label","modelValue","fallback","disabled"],emits:["update:modelValue"],computed:{present(){return typeof this.modelValue<"u"}}},G1=["for"],K1=["id","value","disabled"];function X1(e,t,s,n,i,a){const l=L("Checkbox");return f(),w("div",{class:Y(["roundness-control style-control",{disabled:!a.present||s.disabled}])},[o("label",{for:s.name,class:Y(["label",{faint:!a.present||s.disabled}])},d(s.label),11,G1),typeof s.fallback<"u"?(f(),H(l,{key:0,"model-value":a.present,disabled:s.disabled,class:"opt","onUpdate:modelValue":t[0]||(t[0]=r=>e.$emit("update:modelValue",a.present?void 0:s.fallback))},null,8,["model-value","disabled"])):T("",!0),o("input",{id:s.name,class:Y(["input input-number",{disabled:!a.present||s.disabled}]),type:"number",value:s.modelValue||s.fallback,disabled:!a.present||s.disabled,max:"999",min:"0",step:"1",onInput:t[1]||(t[1]=r=>e.$emit("update:modelValue",r.target.value))},null,42,K1)],2)}const J1=J(Y1,[["render",X1]]),Q1={components:{Select:et,SelectMotion:qn,ShadowControl:zn,ColorInput:ft},props:["modelValue"],emits:["update:modelValue"],setup(e,t){const s={},n=t.emit;s.emit=n,s.computeColor=es("computeColor"),s.staticVars=es("staticVars");const i=he(0);s.selectedVirtualDirectiveId=i;const a=Q({get(){return e.modelValue[i.value]},set(c){const h=[...e.modelValue];h[i.value]=c,n("update:modelValue",h)}});s.selectedVirtualDirective=a,s.selectedVirtualDirectiveValType=Q({get(){return e.modelValue[i.value].valType},set(c){const h=c;let m;switch(c){case"shadow":m="0 0 0 #000000 / 1";break;case"color":m="#000000";break;default:m="none"}const g=e.modelValue[i.value].name;e.modelValue[i.value]={name:g,value:m,valType:h}}});const l=he(!0),r=he({});s.draftVirtualDirective=r;const p=es("normalizeShadows");return dt(a,c=>{switch(c.valType){case"shadow":{if(Array.isArray(c.value))r.value=p(c.value);else{const h=c.value.split(/,/g).map(m=>m.trim());r.value=p(h)}break}case"color":r.value=c.value;break;default:r.value=c.value;break}},{immediate:!0}),dt(r,c=>{try{switch(a.value.valType){case"shadow":{e.modelValue[i.value].value=c.map(h=>Yt(h)).join(", ");break}default:e.modelValue[i.value].value=c}l.value=!0}catch(h){console.error("Invalid virtual directive value",h),l.value=!1}},{immediate:!0}),s.getNewVirtualDirective=()=>({name:"newDirective",valType:"generic",value:"foobar"}),s}},Z1={class:"setting-item list-editor variables-editor"},x1={class:"list-select-label",for:"variables-selector"},ey=["value"],ty={class:"list-edit-area"},sy={class:"variable-selector"},ny={class:"variable-name-label",for:"variables-selector"},oy={class:"variable-type-label",for:"variables-selector"},ay={value:"shadow"},iy={value:"color"},ly={value:"generic"};function ry(e,t,s,n,i,a){const l=L("Select"),r=L("SelectMotion"),p=L("ShadowControl"),c=L("ColorInput");return f(),w("div",Z1,[o("label",x1,d(e.$t("settings.style.themes3.editor.variables.label"))+" "+d(" "),1),u(l,{id:"variables-selector",modelValue:e.selectedVirtualDirectiveId,"onUpdate:modelValue":t[0]||(t[0]=h=>e.selectedVirtualDirectiveId=h),class:"list-select",size:"20"},{default:v(()=>[(f(!0),w(K,null,ne(e.modelValue,(h,m)=>(f(),w("option",{key:h.name,value:m},d(h.name),9,ey))),128))]),_:1},8,["modelValue"]),u(r,{class:"list-select-movement","model-value":e.modelValue,"selected-id":e.selectedVirtualDirectiveId,"get-add-value":e.getNewVirtualDirective,"onUpdate:modelValue":t[1]||(t[1]=h=>e.emit("update:modelValue",h)),"onUpdate:selectedId":t[2]||(t[2]=h=>e.selectedVirtualDirectiveId=h)},null,8,["model-value","selected-id","get-add-value"]),o("div",ty,[o("div",sy,[o("label",ny,d(e.$t("settings.style.themes3.editor.variables.name_label"))+" "+d(" "),1),ee(o("input",{"onUpdate:modelValue":t[3]||(t[3]=h=>e.selectedVirtualDirective.name=h),class:"input"},null,512),[[ue,e.selectedVirtualDirective.name]]),o("label",oy,d(e.$t("settings.style.themes3.editor.variables.type_label"))+" "+d(" "),1),u(l,{modelValue:e.selectedVirtualDirectiveValType,"onUpdate:modelValue":t[4]||(t[4]=h=>e.selectedVirtualDirectiveValType=h)},{default:v(()=>[o("option",ay,d(e.$t("settings.style.themes3.editor.variables.type_shadow")),1),o("option",iy,d(e.$t("settings.style.themes3.editor.variables.type_color")),1),o("option",ly,d(e.$t("settings.style.themes3.editor.variables.type_generic")),1)]),_:1},8,["modelValue"])]),e.selectedVirtualDirectiveValType==="shadow"?(f(),H(p,{key:0,modelValue:e.draftVirtualDirective,"onUpdate:modelValue":t[5]||(t[5]=h=>e.draftVirtualDirective=h),"static-vars":e.staticVars,compact:!0},null,8,["modelValue","static-vars"])):T("",!0),e.selectedVirtualDirectiveValType==="color"?(f(),H(c,{key:1,modelValue:e.draftVirtualDirective,"onUpdate:modelValue":t[6]||(t[6]=h=>e.draftVirtualDirective=h),name:"virtual-directive-color",fallback:e.computeColor(e.draftVirtualDirective),label:e.$t("settings.style.themes3.editor.variables.virtual_color"),"hide-optional-checkbox":!0},null,8,["modelValue","fallback","label"])):T("",!0)])])}const dy=J(Q1,[["render",ry]]),ln=e=>["normal",...(e==null?void 0:e.filter(t=>t!=="normal"))||[]].join(":");ge.add(jr,qr,zr,Hr,Wr);const uy={components:{Select:et,SelectMotion:qn,Checkbox:$e,Tooltip:xi,StringSetting:nd,ComponentPreview:Zi,TabSwitcher:Xt,ShadowControl:zn,ColorInput:ft,PaletteEditor:Ji,OpacityInput:jn,RoundnessInput:J1,ContrastRatio:el,Preview:Fn,VirtualDirectivesTab:dy},setup(){const e={},t=x(),s=he(t.styleDataUsed||{}),n=Q(()=>t.styleDataUsed);dt([n],()=>{Ce(t.styleDataUsed)},{once:!0}),e.isActive=Q(()=>{const P=ir().parent.ctx;return P?P.isActive("style"):!1}),e.name=he(""),e.author=he(""),e.license=he(""),e.website=he("");const i=Q(()=>["@meta {",`  name: ${e.name.value};`,`  author: ${e.author.value};`,`  license: ${e.license.value};`,`  website: ${e.website.value};`,"}"].join(`
`)),a=Q(()=>({component:"@meta",directives:{name:e.name.value,author:e.author.value,license:e.license.value,website:e.website.value}})),l=Uo([{name:"default",bg:"#121a24",fg:"#182230",text:"#b9b9ba",link:"#d8a070",accent:"#d8a070",cRed:"#FF0000",cBlue:"#0095ff",cGreen:"#0fa00f",cOrange:"#ffa500"},{name:"light",bg:"#f2f6f9",fg:"#d6dfed",text:"#304055",underlay:"#5d6086",accent:"#f55b1b",cBlue:"#0095ff",cRed:"#d31014",cGreen:"#0fa00f",cOrange:"#ffa500",border:"#d8e6f9"}]);e.palettes=l;const r=P=>{l.splice(0,l.length),l.push(...P)};e.onPalettesUpdate=r;const p=he(0),c=Q({get(){return l[p.value]},set(P){l[p.value]=P}});e.selectedPaletteId=p,e.selectedPalette=c,Dt("selectedPalette",c),dt([c],()=>pe()),e.getNewPalette=()=>({name:"new palette",bg:"#121a24",fg:"#182230",text:"#b9b9ba",link:"#d8a070",accent:"#d8a070",cRed:"#FF0000",cBlue:"#0095ff",cGreen:"#0fa00f",cOrange:"#ffa500"});const h=Q(()=>l.map(P=>{const{name:D,...z}=P;return{component:"@palette",variant:D,directives:Object.entries(z).filter(([q,W])=>W&&q).reduce((q,[W,ie])=>({...q,[W]:ie}),{})}})),m=Q(()=>l.map(({name:P,...D})=>{const z=Object.entries(D).filter(([q,W])=>W&&q).map(([q,W])=>`  ${q}: ${W};`).join(`
`);return`@palette.${P} {
${z}
}`}).join(`

`)),g=Object.assign({"/src/components/alert.style.js":Nr,"/src/components/attachment/attachment.style.js":Dr,"/src/components/badge.style.js":Rr,"/src/components/border.style.js":Br,"/src/components/button.style.js":Mr,"/src/components/button_unstyled.style.js":Ur,"/src/components/chat/chat.style.js":Or,"/src/components/chat_message/chat_message.style.js":Ar,"/src/components/fun_text.style.js":_r,"/src/components/icon.style.js":Er,"/src/components/input.style.js":Ir,"/src/components/link.style.js":Pr,"/src/components/list/list_item.style.js":Lr,"/src/components/menu_item.style.js":Sr,"/src/components/mobile_drawer.style.js":Vr,"/src/components/modal/modals.style.js":Tr,"/src/components/notification/notification.style.js":Cr,"/src/components/panel.style.js":kr,"/src/components/panel_header.style.js":$r,"/src/components/poll/poll_graph.style.js":wr,"/src/components/popover.style.js":yr,"/src/components/rich_content/rich_content.style.js":vr,"/src/components/root.style.js":br,"/src/components/scrollbar.style.js":gr,"/src/components/scrollbar_element.style.js":fr,"/src/components/status/post.style.js":mr,"/src/components/tab_switcher/tab.style.js":hr,"/src/components/text.style.js":pr,"/src/components/top_bar.style.js":cr,"/src/components/underlay.style.js":ur,"/src/components/user_avatar/avatar.style.js":dr,"/src/components/user_card/user_card.style.js":rr}),k=Object.keys(g),V=new Map(k.map(P=>[P,g[P].default]).filter(([,P])=>!P.virtual&&!P.notEditable));e.componentsMap=V;const S=[...V.keys()];e.componentKeys=S;const C=he(V.keys().next().value);e.selectedComponentKey=C;const E=Q(()=>V.get(C.value)),B=Q(()=>E.value.name);e.selectedComponentVariants=Q(()=>Object.keys({normal:null,...E.value.variants||{}})),e.selectedComponentStates=Q(()=>Object.keys({normal:null,...E.value.states||{}}).filter(D=>D!=="normal"));const M=he("normal");e.selectedVariant=M;const R=Uo(new Set);e.selectedState=R,e.updateSelectedStates=(P,D)=>{D?R.add(P):R.delete(P)},dt(B,()=>{M.value="normal",R.clear()});const b=(P,D={})=>P.reduce((z,q)=>{const{parent:W,component:ie}=q,se=W??q,te=!!W,je=te?q:null,{component:Me,variant:Ve="normal",state:ve=[]}=se,qe=`${te?Me:ie}.${Ve}.${ln(ve)}`;let _e=le.get(z,qe);if(_e||(le.set(z,qe,{}),_e=le.get(z,qe)),te){_e._children=_e._children??{};const{component:at,variant:_t="normal",state:At=[],directives:Ot}=je,Ut=`${at}.${_t}.${ln(At)}`;le.set(_e._children,Ut,{directives:Ot})}else _e.directives=se.directives;return z},D),I=Q(()=>{const P={};return S.forEach(D=>{const z=V.get(D),{defaultRules:q,name:W}=z;b(q.map(ie=>({...ie,component:W})),P)}),P});e.componentHas=P=>{var D;return!!((D=E.value.validInnerComponents)!=null&&D.find(z=>z===P))};const A=(P,D)=>{const z=P?`._children.${P}.normal.normal`:"";return`${B.value}.${M.value}.${ln([...R])}${z}.directives.${D}`},O=(P,D,z="")=>Q({get(){return le.get(s.value,A(P,D))!=null},set(q){if(q){const W=le.get(I.value,A(P,D));le.set(s.value,A(P,D),W??z)}else le.unset(s.value,A(P,D));e.updateOverallPreview()}}),U=(P,D,z=q=>q)=>Q({get(){let q;const W=I.value,ie=s.value,se=A(P,D);return q=le.get(ie,se),q||(q=le.get(W,se)),z(q)},set(q){q?le.set(s.value,A(P,D),q):le.unset(s.value,A(P,D)),e.updateOverallPreview()}});e.editedBackgroundColor=U(null,"background"),e.isBackgroundColorPresent=O(null,"background","#FFFFFF"),e.editedOpacity=U(null,"opacity"),e.isOpacityPresent=O(null,"opacity",1),e.editedRoundness=U(null,"roundness"),e.isRoundnessPresent=O(null,"roundness","0"),e.editedTextColor=U("Text","textColor"),e.isTextColorPresent=O("Text","textColor","#000000"),e.editedTextAuto=U("Text","textAuto"),e.isTextAutoPresent=O("Text","textAuto","#000000"),e.editedLinkColor=U("Link","textColor"),e.isLinkColorPresent=O("Link","textColor","#000080"),e.editedIconColor=U("Icon","textColor"),e.isIconColorPresent=O("Icon","textColor","#909090"),e.editedBorderColor=U("Border","textColor"),e.isBorderColorPresent=O("Border","textColor","#909090");const F=(P,D)=>{try{const z=zt(P),q=zt(D),W=Fr(z,q);return{ratio:W,text:W.toPrecision(3)+":1",aa:W>=4.5,aaa:W>=7,laa:W>=3,laaa:W>=4.5}}catch(z){return console.warn("Failure computing contrast",z),{error:z}}},j=P=>P==null?void 0:P.map(D=>{if(typeof D=="object")return D;if(typeof D=="string")try{return Pn(D)}catch(z){return console.warn(z),D}return null});Dt("normalizeShadows",j);const _=U(null,"shadow",j);e.editedShadow=_;const N=he(null);e.editedSubShadowId=N;const Z=Q(()=>_.value==null||N.value==null?null:_.value[N.value]);e.editedSubShadow=Z,e.isShadowPresent=O(null,"shadow",[]),e.onSubShadow=P=>{P!=null?N.value=P:Z.value=null},e.updateSubShadow=(P,D)=>{if(!Z.value||N.value==null)return;const z=[..._.value];z[N.value]={...z[N.value],[P]:D},_.value=z},e.isShadowTabOpen=he(!1),e.onTabSwitch=P=>{e.isShadowTabOpen.value=P==="shadow"},e.editorHintStyle=Q(()=>{const P=E.value.editor,D=[];return P&&Object.keys(P).length>0&&(P.aspect!=null&&D.push(`aspect-ratio: ${P.aspect} !important;`),P.border!=null&&D.push(`border-width: ${P.border}px !important;`)),D.join("; ")});const de=Q(()=>{const P=[],D=(z,q={},W)=>{Object.entries(q||{}).forEach(([se,te])=>{Object.entries(te).forEach(([Me,Ve])=>{const ve=Me.split(/:/g),qe={component:z,variant:se,state:ve,directives:Ve.directives||{}};W&&(qe.parent={component:W}),P.push(qe),W||Object.entries(Ve._children||{}).forEach(([_e,at])=>D(_e,at,z))})})};return[...V.values()].forEach(({name:z})=>{D(z,s.value[z])}),P}),Le=[...V.values()].map(P=>P.defaultRules.filter(D=>D.component==="Root").map(D=>Object.entries(D.directives)).flat()).filter(P=>P).flat().map(([P,D])=>{const[z,q]=D.split("|");return{name:P.substring(2),valType:z==null?void 0:z.trim(),value:q==null?void 0:q.trim()}}),me=he(Le);e.virtualDirectives=me,e.updateVirtualDirectives=P=>{me.value=P};const Oe=Q(()=>({component:"Root",directives:Object.fromEntries(me.value.map(P=>[`--${P.name}`,`${P.valType} | ${P.value}`]))})),Pe=Q(()=>["Root {",...me.value.filter(P=>P.name&&P.valType&&P.value).map(P=>`  --${P.name}: ${P.valType} | ${P.value};`),"}"].join(`
`));e.computeColor=P=>{let D;try{if(D=dn(P,{dynamicVars:gt.value,staticVars:nt.value}),D)return Ze(D)}catch(z){console.warn(z)}return null},Dt("computeColor",e.computeColor),e.contrast=Q(()=>F(e.computeColor(ot.value.background),e.computeColor(ot.value.text)));const ke=_n({filename:()=>e.name.value??"pleroma_theme",mime:"text/plain",extension:"iss",getExportedObject:()=>Ue.value}),Ce=P=>{const D=P.filter(te=>te.component.startsWith("@")),z=P.find(te=>te.component==="Root"),q=P.filter(te=>!te.component.startsWith("@")&&te.component!=="Root"),W=D.find(te=>te.component==="@meta").directives,ie=D.filter(te=>te.component==="@palette");e.name.value=W.name,e.license.value=W.license,e.author.value=W.author,e.website.value=W.website;const se=Object.entries(z.directives).map(([te,je])=>{const[Me,Ve]=je.split("|").map(ve=>ve.trim());return{name:te.substring(2),valType:Me,value:Ve}});me.value=se,r(ie.map(te=>({name:te.variant,...te.directives}))),s.value=b(q),e.updateOverallPreview()},Ie=Jt({accept:".iss",parser(P){return wi(P)},onImportFailure(P){console.error("Failure importing style:",P),this.$store.useInterfaceStore().pushGlobalNotice({messageKey:"settings.invalid_theme_imported",level:"error"})},onImport:Ce}),Fe=Q(()=>[a.value,...h.value,Oe.value,...de.value]),Ue=Q(()=>[i.value,m.value,Pe.value,uv(de.value)].join(`

`));e.clearStyle=()=>{Ce(t().styleDataUsed)},e.exportStyle=()=>{ke.exportData()},e.importStyle=()=>{Ie.importData()},e.applyStyle=()=>{x().setStyleCustom(Fe.value)};const Ee=he([]);e.overallPreviewRules=Ee;const fe=he([]);lr(le.throttle(()=>{try{fe.value=Ln(Ht(Ee.value),"#edited-style-preview").join(`
`)}catch(P){console.error(P)}},500)),e.overallPreviewCssRules=fe;const pe=le.throttle(()=>{try{Ee.value=Ct({inputRuleset:[...Fe.value,{component:"Root",directives:Object.fromEntries(Object.entries(c.value).filter(([P,D])=>P&&D&&P!=="name").map(([P,D])=>[`--${P}`,`color | ${D}`]))}],ultimateBackgroundColor:"#000000",debug:!0}).eager}catch(P){return console.error("Could not compile preview theme",P),null}},5e3),Te=(P,D)=>P.replace(D,".component-preview .preview-block").replace(":active",".preview-active").replace(":hover",".preview-hover").replace(":active",".preview-active").replace(":focus",".preview-focus").replace(":focus-within",".preview-focus-within").replace(":disabled",".preview-disabled"),be=Q(()=>{const P=Ee.value.filter(q=>{var Ve;const W=q.component===B.value,ie=((Ve=q.parent)==null?void 0:Ve.component)===B.value;if(!W&&!ie)return!1;const se=ie?q.parent:q;if(se.component!==B.value||se.variant!==M.value)return!1;const te=new Set(se.state.filter(ve=>ve!=="normal")),je=[...te].filter(ve=>!R.has(ve)),Me=[...R].filter(ve=>!te.has(ve));return je.length+Me.length===0}),z=[...P].filter(q=>q.component===B.value).sort((q,W)=>{const ie=q.selector.split(/ /g).length,se=W.selector.split(/ /g).length;return ie-se})[0].selector;return P.filter(q=>q.selector.startsWith(z))});e.previewClass=Q(()=>{var D;const P=[];return((D=E.value.variants)!=null&&D.normal||M.value!=="normal")&&P.push(E.value.variants[M.value]),R.size>0&&R.forEach(z=>{const q=E.value.states[z];P.push(Te(q))}),P.map(z=>z.substring(1)).join("")}),e.previewCss=Q(()=>{try{const P=be.value[0].selector;return Ht(be.value).map(z=>Te(z,P)).join(`
`)}catch(P){return console.error("Invalid ruleset",P),null}});const gt=Q(()=>be.value[0].dynamicVars),nt=Q(()=>{const P=Ee.value.find(q=>q.component==="Root"),D=Object.entries(P.directives),z={};return D.filter(([q,W])=>q.startsWith("--")&&W.startsWith("color | ")).map(([q,W])=>[q.substring(2),W.substring(8)]).forEach(([q,W])=>{z[q]=dn(W,{dynamicVars:{},staticVars:z})}),z});Dt("staticVars",nt),e.staticVars=nt;const ot=Q(()=>{var z,q,W,ie;const P=gt.value.stacked,D=typeof P=="string"?P:Ze(P);return{text:(z=be.value.find(se=>se.component==="Text"))==null?void 0:z.virtualDirectives["--text"],link:(q=be.value.find(se=>se.component==="Link"))==null?void 0:q.virtualDirectives["--link"],border:(W=be.value.find(se=>se.component==="Border"))==null?void 0:W.virtualDirectives["--border"],icon:(ie=be.value.find(se=>se.component==="Icon"))==null?void 0:ie.virtualDirectives["--icon"],background:D}});return e.previewColors=ot,e.updateOverallPreview=pe,pe(),dt([s.value,l,c,R,M],pe),e}},cy={class:"StyleTab"},py={class:"setting-item heading"},hy={class:"meta-preview"},my={class:"style-actions-container"},fy={class:"style-actions"},gy={class:"setting-list style-metadata"},by=["label"],vy={class:"component-selector"},yy={for:"component-selector"},wy=["value"],$y={key:0,class:"variant-selector"},ky={for:"variant-selector"},Cy=["value"],Ty={key:1,class:"state-selector"},Vy={class:"state-selector-list"},Sy={class:"preview-container"},Ly=["label"],Py={key:2,class:"style-control suboption"},Iy={value:"no-preserve"},Ey={value:"no-auto"},_y={value:"preserve"},Ay={key:4,class:"style-control suboption"},Oy={class:"label"},Uy={key:5},My=["label"],By=["label"],Ry={class:"list-select-label",for:"palette-selector"},Dy=["value"],Ny={class:"list-edit-area"};function Fy(e,t,s,n,i,a){const l=L("Preview"),r=L("FAIcon"),p=L("StringSetting"),c=L("Select"),h=L("Checkbox"),m=L("ComponentPreview"),g=L("ColorInput"),k=L("Tooltip"),V=L("ContrastRatio"),S=L("OpacityInput"),C=L("RoundnessInput"),E=L("ShadowControl"),B=L("tab-switcher"),M=L("SelectMotion"),R=L("PaletteEditor"),G=L("VirtualDirectivesTab");return f(),w("div",cy,[o("div",py,[o("h2",null,d(e.$t("settings.style.themes3.editor.title")),1),o("div",hy,[(f(),H(mt("style"),{innerHTML:e.overallPreviewCssRules},null,8,["innerHTML"])),u(l,{id:"edited-style-preview"}),e.isActive?(f(),H($i,{key:0,to:"#unscrolled-content"},[o("div",my,[o("div",fy,[o("button",{class:"btn button-default button-new",onClick:t[0]||(t[0]=(...b)=>e.clearStyle&&e.clearStyle(...b))},[u(r,{icon:"arrows-rotate"}),$(" "+d(e.$t("settings.style.themes3.editor.reset_style")),1)]),o("button",{class:"btn button-default button-load",onClick:t[1]||(t[1]=(...b)=>e.importStyle&&e.importStyle(...b))},[u(r,{icon:"folder-open"}),$(" "+d(e.$t("settings.style.themes3.editor.load_style")),1)]),o("button",{class:"btn button-default button-save",onClick:t[2]||(t[2]=(...b)=>e.exportStyle&&e.exportStyle(...b))},[u(r,{icon:"floppy-disk"}),$(" "+d(e.$t("settings.style.themes3.editor.save_style")),1)]),o("button",{class:"btn button-default button-apply",onClick:t[3]||(t[3]=(...b)=>e.applyStyle&&e.applyStyle(...b))},[u(r,{icon:"check"}),$(" "+d(e.$t("settings.style.themes3.editor.apply_preview")),1)])])])])):T("",!0),o("ul",gy,[o("li",null,[u(p,{modelValue:e.name,"onUpdate:modelValue":t[4]||(t[4]=b=>e.name=b),class:"meta-field"},{default:v(()=>[$(d(e.$t("settings.style.themes3.editor.style_name")),1)]),_:1},8,["modelValue"])]),o("li",null,[u(p,{modelValue:e.author,"onUpdate:modelValue":t[5]||(t[5]=b=>e.author=b),class:"meta-field"},{default:v(()=>[$(d(e.$t("settings.style.themes3.editor.style_author")),1)]),_:1},8,["modelValue"])]),o("li",null,[u(p,{modelValue:e.license,"onUpdate:modelValue":t[6]||(t[6]=b=>e.license=b),class:"meta-field"},{default:v(()=>[$(d(e.$t("settings.style.themes3.editor.style_license")),1)]),_:1},8,["modelValue"])]),o("li",null,[u(p,{modelValue:e.website,"onUpdate:modelValue":t[7]||(t[7]=b=>e.website=b),class:"meta-field"},{default:v(()=>[$(d(e.$t("settings.style.themes3.editor.style_website")),1)]),_:1},8,["modelValue"])])])])]),u(B,null,{default:v(()=>[o("div",{key:"component",class:"setting-item component-editor",label:e.$t("settings.style.themes3.editor.component_tab")},[o("div",vy,[o("label",yy,d(e.$t("settings.style.themes3.editor.component_selector"))+" "+d(" "),1),u(c,{id:"component-selector",modelValue:e.selectedComponentKey,"onUpdate:modelValue":t[8]||(t[8]=b=>e.selectedComponentKey=b)},{default:v(()=>[(f(!0),w(K,null,ne(e.componentKeys,b=>(f(),w("option",{key:"component-"+b,value:b},d(e.componentsMap.get(b).name),9,wy))),128))]),_:1},8,["modelValue"])]),e.selectedComponentVariants.length>1?(f(),w("div",$y,[o("label",ky,d(e.$t("settings.style.themes3.editor.variant_selector")),1),u(c,{modelValue:e.selectedVariant,"onUpdate:modelValue":t[9]||(t[9]=b=>e.selectedVariant=b)},{default:v(()=>[(f(!0),w(K,null,ne(e.selectedComponentVariants,b=>(f(),w("option",{key:"component-variant-"+b,value:b},d(b),9,Cy))),128))]),_:1},8,["modelValue"])])):T("",!0),e.selectedComponentStates.length>0?(f(),w("div",Ty,[o("label",null,d(e.$t("settings.style.themes3.editor.states_selector")),1),o("ul",Vy,[(f(!0),w(K,null,ne(e.selectedComponentStates,b=>(f(),w("li",{key:"component-state-"+b},[u(h,{value:e.selectedState.has(b),"onUpdate:modelValue":I=>e.updateSelectedStates(b,I)},{default:v(()=>[$(d(b),1)]),_:2},1032,["value","onUpdate:modelValue"])]))),128))])])):T("",!0),o("div",Sy,[(f(),H(mt("style"),{innerHTML:e.previewCss},null,8,["innerHTML"])),u(m,{class:"component-preview","show-text":e.componentHas("Text"),"shadow-control":e.isShadowTabOpen,"preview-class":e.previewClass,"preview-style":e.editorHintStyle,"preview-css":e.previewCss,disabled:!e.editedSubShadow&&typeof e.editedShadow!="string",shadow:e.editedSubShadow,"no-color-control":!0,"onUpdate:shadow":t[10]||(t[10]=({axis:b,value:I})=>e.updateSubShadow(b,I))},null,8,["show-text","shadow-control","preview-class","preview-style","preview-css","disabled","shadow"])]),u(B,{ref:"tabSwitcher",class:"component-settings","on-switch":e.onTabSwitch},{default:v(()=>[o("div",{key:"main",class:"editor-tab",label:e.$t("settings.style.themes3.editor.main_tab")},[u(g,{modelValue:e.editedBackgroundColor,"onUpdate:modelValue":t[11]||(t[11]=b=>e.editedBackgroundColor=b),name:"component-background-color",fallback:e.computeColor(e.editedBackgroundColor)??e.previewColors.background,disabled:!e.isBackgroundColorPresent,label:e.$t("settings.style.themes3.editor.background"),"hide-optional-checkbox":!0},null,8,["modelValue","fallback","disabled","label"]),u(k,{text:e.$t("settings.style.themes3.editor.include_in_rule")},{default:v(()=>[u(h,{modelValue:e.isBackgroundColorPresent,"onUpdate:modelValue":t[12]||(t[12]=b=>e.isBackgroundColorPresent=b)},null,8,["modelValue"])]),_:1},8,["text"]),e.componentHas("Text")?(f(),H(g,{key:0,modelValue:e.editedTextColor,"onUpdate:modelValue":t[13]||(t[13]=b=>e.editedTextColor=b),name:"component-text-color",fallback:e.computeColor(e.editedTextColor)??e.previewColors.text,label:e.$t("settings.style.themes3.editor.text_color"),disabled:!e.isTextColorPresent,"hide-optional-checkbox":!0},null,8,["modelValue","fallback","label","disabled"])):T("",!0),e.componentHas("Text")?(f(),H(k,{key:1,text:e.$t("settings.style.themes3.editor.include_in_rule")},{default:v(()=>[u(h,{modelValue:e.isTextColorPresent,"onUpdate:modelValue":t[14]||(t[14]=b=>e.isTextColorPresent=b)},null,8,["modelValue"])]),_:1},8,["text"])):T("",!0),e.componentHas("Text")?(f(),w("div",Py,[o("label",{for:"textAuto",class:Y(["label",{faint:!e.isTextAutoPresent}])},d(e.$t("settings.style.themes3.editor.text_auto.label")),3),u(c,{id:"textAuto",modelValue:e.editedTextAuto,"onUpdate:modelValue":t[15]||(t[15]=b=>e.editedTextAuto=b),disabled:!e.isTextAutoPresent},{default:v(()=>[o("option",Iy,d(e.$t("settings.style.themes3.editor.text_auto.no-preserve")),1),o("option",Ey,d(e.$t("settings.style.themes3.editor.text_auto.no-auto")),1),o("option",_y,d(e.$t("settings.style.themes3.editor.text_auto.preserve")),1)]),_:1},8,["modelValue","disabled"])])):T("",!0),e.componentHas("Text")?(f(),H(k,{key:3,text:e.$t("settings.style.themes3.editor.include_in_rule")},{default:v(()=>[u(h,{modelValue:e.isTextAutoPresent,"onUpdate:modelValue":t[16]||(t[16]=b=>e.isTextAutoPresent=b)},null,8,["modelValue"])]),_:1},8,["text"])):T("",!0),e.componentHas("Text")?(f(),w("div",Ay,[o("label",Oy,d(e.$t("settings.style.themes3.editor.contrast")),1),u(V,{"show-ratio":!0,contrast:e.contrast},null,8,["contrast"])])):T("",!0),e.componentHas("Text")?(f(),w("div",Uy)):T("",!0),e.componentHas("Link")?(f(),H(g,{key:6,modelValue:e.editedLinkColor,"onUpdate:modelValue":t[17]||(t[17]=b=>e.editedLinkColor=b),name:"component-link-color",fallback:e.computeColor(e.editedLinkColor)??e.previewColors.link,label:e.$t("settings.style.themes3.editor.link_color"),disabled:!e.isLinkColorPresent,"hide-optional-checkbox":!0},null,8,["modelValue","fallback","label","disabled"])):T("",!0),e.componentHas("Link")?(f(),H(k,{key:7,text:e.$t("settings.style.themes3.editor.include_in_rule")},{default:v(()=>[u(h,{modelValue:e.isLinkColorPresent,"onUpdate:modelValue":t[18]||(t[18]=b=>e.isLinkColorPresent=b)},null,8,["modelValue"])]),_:1},8,["text"])):T("",!0),e.componentHas("Icon")?(f(),H(g,{key:8,modelValue:e.editedIconColor,"onUpdate:modelValue":t[19]||(t[19]=b=>e.editedIconColor=b),name:"component-icon-color",fallback:e.computeColor(e.editedIconColor)??e.previewColors.icon,label:e.$t("settings.style.themes3.editor.icon_color"),disabled:!e.isIconColorPresent,"hide-optional-checkbox":!0},null,8,["modelValue","fallback","label","disabled"])):T("",!0),e.componentHas("Icon")?(f(),H(k,{key:9,text:e.$t("settings.style.themes3.editor.include_in_rule")},{default:v(()=>[u(h,{modelValue:e.isIconColorPresent,"onUpdate:modelValue":t[20]||(t[20]=b=>e.isIconColorPresent=b)},null,8,["modelValue"])]),_:1},8,["text"])):T("",!0),e.componentHas("Border")?(f(),H(g,{key:10,modelValue:e.editedBorderColor,"onUpdate:modelValue":t[21]||(t[21]=b=>e.editedBorderColor=b),name:"component-border-color",fallback:e.computeColor(e.editedBorderColor)??e.previewColors.border,label:e.$t("settings.style.themes3.editor.border_color"),disabled:!e.isBorderColorPresent,"hide-optional-checkbox":!0},null,8,["modelValue","fallback","label","disabled"])):T("",!0),e.componentHas("Border")?(f(),H(k,{key:11,text:e.$t("settings.style.themes3.editor.include_in_rule")},{default:v(()=>[u(h,{modelValue:e.isBorderColorPresent,"onUpdate:modelValue":t[22]||(t[22]=b=>e.isBorderColorPresent=b)},null,8,["modelValue"])]),_:1},8,["text"])):T("",!0),u(S,{modelValue:e.editedOpacity,"onUpdate:modelValue":t[23]||(t[23]=b=>e.editedOpacity=b),name:"component-opacity",disabled:!e.isOpacityPresent,label:e.$t("settings.style.themes3.editor.opacity")},null,8,["modelValue","disabled","label"]),u(k,{text:e.$t("settings.style.themes3.editor.include_in_rule")},{default:v(()=>[u(h,{modelValue:e.isOpacityPresent,"onUpdate:modelValue":t[24]||(t[24]=b=>e.isOpacityPresent=b)},null,8,["modelValue"])]),_:1},8,["text"]),u(C,{modelValue:e.editedRoundness,"onUpdate:modelValue":t[25]||(t[25]=b=>e.editedRoundness=b),name:"component-roundness",disabled:!e.isRoundnessPresent,label:e.$t("settings.style.themes3.editor.roundness")},null,8,["modelValue","disabled","label"]),u(k,{text:e.$t("settings.style.themes3.editor.include_in_rule")},{default:v(()=>[u(h,{modelValue:e.isRoundnessPresent,"onUpdate:modelValue":t[26]||(t[26]=b=>e.isRoundnessPresent=b)},null,8,["modelValue"])]),_:1},8,["text"])],8,Ly),o("div",{key:"shadow",class:"editor-tab shadow-tab",label:e.$t("settings.style.themes3.editor.shadows_tab")},[u(h,{modelValue:e.isShadowPresent,"onUpdate:modelValue":t[27]||(t[27]=b=>e.isShadowPresent=b),class:"style-control"},{default:v(()=>[$(d(e.$t("settings.style.themes3.editor.include_in_rule")),1)]),_:1},8,["modelValue"]),u(E,{modelValue:e.editedShadow,"onUpdate:modelValue":t[28]||(t[28]=b=>e.editedShadow=b),disabled:!e.isShadowPresent,"no-preview":!0,compact:!0,"static-vars":e.staticVars,onSubShadowSelected:e.onSubShadow},null,8,["modelValue","disabled","static-vars","onSubShadowSelected"])],8,My)]),_:1},8,["on-switch"])],8,by),o("div",{key:"palette",label:e.$t("settings.style.themes3.editor.palette_tab"),class:"setting-item list-editor palette-editor"},[o("label",Ry,d(e.$t("settings.style.themes3.palette.label"))+" "+d(" "),1),u(c,{id:"palette-selector",modelValue:e.selectedPaletteId,"onUpdate:modelValue":t[29]||(t[29]=b=>e.selectedPaletteId=b),class:"list-select",size:"4"},{default:v(()=>[(f(!0),w(K,null,ne(e.palettes,(b,I)=>(f(),w("option",{key:b.name,value:I},d(b.name),9,Dy))),128))]),_:1},8,["modelValue"]),u(M,{class:"list-select-movement","model-value":e.palettes,"selected-id":e.selectedPaletteId,"get-add-value":e.getNewPalette,"onUpdate:modelValue":e.onPalettesUpdate,"onUpdate:selectedId":t[30]||(t[30]=b=>e.selectedPaletteId=b)},null,8,["model-value","selected-id","get-add-value","onUpdate:modelValue"]),o("div",Ny,[u(p,{modelValue:e.selectedPalette.name,"onUpdate:modelValue":t[31]||(t[31]=b=>e.selectedPalette.name=b),class:"palette-name-input"},{default:v(()=>[$(d(e.$t("settings.style.themes3.palette.name_label")),1)]),_:1},8,["modelValue"]),u(R,{modelValue:e.selectedPalette,"onUpdate:modelValue":t[32]||(t[32]=b=>e.selectedPalette=b),class:"palette-editor-single"},null,8,["modelValue"])])],8,By),u(G,{key:"variables",label:e.$t("settings.style.themes3.editor.variables_tab"),"model-value":e.virtualDirectives,"onUpdate:modelValue":e.updateVirtualDirectives},null,8,["label","model-value","onUpdate:modelValue"])]),_:1})])}const jy=J(uy,[["render",Fy]]);ge.add(Yr,Gr,Kr,Xr,Jr,Qr,Zr,xr,ed,td);const qy={components:{TabSwitcher:Xt,DataImportExportTab:Ud,MutesAndBlocksTab:Au,NotificationsTab:oc,FilteringTab:$c,SecurityTab:Zp,ProfileTab:uf,GeneralTab:Ff,AppearanceTab:kb,StyleTab:jy,VersionTab:Ob,ThemeTab:W1},computed:{isLoggedIn(){return!!this.$store.state.users.currentUser},open(){return x().settingsModalState!=="hidden"},bodyLock(){return x().settingsModalState==="visible"},expertLevel(){return this.$store.state.config.expertLevel},isMobileLayout(){return x().layoutType==="mobile"}},methods:{onOpen(){const e=x().settingsModalTargetTab;if(e){const t=this.$refs.tabSwitcher.$slots.default().findIndex(s=>s.props&&s.props["data-tab-name"]===e);t>=0&&this.$refs.tabSwitcher.setTab(t)}x().clearSettingsModalTargetTab()}},mounted(){this.onOpen()},watch:{open:function(e){e&&this.onOpen()}}},zy=["label"],Hy=["label"],Wy=["label"],Yy=["label"],Gy=["label"],Ky=["label"],Xy=["label"],Jy=["label"],Qy=["label"],Zy=["label"],xy=["label"];function ew(e,t,s,n,i,a){const l=L("GeneralTab"),r=L("AppearanceTab"),p=L("StyleTab"),c=L("ThemeTab"),h=L("ProfileTab"),m=L("NotificationsTab"),g=L("SecurityTab"),k=L("FilteringTab"),V=L("MutesAndBlocksTab"),S=L("DataImportExportTab"),C=L("VersionTab"),E=L("tab-switcher");return f(),H(E,{ref:"tabSwitcher",class:"settings_tab-switcher","side-tab-bar":!0,"scrollable-tabs":!0,"body-scroll-lock":e.bodyLock},{default:v(()=>[o("div",{label:e.$t("settings.general"),icon:"wrench","data-tab-name":"general"},[u(l)],8,zy),o("div",{label:e.$t("settings.appearance"),icon:"window-restore","data-tab-name":"appearance","delay-render":!0},[u(r)],8,Hy),e.expertLevel>0?(f(),w("div",{key:0,label:e.$t("settings.style.themes3.editor.title"),icon:"palette","data-tab-name":"style","delay-render":!0},[u(p)],8,Wy)):T("",!0),e.expertLevel>0?(f(),w("div",{key:1,label:e.$t("settings.theme_old"),icon:"paint-brush","data-tab-name":"theme","delay-render":!0},[u(c)],8,Yy)):T("",!0),e.isLoggedIn?(f(),w("div",{key:2,label:e.$t("settings.profile_tab"),icon:"user","data-tab-name":"profile"},[u(h)],8,Gy)):T("",!0),e.isLoggedIn?(f(),w("div",{key:3,label:e.$t("settings.notifications"),icon:"bell","data-tab-name":"notifications"},[u(m)],8,Ky)):T("",!0),e.isLoggedIn?(f(),w("div",{key:4,label:e.$t("settings.security_tab"),icon:"lock","data-tab-name":"security"},[u(g)],8,Xy)):T("",!0),o("div",{label:e.$t("settings.filtering"),icon:"filter","data-tab-name":"filtering"},[u(k)],8,Jy),e.isLoggedIn?(f(),w("div",{key:5,label:e.$t("settings.mutes_and_blocks"),fullHeight:!0,icon:"eye-slash","data-tab-name":"mutesAndBlocks"},[u(V)],8,Qy)):T("",!0),e.isLoggedIn?(f(),w("div",{key:6,label:e.$t("settings.data_import_export_tab"),icon:"download","data-tab-name":"dataImportExport"},[u(S)],8,Zy)):T("",!0),o("div",{label:e.$t("settings.version.title"),icon:"info","data-tab-name":"version"},[u(C)],8,xy)]),_:1},8,["body-scroll-lock"])}const ow=J(qy,[["render",ew]]);export{ow as default};
//# sourceMappingURL=settings_modal_user_content.CgvkLAsV.js.map
