{"version":3,"file":"sticker_picker.Vxn59pym.js","sources":["../../../src/components/sticker_picker/sticker_picker.js?vue&type=script&src=true&lang.js","../../../src/components/sticker_picker/sticker_picker.vue"],"sourcesContent":["/* eslint-env browser */\nimport statusPosterService from '../../services/status_poster/status_poster.service.js'\nimport TabSwitcher from '../tab_switcher/tab_switcher.jsx'\n\nconst StickerPicker = {\n  components: {\n    TabSwitcher\n  },\n  data () {\n    return {\n      meta: {\n        stickers: []\n      },\n      path: ''\n    }\n  },\n  computed: {\n    pack () {\n      return this.$store.state.instance.stickers || []\n    }\n  },\n  methods: {\n    clear () {\n      this.meta = {\n        stickers: []\n      }\n    },\n    pick (sticker, name) {\n      const store = this.$store\n      // TODO remove this workaround by finding a way to bypass reuploads\n      fetch(sticker)\n        .then((res) => {\n          res.blob().then((blob) => {\n            const file = new File([blob], name, { mimetype: 'image/png' })\n            const formData = new FormData()\n            formData.append('file', file)\n            statusPosterService.uploadMedia({ store, formData })\n              .then((fileData) => {\n                this.$emit('uploaded', fileData)\n                this.clear()\n              }, (error) => {\n                console.warn(\"Can't attach sticker\")\n                console.warn(error)\n                this.$emit('upload-failed', 'default')\n              })\n          })\n        })\n    }\n  }\n}\n\nexport default StickerPicker\n","<template>\n  <div\n    class=\"sticker-picker\"\n  >\n    <tab-switcher\n      class=\"tab-switcher\"\n      :render-only-focused=\"true\"\n      scrollable-tabs\n    >\n      <div\n        v-for=\"stickerpack in pack\"\n        :key=\"stickerpack.path\"\n        :image-tooltip=\"stickerpack.meta.title\"\n        :image=\"stickerpack.path + stickerpack.meta.tabIcon\"\n        class=\"sticker-picker-content\"\n      >\n        <div\n          v-for=\"sticker in stickerpack.meta.stickers\"\n          :key=\"sticker\"\n          class=\"sticker\"\n          @click.stop.prevent=\"pick(stickerpack.path + sticker, stickerpack.meta.title)\"\n        >\n          <img\n            :src=\"stickerpack.path + sticker\"\n          >\n        </div>\n      </div>\n    </tab-switcher>\n  </div>\n</template>\n\n<script src=\"./sticker_picker.js\"></script>\n\n<style lang=\"scss\">\n.sticker-picker {\n  width: 100%;\n\n  .contents {\n    min-height: 250px;\n\n    .sticker-picker-content {\n      display: flex;\n      flex-wrap: wrap;\n      padding: 0 4px;\n\n      .sticker {\n        display: flex;\n        flex: 1 1 auto;\n        margin: 4px;\n        width: 56px;\n        height: 56px;\n\n        img {\n          height: 100%;\n\n          &:hover {\n            filter: drop-shadow(0 0 5px var(--accent));\n          }\n        }\n      }\n    }\n  }\n}\n\n</style>\n"],"names":["StickerPicker","TabSwitcher","sticker","name","store","res","blob","file","formData","statusPosterService","fileData","error","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","_openBlock","_createElementBlock","_createVNode","_component_tab_switcher","_withCtx","_Fragment","_renderList","_ctx","stickerpack","_withModifiers","$event","_createElementVNode"],"mappings":"+GAIA,MAAMA,EAAgB,CACpB,WAAY,CACV,YAAAC,CACD,EACD,MAAQ,CACN,MAAO,CACL,KAAM,CACJ,SAAU,CAAA,CACX,EACD,KAAM,EACZ,CACG,EACD,SAAU,CACR,MAAQ,CACN,OAAO,KAAK,OAAO,MAAM,SAAS,UAAY,CAAA,CACpD,CACG,EACD,QAAS,CACP,OAAS,CACP,KAAK,KAAO,CACV,SAAU,CAAA,CAClB,CACK,EACD,KAAMC,EAASC,EAAM,CACnB,MAAMC,EAAQ,KAAK,OAEnB,MAAMF,CAAO,EACV,KAAMG,GAAQ,CACbA,EAAI,KAAI,EAAG,KAAMC,GAAS,CACxB,MAAMC,EAAO,IAAI,KAAK,CAACD,CAAI,EAAGH,EAAM,CAAE,SAAU,WAAa,CAAA,EACvDK,EAAW,IAAI,SACrBA,EAAS,OAAO,OAAQD,CAAI,EAC5BE,EAAoB,YAAY,CAAE,MAAAL,EAAO,SAAAI,CAAU,CAAA,EAChD,KAAME,GAAa,CAClB,KAAK,MAAM,WAAYA,CAAQ,EAC/B,KAAK,MAAK,CACX,EAAGC,GAAU,CACZ,QAAQ,KAAK,sBAAsB,EACnC,QAAQ,KAAKA,CAAK,EAClB,KAAK,MAAM,gBAAiB,SAAS,CACtC,CAAA,CACJ,CAAA,CACF,CAAA,CACT,CACA,CACA,EC/CIC,EAAA,CAAA,MAAM,gBAAgB,EAF1BC,EAAA,CAAA,gBAAA,OAAA,EAAAC,EAAA,CAAA,SAAA,EAAAC,EAAA,CAAA,KAAA,oDACE,OAAAC,EAAA,EAAAC,EA2BM,MA3BNL,EA2BM,CAxBJM,EAuBeC,EAAA,CAtBb,MAAM,eACL,sBAAqB,GACtB,kBAAA,KAPN,QAAAC,EAUQ,IAA2B,EAD7BJ,EAAA,EAAA,EAAAC,EAiBMI,EA1BZ,KAAAC,EAU8BC,EAAI,KAAnBC,QADTP,EAiBM,MAAA,CAfH,IAAKO,EAAY,KACjB,gBAAeA,EAAY,KAAK,MAChC,MAAOA,EAAY,KAAOA,EAAY,KAAK,QAC5C,MAAM,kCAENP,EASMI,EAAA,KAzBdC,EAiB4BE,EAAY,KAAK,SAA5BtB,QADTe,EASM,MAAA,CAPH,IAAKf,EACN,MAAM,UACL,QApBXuB,EAAAC,GAoB+BH,EAAI,KAACC,EAAY,KAAOtB,EAASsB,EAAY,KAAK,KAAK,EAAA,CAAA,OAAA,SAAA,CAAA,IAE5EG,EAEC,MAAA,CADE,IAAKH,EAAY,KAAOtB,CAvBrC,EAAA,KAAA,EAAAa,CAAA,CAAA,EAAA,EAAAD,CAAA,SAAA,EAAA,EAAAD,CAAA,YAAA,EAAA"}